{
  "version": 3,
  "sources": ["../../../Advanced Cropper/advanced-cropper/dist/utils/index.js", "../../../Advanced Cropper/advanced-cropper/dist/constants/index.js", "../../../Advanced Cropper/advanced-cropper/dist/service/utils.js", "../../../Advanced Cropper/advanced-cropper/dist/service/helpers.js", "../../../Advanced Cropper/advanced-cropper/dist/service/sizeRestrictions.js", "../../../Advanced Cropper/advanced-cropper/dist/state/copyState.js", "../../../Advanced Cropper/advanced-cropper/dist/types/index.js", "../../../Advanced Cropper/advanced-cropper/dist/service/approximateSize.js", "../../../Advanced Cropper/advanced-cropper/dist/service/fitVisibleArea.js", "../../../Advanced Cropper/advanced-cropper/dist/algorithms/moveCoordinatesAlgorithm.js", "../../../Advanced Cropper/advanced-cropper/dist/state/setCoordinates.js", "../../../Advanced Cropper/advanced-cropper/dist/service/fitCoordinates.js", "../../../Advanced Cropper/advanced-cropper/dist/state/setVisibleArea.js", "../../../Advanced Cropper/advanced-cropper/dist/state/createState.js", "../../../Advanced Cropper/advanced-cropper/dist/state/moveCoordinates.js", "../../../Advanced Cropper/advanced-cropper/dist/algorithms/resizeCoordinatesAlgorithm.js", "../../../Advanced Cropper/advanced-cropper/dist/state/resizeCoordinates.js", "../../../Advanced Cropper/advanced-cropper/dist/state/setBoundary.js", "../../../Advanced Cropper/advanced-cropper/dist/algorithms/rotateImageAlgorithm.js", "../../../Advanced Cropper/advanced-cropper/dist/algorithms/flipImageAlgorithm.js", "../../../Advanced Cropper/advanced-cropper/dist/algorithms/transformImageAlgorithm.js", "../../../Advanced Cropper/advanced-cropper/dist/state/transformImage.js", "../../../Advanced Cropper/advanced-cropper/dist/state/reconcileState.js", "../../../Advanced Cropper/advanced-cropper/dist/service/normalize.js", "../../../Advanced Cropper/advanced-cropper/dist/service/imageTransforms.js", "../../../Advanced Cropper/advanced-cropper/dist/service/interactions.js", "../../../Advanced Cropper/advanced-cropper/dist/service/isEqualState.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultPositionRestrictions.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultVisibleArea.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultSize.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultSizeRestrictions.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultPosition.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultAreaPositionRestrictions.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultAreaSizeRestrictions.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultBoundary.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/defaultStencilConstraints.js", "../../../Advanced Cropper/advanced-cropper/dist/defaults/index.js", "../../../Advanced Cropper/advanced-cropper/dist/instance/AbstractCropperInstance.js", "../../../Advanced Cropper/advanced-cropper/dist/animation/index.js", "../../../Advanced Cropper/advanced-cropper/dist/canvas/index.js", "../../../Advanced Cropper/advanced-cropper/dist/boundary/index.js", "../../../Advanced Cropper/advanced-cropper/dist/image/index.js", "../../react-advanced-cropper/src/deprecated/hybridAutoZoom.ts", "../../react-advanced-cropper/src/service/utils.ts", "../../react-advanced-cropper/src/hooks/useDeprecationWarning.ts", "../../react-advanced-cropper/src/service/cropper.ts", "../../react-advanced-cropper/src/hooks/useFirstMountState.ts", "../../react-advanced-cropper/src/hooks/useUpdateEffect.ts", "../../react-advanced-cropper/src/hooks/useStateWithCallback.ts", "../../react-advanced-cropper/src/instance/CropperInstance.ts", "../../react-advanced-cropper/src/hooks/useForceRerender.ts", "../../react-advanced-cropper/src/hooks/usePersistentFunction.ts", "../../react-advanced-cropper/src/hooks/useCropperInstance.ts", "../../react-advanced-cropper/src/hooks/useCropperImage.ts", "../../react-advanced-cropper/src/hooks/useWindowResize.ts", "../../react-advanced-cropper/src/hooks/useCropperAutoReconcile.ts", "../../react-advanced-cropper/src/hooks/useAbstractCropper.ts", "../../react-advanced-cropper/src/components/service/StretchableBoundary.tsx", "../../react-advanced-cropper/src/components/service/CropperFade.tsx", "../../react-advanced-cropper/src/components/service/CropperWrapper.tsx", "../../react-advanced-cropper/src/service/events.ts", "../../react-advanced-cropper/src/components/service/CropperBackgroundImage.tsx", "../../react-advanced-cropper/src/components/service/CropperCanvas.tsx", "../../react-advanced-cropper/src/components/service/DraggableElement.tsx", "../../react-advanced-cropper/src/components/service/LineWrapper.tsx", "../../react-advanced-cropper/src/components/lines/SimpleLine.tsx", "../../react-advanced-cropper/src/components/service/HandlerWrapper.tsx", "../../react-advanced-cropper/src/components/handlers/SimpleHandler.tsx", "../../react-advanced-cropper/src/components/service/BoundingBox.tsx", "../../react-advanced-cropper/src/components/service/StencilOverlay.tsx", "../../react-advanced-cropper/src/hooks/useTransition.ts", "../../react-advanced-cropper/src/components/service/ArtificialTransition.tsx", "../../react-advanced-cropper/src/components/service/StencilWrapper.tsx", "../../react-advanced-cropper/src/components/service/StencilGrid.tsx", "../../react-advanced-cropper/src/components/stencils/RectangleStencil.tsx", "../../react-advanced-cropper/src/hooks/useRotateImageOptions.ts", "../../react-advanced-cropper/src/hooks/useScaleImageOptions.ts", "../../react-advanced-cropper/src/hooks/useMoveImageOptions.ts", "../../react-advanced-cropper/src/components/service/TransformableImage.tsx", "../../react-advanced-cropper/src/components/service/CropperBackgroundWrapper.tsx", "../../react-advanced-cropper/src/components/AbstractCropper.tsx", "../../react-advanced-cropper/src/service/constants.ts", "../../react-advanced-cropper/src/hooks/useAbstractCropperProps.ts", "../../../Advanced Cropper/advanced-cropper/dist/extensions/stencil-size/index.js", "../../react-advanced-cropper/src/components/croppers/FixedCropper.tsx", "../../react-advanced-cropper/src/components/croppers/Cropper.tsx", "../../react-advanced-cropper/src/components/stencils/CircleStencil.tsx", "../../react-advanced-cropper/src/components/service/CropperSource.tsx", "../../react-advanced-cropper/src/components/helpers/CropperPreviewWrapper.tsx", "../../react-advanced-cropper/src/components/helpers/CropperPreviewBackground.tsx", "../../react-advanced-cropper/src/components/helpers/CropperPreview.tsx", "../../react-advanced-cropper/src/service/react.ts"],
  "sourcesContent": ["function getDirectionNames(hDirection, vDirection) {\n    var camelCase, snakeCase;\n    if (hDirection && vDirection) {\n        camelCase = \"\" + hDirection + vDirection[0].toUpperCase() + vDirection.slice(1);\n        snakeCase = hDirection + \"-\" + vDirection;\n    }\n    else {\n        camelCase = hDirection || vDirection;\n        snakeCase = hDirection || vDirection;\n    }\n    return { camelCase: camelCase, snakeCase: snakeCase };\n}\nfunction isBlob(url) {\n    return /^blob:/.test(url);\n}\nfunction isDataUrl(url) {\n    return /^data:/.test(url);\n}\nfunction isLocal(url) {\n    return isBlob(url) || isDataUrl(url);\n}\nfunction isCrossOriginURL(url) {\n    if (isLocal(url)) {\n        return false;\n    }\n    var pageLocation = window.location;\n    var URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\n    var urlMatch = URL_HOST_PATTERN.exec(url) || [];\n    var urlparts = {\n        protocol: urlMatch[1] || '',\n        host: urlMatch[2] || '',\n        port: urlMatch[3] || '',\n    };\n    var defaultPort = function (protocol) {\n        if (protocol === 'http') {\n            return 80;\n        }\n        else {\n            return 433;\n        }\n    };\n    var portOf = function (location) {\n        return location.port || defaultPort((location.protocol || pageLocation.protocol));\n    };\n    return !((!urlparts.protocol && !urlparts.host && !urlparts.port) ||\n        Boolean(urlparts.protocol &&\n            urlparts.protocol == pageLocation.protocol &&\n            urlparts.host &&\n            urlparts.host == pageLocation.host &&\n            urlparts.host &&\n            portOf(urlparts) == portOf(pageLocation)));\n}\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction isUndefined(obj) {\n    return obj === undefined;\n}\nvar isObject = function (term) {\n    return term !== null && typeof term === 'object';\n};\n// TODO: add the typing\nfunction getOptions(options, defaultScheme, falseScheme) {\n    if (falseScheme === void 0) { falseScheme = {}; }\n    var result = {};\n    if (isObject(options)) {\n        Object.keys(defaultScheme).forEach(function (key) {\n            if (isUndefined(options[key])) {\n                result[key] = defaultScheme[key];\n            }\n            else if (isObject(defaultScheme[key])) {\n                if (isObject(options[key])) {\n                    result[key] = getOptions(options[key], defaultScheme[key], falseScheme[key]);\n                }\n                else {\n                    result[key] = options[key] ? defaultScheme[key] : falseScheme[key];\n                }\n            }\n            else if (defaultScheme[key] === true || defaultScheme[key] === false) {\n                result[key] = Boolean(options[key]);\n            }\n            else {\n                result[key] = options[key];\n            }\n        });\n        return result;\n    }\n    else {\n        if (options) {\n            return defaultScheme;\n        }\n        else {\n            return falseScheme;\n        }\n    }\n}\nfunction parseNumber(number) {\n    var parsedNumber = Number(number);\n    if (Number.isNaN(parsedNumber)) {\n        return number;\n    }\n    else {\n        return parsedNumber;\n    }\n}\nfunction isBoolean(value) {\n    return value === true || value === false;\n}\nfunction isNumber(value) {\n    return typeof value === 'number';\n}\nfunction isString(value) {\n    return typeof value === 'string';\n}\nfunction isNaN(value) {\n    return value !== value;\n}\nfunction isNumeric(value) {\n    return ((isNumber(value) && !isNaN(value)) ||\n        (isString(value) && !Number.isNaN(parseFloat(value)) && isFinite(parseFloat(value))));\n}\nfunction distance(firstPoint, secondPoint) {\n    return Math.sqrt(Math.pow(firstPoint.left - secondPoint.left, 2) + Math.pow(firstPoint.top - secondPoint.top, 2));\n}\nfunction isRoughlyEqual(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = 1e-3; }\n    return Math.abs(b - a) < tolerance;\n}\nfunction isGreater(a, b, tolerance) {\n    return isRoughlyEqual(a, b, tolerance) ? false : a > b;\n}\nfunction isLower(a, b, tolerance) {\n    return isRoughlyEqual(a, b, tolerance) ? false : a < b;\n}\nfunction isArrayBufferLike(value) {\n    return value instanceof ArrayBuffer;\n}\nfunction getCloserAngle(reference, angle) {\n    var turnsCount = Math.floor(reference / 360);\n    var firstCandidate = turnsCount * 360 + angle;\n    var secondCandidate = (turnsCount + 1) * 360 + angle;\n    if (Math.abs(firstCandidate - reference) < Math.abs(secondCandidate - reference)) {\n        return firstCandidate;\n    }\n    else {\n        return secondCandidate;\n    }\n}\nfunction sign(value) {\n    var number = +value;\n    if (number === 0 || isNaN(number)) {\n        return number;\n    }\n    return number > 0 ? 1 : -1;\n}\nfunction promiseTimeout(timeout) {\n    return new Promise(function (resolve) {\n        setTimeout(function () {\n            resolve();\n        }, timeout);\n    });\n}\n// Not performant, small function to reduce the code amount\nfunction deepClone(obj) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    var result = {};\n    if (Array.isArray(obj)) {\n        result = obj.map(function (item) { return deepClone(item); });\n    }\n    else {\n        Object.keys(obj).forEach(function (key) {\n            return (result[key] = deepClone(obj[key]));\n        });\n    }\n    return result;\n}\nfunction deepCompare(a, b, tolerance) {\n    if (tolerance === void 0) { tolerance = 1e-3; }\n    if (isNumber(a) && isNumber(b) && isRoughlyEqual(a, b, tolerance))\n        return true;\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        if (a.constructor !== b.constructor)\n            return false;\n        var length_1, i = void 0;\n        if (Array.isArray(a)) {\n            length_1 = a.length;\n            if (length_1 != b.length)\n                return false;\n            for (i = length_1; i-- !== 0;)\n                if (!deepCompare(a[i], b[i], tolerance))\n                    return false;\n            return true;\n        }\n        if (a.valueOf !== Object.prototype.valueOf)\n            return a.valueOf() === b.valueOf();\n        if (a.toString !== Object.prototype.toString)\n            return a.toString() === b.toString();\n        var keys = Object.keys(a);\n        length_1 = keys.length;\n        if (length_1 !== Object.keys(b).length)\n            return false;\n        for (i = length_1; i-- !== 0;)\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\n                return false;\n        for (i = length_1; i-- !== 0;) {\n            var key = keys[i];\n            if (!deepCompare(a[key], b[key], tolerance))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\nfunction isWheelEvent(event) {\n    return 'deltaX' in event;\n}\nfunction isTouchEvent(event) {\n    return 'touches' in event;\n}\nfunction isMouseEvent(event) {\n    return 'buttons' in event;\n}\nfunction emptyCoordinates() {\n    return {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0,\n    };\n}\nfunction isCardinalDirection(value) {\n    return value === 'west' || value === 'south' || value === 'north' || value === 'east';\n}\nfunction isOrdinalDirection(value) {\n    return (isCardinalDirection(value) ||\n        value === 'westNorth' ||\n        value === 'westSouth' ||\n        value === 'eastNorth' ||\n        value === 'eastSouth');\n}\nfunction debounce(callback, delay) {\n    var timestamp;\n    var timeout;\n    function later() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var last = Date.now() - timestamp;\n        var delayValue = isFunction(delay) ? delay() : delay || 0;\n        if (last < delayValue && last >= 0) {\n            timeout = setTimeout(function () { return later.apply(void 0, args); }, delayValue - last);\n        }\n        else {\n            callback.apply(void 0, args);\n        }\n    }\n    function result() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        timestamp = Date.now();\n        timeout = setTimeout(function () { return later.apply(void 0, args); }, isFunction(delay) ? delay() : delay || 0);\n    }\n    result.clear = function () {\n        clearTimeout(timeout);\n    };\n    return result;\n}\n\nexport { debounce, deepClone, deepCompare, distance, emptyCoordinates, getCloserAngle, getDirectionNames, getOptions, isArray, isArrayBufferLike, isBlob, isBoolean, isCardinalDirection, isCrossOriginURL, isDataUrl, isFunction, isGreater, isLocal, isLower, isMouseEvent, isNaN, isNumber, isNumeric, isObject, isOrdinalDirection, isRoughlyEqual, isString, isTouchEvent, isUndefined, isWheelEvent, parseNumber, promiseTimeout, sign };\n", "var ALL_DIRECTIONS = ['left', 'right', 'top', 'bottom'];\nvar HORIZONTAL_DIRECTIONS = ['left', 'right'];\nvar VERTICAL_DIRECTIONS = ['top', 'bottom'];\n\nexport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS };\n", "import { __assign } from 'tslib';\nimport { ALL_DIRECTIONS } from '../constants/index.js';\nimport { isLower, isGreater, isNumber, isNumeric, isUndefined, isFunction } from '../utils/index.js';\n\nfunction diff(firstObject, secondObject) {\n    return {\n        left: firstObject.left - secondObject.left,\n        top: firstObject.top - secondObject.top,\n    };\n}\nfunction getCenter(object) {\n    return {\n        left: object.left + object.width / 2,\n        top: object.top + object.height / 2,\n    };\n}\nfunction getOppositeSide(side) {\n    return {\n        left: 'right',\n        top: 'bottom',\n        right: 'left',\n        bottom: 'top',\n    }[side];\n}\nfunction sizeDistance(a, b) {\n    return Math.pow(a.width - b.width, 2) + Math.pow(a.height - b.height, 2);\n}\nfunction applyDirections(coordinates, directions) {\n    return {\n        left: coordinates.left - directions.left,\n        top: coordinates.top - directions.top,\n        width: coordinates.width + directions.left + directions.right,\n        height: coordinates.height + directions.top + directions.bottom,\n    };\n}\nfunction inverseMove(directions) {\n    return {\n        left: -directions.left,\n        top: -directions.top,\n    };\n}\nfunction applyMove(object, move) {\n    return __assign(__assign({}, object), { left: object.left + move.left, top: object.top + move.top });\n}\nfunction coordinatesToPositionRestrictions(coordinates) {\n    return {\n        left: coordinates.left,\n        top: coordinates.top,\n        right: coordinates.left + coordinates.width,\n        bottom: coordinates.top + coordinates.height,\n    };\n}\nfunction applyScale(object, factor, center, progress) {\n    if (factor !== 1) {\n        if ('left' in object || 'top' in object) {\n            if (center) {\n                var currentCenter = getCenter(object);\n                return {\n                    width: object.width * factor,\n                    height: object.height * factor,\n                    left: object.left +\n                        (object.width * (1 - factor)) / 2 +\n                        (center.left - currentCenter.left) * (progress || 1 - factor),\n                    top: object.top +\n                        (object.height * (1 - factor)) / 2 +\n                        (center.top - currentCenter.top) * (progress || 1 - factor),\n                };\n            }\n            else {\n                return {\n                    width: object.width * factor,\n                    height: object.height * factor,\n                    left: object.left + (object.width * (1 - factor)) / 2,\n                    top: object.top + (object.height * (1 - factor)) / 2,\n                };\n            }\n        }\n        else {\n            return {\n                width: object.width * factor,\n                height: object.height * factor,\n            };\n        }\n    }\n    else {\n        return object;\n    }\n}\nfunction ratio(object) {\n    return object.width / object.height;\n}\nfunction maxScale(size, restrictions) {\n    return Math.min(restrictions.maxWidth ? restrictions.maxWidth / size.width : Infinity, restrictions.maxHeight ? restrictions.maxHeight / size.height : Infinity);\n}\nfunction minScale(size, restrictions) {\n    return Math.max(restrictions.minWidth ? restrictions.minWidth / size.width : 0, restrictions.minHeight ? restrictions.minHeight / size.height : 0);\n}\nfunction getBrokenRatio(currentAspectRatio, aspectRatio) {\n    var ratioBroken;\n    if (aspectRatio.minimum && isLower(currentAspectRatio, aspectRatio.minimum)) {\n        ratioBroken = aspectRatio.minimum;\n    }\n    else if (aspectRatio.maximum && isGreater(currentAspectRatio, aspectRatio.maximum)) {\n        ratioBroken = aspectRatio.maximum;\n    }\n    return ratioBroken;\n}\nfunction fitToSizeRestrictions(coordinates, sizeRestrictions) {\n    var aspectRatio = ratio(coordinates);\n    var scale = 1;\n    if (sizeRestrictions.minWidth > 0 && sizeRestrictions.minHeight > 0) {\n        if (aspectRatio > sizeRestrictions.minWidth / sizeRestrictions.minHeight) {\n            if (coordinates.height < sizeRestrictions.minHeight) {\n                scale = sizeRestrictions.minHeight / coordinates.height;\n            }\n        }\n        else {\n            if (coordinates.width < sizeRestrictions.minWidth) {\n                scale = sizeRestrictions.minWidth / coordinates.width;\n            }\n        }\n    }\n    else if (sizeRestrictions.minWidth > 0) {\n        if (coordinates.width < sizeRestrictions.minWidth) {\n            scale = sizeRestrictions.minWidth / coordinates.width;\n        }\n    }\n    else if (sizeRestrictions.minHeight > 0) {\n        if (coordinates.height < sizeRestrictions.minHeight) {\n            scale = sizeRestrictions.minHeight / coordinates.height;\n        }\n    }\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\n        if (aspectRatio > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\n            if (coordinates.width > sizeRestrictions.maxWidth) {\n                scale = sizeRestrictions.maxWidth / coordinates.width;\n            }\n        }\n        else {\n            if (coordinates.height > sizeRestrictions.maxHeight) {\n                scale = sizeRestrictions.maxHeight / coordinates.height;\n            }\n        }\n    }\n    else if (sizeRestrictions.maxWidth < Infinity) {\n        if (coordinates.width > sizeRestrictions.maxWidth) {\n            scale = sizeRestrictions.maxWidth / coordinates.width;\n        }\n    }\n    else if (sizeRestrictions.maxHeight < Infinity) {\n        if (coordinates.height > sizeRestrictions.maxHeight) {\n            scale = sizeRestrictions.maxHeight / coordinates.height;\n        }\n    }\n    return scale;\n}\nfunction getIntersections(object, positionRestrictions) {\n    var intersections = {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0,\n    };\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var areaLimit = positionRestrictions[direction];\n        var objectLimit = coordinatesToPositionRestrictions(object)[direction];\n        if (areaLimit !== undefined && objectLimit !== undefined) {\n            if (direction === 'left' || direction === 'top') {\n                intersections[direction] = Math.max(0, areaLimit - objectLimit);\n            }\n            else {\n                intersections[direction] = Math.max(0, objectLimit - areaLimit);\n            }\n        }\n        else {\n            intersections[direction] = 0;\n        }\n    });\n    return intersections;\n}\nfunction resizeToSizeRestrictions(coordinates, sizeRestrictions) {\n    return applyScale(coordinates, fitToSizeRestrictions(coordinates, sizeRestrictions));\n}\nfunction rotateSize(size, angle) {\n    var radians = (angle * Math.PI) / 180;\n    return {\n        width: Math.abs(size.width * Math.cos(radians)) + Math.abs(size.height * Math.sin(radians)),\n        height: Math.abs(size.width * Math.sin(radians)) + Math.abs(size.height * Math.cos(radians)),\n    };\n}\nfunction rotatePoint(point, angle, anchor) {\n    var radians = (angle * Math.PI) / 180;\n    if (anchor) {\n        return {\n            left: (point.left - anchor.left) * Math.cos(radians) -\n                (point.top - anchor.top) * Math.sin(radians) +\n                anchor.left,\n            top: (point.left - anchor.left) * Math.sin(radians) +\n                (point.top - anchor.top) * Math.cos(radians) +\n                anchor.top,\n        };\n    }\n    else {\n        return {\n            left: point.left * Math.cos(radians) - point.top * Math.sin(radians),\n            top: point.left * Math.sin(radians) + point.top * Math.cos(radians),\n        };\n    }\n}\nfunction positionToSizeRestrictions(positionRestrictions) {\n    return {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: positionRestrictions.right !== undefined && positionRestrictions.left !== undefined\n            ? positionRestrictions.right - positionRestrictions.left\n            : Infinity,\n        maxHeight: positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined\n            ? positionRestrictions.bottom - positionRestrictions.top\n            : Infinity,\n    };\n}\nfunction mergePositionRestrictions(a, b) {\n    var restrictions = {};\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var firstDirection = a[direction];\n        var secondDirection = b[direction];\n        if (firstDirection !== undefined && secondDirection !== undefined) {\n            if (direction === 'left' || direction === 'top') {\n                restrictions[direction] = Math.max(firstDirection, secondDirection);\n            }\n            else {\n                restrictions[direction] = Math.min(firstDirection, secondDirection);\n            }\n        }\n        else if (secondDirection !== undefined) {\n            restrictions[direction] = secondDirection;\n        }\n        else if (firstDirection !== undefined) {\n            restrictions[direction] = firstDirection;\n        }\n    });\n    return restrictions;\n}\nfunction fitToPositionRestrictions(coordinates, positionRestrictions) {\n    var directions = {\n        left: 0,\n        top: 0,\n    };\n    var intersection = getIntersections(coordinates, positionRestrictions);\n    if (intersection.left && intersection.left > 0) {\n        directions.left = intersection.left;\n    }\n    else if (intersection.right && intersection.right > 0) {\n        directions.left = -intersection.right;\n    }\n    if (intersection.top && intersection.top > 0) {\n        directions.top = intersection.top;\n    }\n    else if (intersection.bottom && intersection.bottom > 0) {\n        directions.top = -intersection.bottom;\n    }\n    return directions;\n}\nfunction moveToPositionRestrictions(coordinates, positionRestrictions) {\n    return applyMove(coordinates, fitToPositionRestrictions(coordinates, positionRestrictions));\n}\nfunction aspectRatioIntersection(main, subset) {\n    if (!subset) {\n        return main;\n    }\n    else if (!main) {\n        return subset;\n    }\n    else {\n        return {\n            minimum: Math.min(main.maximum, Math.max(main.minimum, subset.minimum)),\n            maximum: Math.max(main.minimum, Math.min(main.maximum, subset.maximum)),\n        };\n    }\n}\nfunction createAspectRatio(aspectRatio) {\n    if (aspectRatio === void 0) { aspectRatio = {}; }\n    if (isNumber(aspectRatio)) {\n        return {\n            minimum: aspectRatio,\n            maximum: aspectRatio,\n        };\n    }\n    else {\n        return {\n            minimum: isNumeric(aspectRatio.minimum) ? aspectRatio.minimum : 0,\n            maximum: isNumeric(aspectRatio.maximum) ? aspectRatio.maximum : Infinity,\n        };\n    }\n}\nfunction getTransitionStyle(transitions) {\n    return transitions ? transitions.timingFunction + \" \" + (transitions.active ? transitions.duration : 0) + \"ms\" : 'none';\n}\nfunction isConsistentSize(size, restrictions) {\n    return ((isUndefined(restrictions.maxWidth) || !isGreater(size.width, restrictions.maxWidth)) &&\n        (isUndefined(restrictions.maxHeight) || !isGreater(size.height, restrictions.maxHeight)) &&\n        (isUndefined(restrictions.minHeight) || !isLower(size.height, restrictions.minHeight)) &&\n        (isUndefined(restrictions.minWidth) || !isLower(size.width, restrictions.minWidth)));\n}\nfunction isConsistentPosition(coordinates, restrictions) {\n    return ((isUndefined(restrictions.left) || !isLower(coordinates.left, restrictions.left)) &&\n        (isUndefined(restrictions.top) || !isLower(coordinates.top, restrictions.top)) &&\n        (isUndefined(restrictions.right) || !isGreater(coordinates.left + coordinates.width, restrictions.right)) &&\n        (isUndefined(restrictions.bottom) || !isGreater(coordinates.top + coordinates.height, restrictions.bottom)));\n}\nfunction getCloserSize(candidates, reference, sizeRestrictions, aspectRatio) {\n    var traverse = function (ignoreMinimum) {\n        return candidates.reduce(function (minimum, size) {\n            var _a = isFunction(sizeRestrictions)\n                ? sizeRestrictions(size)\n                : sizeRestrictions, maxHeight = _a.maxHeight, maxWidth = _a.maxWidth, minWidth = _a.minWidth, minHeight = _a.minHeight;\n            var preparedAspectRatio = createAspectRatio(isFunction(aspectRatio) ? aspectRatio(size) : aspectRatio);\n            var preparedSizeRestrictions = ignoreMinimum\n                ? { maxWidth: maxWidth, maxHeight: maxHeight }\n                : { maxWidth: maxWidth, maxHeight: maxHeight, minWidth: minWidth, minHeight: minHeight };\n            if (isConsistentSize(size, preparedSizeRestrictions) &&\n                !getBrokenRatio(ratio(size), preparedAspectRatio) &&\n                size.width &&\n                size.height) {\n                return !minimum || isLower(sizeDistance(size, reference), sizeDistance(minimum, reference))\n                    ? size\n                    : minimum;\n            }\n            else {\n                return minimum;\n            }\n        }, null);\n    };\n    return traverse() || traverse(true);\n}\n\nexport { applyDirections, applyMove, applyScale, aspectRatioIntersection, coordinatesToPositionRestrictions, createAspectRatio, diff, fitToPositionRestrictions, fitToSizeRestrictions, getBrokenRatio, getCenter, getCloserSize, getIntersections, getOppositeSide, getTransitionStyle, inverseMove, isConsistentPosition, isConsistentSize, maxScale, mergePositionRestrictions, minScale, moveToPositionRestrictions, positionToSizeRestrictions, ratio, resizeToSizeRestrictions, rotatePoint, rotateSize, sizeDistance };\n", "import { __assign } from 'tslib';\nimport { isFunction, emptyCoordinates, isNumber, isBoolean } from '../utils/index.js';\nimport { createAspectRatio, rotateSize, moveToPositionRestrictions, getBrokenRatio, ratio, isConsistentSize, isConsistentPosition } from './utils.js';\nimport { calculateAreaSizeRestrictions, calculateSizeRestrictions } from './sizeRestrictions.js';\n\nfunction isInitializedState(state) {\n    return Boolean(state && state.visibleArea && state.coordinates);\n}\nfunction getAreaSizeRestrictions(state, settings) {\n    return calculateAreaSizeRestrictions(state, settings);\n}\nfunction getAreaPositionRestrictions(state, settings) {\n    return isFunction(settings.areaPositionRestrictions)\n        ? settings.areaPositionRestrictions(state, settings)\n        : settings.areaPositionRestrictions;\n}\nfunction getSizeRestrictions(state, settings) {\n    return calculateSizeRestrictions(state, settings);\n}\nfunction getPositionRestrictions(state, settings) {\n    return isFunction(settings.positionRestrictions)\n        ? settings.positionRestrictions(state, settings)\n        : settings.positionRestrictions;\n}\nfunction getCoefficient(state) {\n    return state.visibleArea ? state.visibleArea.width / state.boundary.width : 0;\n}\nfunction getStencilCoordinates(state) {\n    if (isInitializedState(state)) {\n        var _a = state.coordinates, width = _a.width, height = _a.height, left = _a.left, top_1 = _a.top;\n        var coefficient = getCoefficient(state);\n        return {\n            width: width / coefficient,\n            height: height / coefficient,\n            left: (left - state.visibleArea.left) / coefficient,\n            top: (top_1 - state.visibleArea.top) / coefficient,\n        };\n    }\n    else {\n        return emptyCoordinates();\n    }\n}\nfunction getAspectRatio(state, settings) {\n    return createAspectRatio(isFunction(settings.aspectRatio) ? settings.aspectRatio(state, settings) : settings.aspectRatio);\n}\nfunction getDefaultCoordinates(state, settings) {\n    return isFunction(settings.defaultCoordinates)\n        ? settings.defaultCoordinates(state, settings)\n        : settings.defaultCoordinates;\n}\nfunction getDefaultVisibleArea(state, settings) {\n    return isFunction(settings.defaultVisibleArea)\n        ? settings.defaultVisibleArea(state, settings)\n        : settings.defaultVisibleArea;\n}\nfunction getDefaultTransforms(state, settings) {\n    var transforms = __assign(__assign({}, state.transforms), { flip: __assign({}, state.transforms.flip) });\n    if (settings.defaultTransforms) {\n        var defaultTransforms = isFunction(settings.defaultTransforms)\n            ? settings.defaultTransforms(state, settings)\n            : settings.defaultTransforms;\n        if (isNumber(defaultTransforms.rotate)) {\n            transforms.rotate = defaultTransforms.rotate;\n        }\n        if (defaultTransforms.flip) {\n            if (isBoolean(defaultTransforms.flip.horizontal)) {\n                transforms.flip.horizontal = defaultTransforms.flip.horizontal;\n            }\n            if (isBoolean(defaultTransforms.flip.vertical)) {\n                transforms.flip.vertical = defaultTransforms.flip.vertical;\n            }\n        }\n    }\n    return transforms;\n}\nfunction getTransformedImageSize(state) {\n    if (state.imageSize && state.imageSize.width && state.imageSize.height) {\n        return rotateSize(state.imageSize, state.transforms.rotate);\n    }\n    else {\n        return {\n            width: 0,\n            height: 0,\n        };\n    }\n}\nfunction getMinimumSize(state) {\n    // The magic number is the approximation of the handler size\n    // Temporary solution that should be improved in the future\n    return state.coordinates\n        ? Math.min(state.coordinates.width, state.coordinates.height, 20 * getCoefficient(state))\n        : 1;\n}\nfunction getRoundedCoordinates(state, settings) {\n    if (isInitializedState(state)) {\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        var positionRestrictions = getPositionRestrictions(state, settings);\n        var roundCoordinates = {\n            width: Math.round(state.coordinates.width),\n            height: Math.round(state.coordinates.height),\n            left: Math.round(state.coordinates.left),\n            top: Math.round(state.coordinates.top),\n        };\n        if (roundCoordinates.width > sizeRestrictions.maxWidth) {\n            roundCoordinates.width = Math.floor(state.coordinates.width);\n        }\n        else if (roundCoordinates.width < sizeRestrictions.minWidth) {\n            roundCoordinates.width = Math.ceil(state.coordinates.width);\n        }\n        if (roundCoordinates.height > sizeRestrictions.maxHeight) {\n            roundCoordinates.height = Math.floor(state.coordinates.height);\n        }\n        else if (roundCoordinates.height < sizeRestrictions.minHeight) {\n            roundCoordinates.height = Math.ceil(state.coordinates.height);\n        }\n        return moveToPositionRestrictions(roundCoordinates, positionRestrictions);\n    }\n    else {\n        return null;\n    }\n}\nfunction isConsistentState(state, settings) {\n    if (isInitializedState(state)) {\n        return (!getBrokenRatio(ratio(state.coordinates), getAspectRatio(state, settings)) &&\n            isConsistentSize(state.visibleArea, getAreaSizeRestrictions(state, settings)) &&\n            isConsistentSize(state.coordinates, getSizeRestrictions(state, settings)) &&\n            isConsistentPosition(state.visibleArea, getAreaPositionRestrictions(state, settings)) &&\n            isConsistentPosition(state.coordinates, getPositionRestrictions(state, settings)));\n    }\n    else {\n        return true;\n    }\n}\n\nexport { getAreaPositionRestrictions, getAreaSizeRestrictions, getAspectRatio, getCoefficient, getDefaultCoordinates, getDefaultTransforms, getDefaultVisibleArea, getMinimumSize, getPositionRestrictions, getRoundedCoordinates, getSizeRestrictions, getStencilCoordinates, getTransformedImageSize, isConsistentState, isInitializedState };\n", "import { __assign } from 'tslib';\nimport { isFunction, isNumeric, parseNumber } from '../utils/index.js';\nimport { ratio } from './utils.js';\nimport { getPositionRestrictions } from './helpers.js';\n\nfunction reconcileSizeRestrictions(sizeRestrictions) {\n    var restrictions = __assign({}, sizeRestrictions);\n    // Process the border cases when minimum height / width larger than maximum height / width\n    if (restrictions.minWidth > restrictions.maxWidth) {\n        restrictions.minWidth = restrictions.maxWidth;\n    }\n    if (restrictions.minHeight > restrictions.maxHeight) {\n        restrictions.minHeight = restrictions.maxHeight;\n    }\n    return restrictions;\n}\nfunction mergeSizeRestrictions(a, b) {\n    var first = a;\n    var second = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity }, b);\n    return reconcileSizeRestrictions({\n        maxHeight: Math.min(first.maxHeight, second.maxHeight),\n        minHeight: Math.max(first.minHeight, second.minHeight),\n        maxWidth: Math.min(first.maxWidth, second.maxWidth),\n        minWidth: Math.max(first.minWidth, second.minWidth),\n    });\n}\nfunction calculateSizeRestrictions(state, settings) {\n    var sizeRestrictions = isFunction(settings.sizeRestrictions)\n        ? settings.sizeRestrictions(state, settings)\n        : settings.sizeRestrictions;\n    var positionRestrictions = getPositionRestrictions(state, settings);\n    // User can forget to set some of restrictions, so we should initialize them by default values\n    var restrictions = {\n        minWidth: isNumeric(sizeRestrictions.minWidth) ? parseNumber(sizeRestrictions.minWidth) : 0,\n        minHeight: isNumeric(sizeRestrictions.minHeight) ? parseNumber(sizeRestrictions.minHeight) : 0,\n        maxWidth: isNumeric(sizeRestrictions.maxWidth) ? parseNumber(sizeRestrictions.maxWidth) : Infinity,\n        maxHeight: isNumeric(sizeRestrictions.maxHeight) ? parseNumber(sizeRestrictions.maxHeight) : Infinity,\n    };\n    // The situation, when stencil can't be positioned in cropper due to positionRestrictions should be avoided\n    if (positionRestrictions.left !== undefined && positionRestrictions.right !== undefined) {\n        restrictions.maxWidth = Math.min(restrictions.maxWidth, positionRestrictions.right - positionRestrictions.left);\n    }\n    if (positionRestrictions.bottom !== undefined && positionRestrictions.top !== undefined) {\n        restrictions.maxHeight = Math.min(restrictions.maxHeight, positionRestrictions.bottom - positionRestrictions.top);\n    }\n    return reconcileSizeRestrictions(restrictions);\n}\nfunction calculateAreaSizeRestrictions(state, settings) {\n    var sizeRestrictions = isFunction(settings.areaSizeRestrictions)\n        ? settings.areaSizeRestrictions(state, settings)\n        : settings.areaSizeRestrictions;\n    if (sizeRestrictions.maxWidth < Infinity && sizeRestrictions.maxHeight < Infinity) {\n        if (ratio(state.boundary) > sizeRestrictions.maxWidth / sizeRestrictions.maxHeight) {\n            sizeRestrictions.maxHeight = sizeRestrictions.maxWidth / ratio(state.boundary);\n        }\n        else {\n            sizeRestrictions.maxWidth = sizeRestrictions.maxHeight * ratio(state.boundary);\n        }\n    }\n    return reconcileSizeRestrictions(sizeRestrictions);\n}\n\nexport { calculateAreaSizeRestrictions, calculateSizeRestrictions, mergeSizeRestrictions, reconcileSizeRestrictions };\n", "import { deepClone } from '../utils/index.js';\n\nfunction copyState(state) {\n    return deepClone(state);\n}\n\nexport { copyState };\n", "var ImageRestriction;\n(function (ImageRestriction) {\n    ImageRestriction[\"fillArea\"] = \"fillArea\";\n    ImageRestriction[\"fitArea\"] = \"fitArea\";\n    ImageRestriction[\"stencil\"] = \"stencil\";\n    ImageRestriction[\"none\"] = \"none\";\n})(ImageRestriction || (ImageRestriction = {}));\nvar Priority;\n(function (Priority) {\n    Priority[\"coordinates\"] = \"coordinates\";\n    Priority[\"visibleArea\"] = \"visibleArea\";\n})(Priority || (Priority = {}));\n\nexport { ImageRestriction, Priority };\n", "import { getCloserSize, createAspectRatio, resizeToSizeRestrictions } from './utils.js';\n\n// Limitations:\n// 1. Assume that maximum width and height always larger than minimum width and height\n// 2. Assume that aspectRatio.minimum < aspectRatio.maximum\n// If you break this limitations function could return null!\nfunction approximateSize(params) {\n    var width = params.width, height = params.height;\n    var sizeRestrictions = params.sizeRestrictions || {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n    };\n    var aspectRatio = createAspectRatio(params.aspectRatio);\n    var coordinates = {\n        width: Math.max(sizeRestrictions.minWidth, Math.min(sizeRestrictions.maxWidth, width)),\n        height: Math.max(sizeRestrictions.minHeight, Math.min(sizeRestrictions.maxHeight, height)),\n    };\n    var candidates = [coordinates];\n    if (aspectRatio) {\n        [aspectRatio.minimum, aspectRatio.maximum].forEach(function (ratio) {\n            if (ratio) {\n                candidates.push({ width: coordinates.width, height: coordinates.width / ratio }, { width: coordinates.height * ratio, height: coordinates.height });\n            }\n        });\n    }\n    // Resize the candidates as much as possible to prevent breaking minimum size\n    candidates = candidates.map(function (candidate) { return resizeToSizeRestrictions(candidate, sizeRestrictions); });\n    // TODO: fix the type of return value\n    return getCloserSize(candidates, { width: width, height: height }, sizeRestrictions, aspectRatio);\n}\n\nexport { approximateSize };\n", "import { __assign } from 'tslib';\nimport { ratio, applyMove, diff, getCenter, moveToPositionRestrictions } from './utils.js';\nimport { getAreaSizeRestrictions, getAreaPositionRestrictions } from './helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from './approximateSize.js';\n\nfunction fitVisibleArea(state, settings) {\n    var result = copyState(state);\n    if (state.visibleArea) {\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\n            width: state.visibleArea.width,\n            height: state.visibleArea.height,\n            aspectRatio: {\n                minimum: ratio(result.boundary),\n                maximum: ratio(result.boundary),\n            },\n            sizeRestrictions: areaSizeRestrictions,\n        }));\n        // Return the visible area to previous center\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\n        // Fit the visible area to positions restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n    }\n    return result;\n}\n\nexport { fitVisibleArea };\n", "import 'tslib';\nimport { moveToPositionRestrictions, applyMove } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction moveCoordinatesAlgorithm(coordinates, directions, positionRestrictions) {\n    var movedCoordinates = applyMove(coordinates, directions);\n    return positionRestrictions ? moveToPositionRestrictions(movedCoordinates, positionRestrictions) : movedCoordinates;\n}\n\nexport { moveCoordinatesAlgorithm };\n", "import { __assign } from 'tslib';\nimport { emptyCoordinates, isUndefined } from '../utils/index.js';\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions, applyScale, maxScale, applyMove, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport { approximateSize } from '../service/approximateSize.js';\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\nimport { moveCoordinatesAlgorithm } from '../algorithms/moveCoordinatesAlgorithm.js';\n\nvar SetCoordinatesMode;\n(function (SetCoordinatesMode) {\n    SetCoordinatesMode[\"limit\"] = \"limit\";\n    SetCoordinatesMode[\"zoom\"] = \"zoom\";\n    SetCoordinatesMode[\"unsafe\"] = \"unsafe\";\n})(SetCoordinatesMode || (SetCoordinatesMode = {}));\nfunction setCoordinates(state, settings, transform, \n// If you set mode to `false`, the coordinates can leave the visible area\nmode) {\n    if (mode === void 0) { mode = true; }\n    var currentMode = mode === false ? SetCoordinatesMode.unsafe : mode === true ? SetCoordinatesMode.zoom : mode;\n    var aspectRatio = getAspectRatio(state, settings);\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\n        sizeRestrictions = __assign(__assign({}, sizeRestrictions), { minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth), minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight), maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth), maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight) });\n    }\n    var positionRestrictions = getPositionRestrictions(state, settings);\n    if (state.visibleArea && currentMode === SetCoordinatesMode.limit) {\n        positionRestrictions = mergePositionRestrictions(positionRestrictions, coordinatesToPositionRestrictions(state.visibleArea));\n    }\n    var move = function (prevCoordinates, newCoordinates) {\n        return moveCoordinatesAlgorithm(prevCoordinates, {\n            left: newCoordinates.left - (prevCoordinates.left || 0),\n            top: newCoordinates.top - (prevCoordinates.top || 0),\n        }, positionRestrictions);\n    };\n    var resize = function (prevCoordinates, newCoordinates) {\n        var coordinates = __assign(__assign(__assign({}, prevCoordinates), approximateSize({\n            width: newCoordinates.width,\n            height: newCoordinates.height,\n            sizeRestrictions: sizeRestrictions,\n            aspectRatio: aspectRatio,\n        })), { left: 0, top: 0 });\n        return move(coordinates, {\n            left: prevCoordinates.left || 0,\n            top: prevCoordinates.top || 0,\n        });\n    };\n    var coordinates = state.coordinates ? __assign({}, state.coordinates) : emptyCoordinates();\n    var transforms = Array.isArray(transform) ? transform : [transform];\n    transforms.forEach(function (transform) {\n        var changes;\n        if (typeof transform === 'function') {\n            changes = transform(__assign(__assign({}, state), { coordinates: coordinates }), settings);\n        }\n        else {\n            changes = transform;\n        }\n        if (changes) {\n            if (!isUndefined(changes.width) || !isUndefined(changes.height)) {\n                coordinates = resize(coordinates, __assign(__assign({}, coordinates), changes));\n            }\n            if (!isUndefined(changes.left) || !isUndefined(changes.top)) {\n                coordinates = move(coordinates, __assign(__assign({}, coordinates), changes));\n            }\n        }\n    });\n    var result = __assign(__assign({}, copyState(state)), { coordinates: coordinates });\n    if (result.visibleArea && currentMode === SetCoordinatesMode.zoom) {\n        var widthIntersections = Math.max(0, result.coordinates.width - result.visibleArea.width);\n        var heightIntersections = Math.max(0, result.coordinates.height - result.visibleArea.height);\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        var scale = widthIntersections > heightIntersections\n            ? result.coordinates.width / result.visibleArea.width\n            : result.coordinates.height / result.visibleArea.height;\n        if (scale > 1) {\n            result.visibleArea = applyScale(result.visibleArea, Math.min(scale, maxScale(result.visibleArea, areaSizeRestrictions)));\n        }\n        result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\n        return fitVisibleArea(result, settings);\n    }\n    else {\n        return result;\n    }\n}\n\nexport { SetCoordinatesMode, setCoordinates };\n", "import { __assign } from 'tslib';\nimport { applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from './utils.js';\nimport { getAspectRatio, getSizeRestrictions, getPositionRestrictions } from './helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from './approximateSize.js';\n\nfunction fitCoordinates(state, settings) {\n    if (state.coordinates) {\n        var result = copyState(state);\n        var aspectRatio = getAspectRatio(state, settings);\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        // Fit the size of coordinates to existing size restrictions and visible area\n        result.coordinates = __assign(__assign({}, state.coordinates), approximateSize({\n            width: state.coordinates.width,\n            height: state.coordinates.height,\n            aspectRatio: aspectRatio,\n            sizeRestrictions: state.visibleArea\n                ? {\n                    maxWidth: Math.min(state.visibleArea.width, sizeRestrictions.maxWidth),\n                    maxHeight: Math.min(state.visibleArea.height, sizeRestrictions.maxHeight),\n                    minHeight: Math.min(state.visibleArea.height, sizeRestrictions.minHeight),\n                    minWidth: Math.min(state.visibleArea.width, sizeRestrictions.minWidth),\n                }\n                : sizeRestrictions,\n        }));\n        // Return the coordinates to the previous center\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\n        // Fit the coordinates to position restrictions and visible area\n        result.coordinates = moveToPositionRestrictions(result.coordinates, state.visibleArea\n            ? mergePositionRestrictions(coordinatesToPositionRestrictions(state.visibleArea), getPositionRestrictions(result, settings))\n            : getPositionRestrictions(result, settings));\n        return result;\n    }\n    return state;\n}\n\nexport { fitCoordinates };\n", "import { __assign } from 'tslib';\nimport { copyState } from './copyState.js';\nimport { fitCoordinates } from '../service/fitCoordinates.js';\nimport { fitVisibleArea } from '../service/fitVisibleArea.js';\n\nfunction setVisibleArea(state, settings, visibleArea, \n// If you set safe to `false`, the coordinates will be able to leave the visible area\nsafe) {\n    if (safe === void 0) { safe = true; }\n    var result = __assign(__assign({}, copyState(state)), { visibleArea: visibleArea });\n    // There is no possibility to break visible area limitations.\n    result = fitVisibleArea(result, settings);\n    if (safe) {\n        result = fitCoordinates(result, settings);\n    }\n    return result;\n}\n\nexport { setVisibleArea };\n", "import 'tslib';\nimport { getDefaultTransforms, getDefaultVisibleArea, getDefaultCoordinates } from '../service/helpers.js';\nimport { Priority } from '../types/index.js';\nimport { setCoordinates, SetCoordinatesMode } from './setCoordinates.js';\nimport { setVisibleArea } from './setVisibleArea.js';\n\nfunction createState(options, settings) {\n    var _a, _b, _c, _d, _e;\n    var boundary = options.boundary, image = options.image;\n    var state = {\n        boundary: {\n            width: boundary.width,\n            height: boundary.height,\n        },\n        imageSize: {\n            width: image.width,\n            height: image.height,\n        },\n        transforms: {\n            rotate: ((_a = image.transforms) === null || _a === void 0 ? void 0 : _a.rotate) || 0,\n            flip: {\n                horizontal: ((_c = (_b = image.transforms) === null || _b === void 0 ? void 0 : _b.flip) === null || _c === void 0 ? void 0 : _c.horizontal) || false,\n                vertical: ((_e = (_d = image.transforms) === null || _d === void 0 ? void 0 : _d.flip) === null || _e === void 0 ? void 0 : _e.vertical) || false,\n            },\n        },\n        visibleArea: null,\n        coordinates: null,\n    };\n    if (settings.defaultTransforms) {\n        state.transforms = getDefaultTransforms(state, settings);\n    }\n    if (settings.priority === Priority.visibleArea) {\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), false);\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.limit);\n    }\n    else {\n        state = setCoordinates(state, settings, getDefaultCoordinates(state, settings), SetCoordinatesMode.unsafe);\n        state = setVisibleArea(state, settings, getDefaultVisibleArea(state, settings), true);\n    }\n    return state;\n}\n\nexport { createState };\n", "import 'tslib';\nimport { applyMove, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\n\nfunction moveCoordinates(state, settings, directions) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        result.coordinates = applyMove(result.coordinates, directions);\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\n\nexport { moveCoordinates };\n", "import { __assign } from 'tslib';\nimport { ALL_DIRECTIONS, HORIZONTAL_DIRECTIONS, VERTICAL_DIRECTIONS } from '../constants/index.js';\nimport { isGreater, isRoughlyEqual } from '../utils/index.js';\nimport { moveToPositionRestrictions, applyDirections, getIntersections, getOppositeSide, ratio, getBrokenRatio, applyMove, diff } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { moveCoordinatesAlgorithm } from './moveCoordinatesAlgorithm.js';\n\nfunction fitDirections(_a) {\n    var coordinates = _a.coordinates, directions = _a.directions, positionRestrictions = _a.positionRestrictions, sizeRestrictions = _a.sizeRestrictions, preserveRatio = _a.preserveRatio, allowedDirections = _a.allowedDirections, _b = _a.compensate, compensate = _b === void 0 ? true : _b;\n    var fittedDirections = __assign({}, directions);\n    var currentWidth = applyDirections(coordinates, fittedDirections).width;\n    var currentHeight = applyDirections(coordinates, fittedDirections).height;\n    // Prevent strange resizes when the width or height of stencil becomes smaller than 0\n    if (currentWidth < 0) {\n        if (fittedDirections.left < 0 && fittedDirections.right < 0) {\n            fittedDirections.left =\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.left / fittedDirections.right);\n            fittedDirections.right =\n                -(coordinates.width - sizeRestrictions.minWidth) / (fittedDirections.right / fittedDirections.left);\n        }\n        else if (fittedDirections.left < 0) {\n            fittedDirections.left = -(coordinates.width - sizeRestrictions.minWidth);\n        }\n        else if (fittedDirections.right < 0) {\n            fittedDirections.right = -(coordinates.width - sizeRestrictions.minWidth);\n        }\n    }\n    if (currentHeight < 0) {\n        if (fittedDirections.top < 0 && fittedDirections.bottom < 0) {\n            fittedDirections.top =\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.top / fittedDirections.bottom);\n            fittedDirections.bottom =\n                -(coordinates.height - sizeRestrictions.minHeight) / (fittedDirections.bottom / fittedDirections.top);\n        }\n        else if (fittedDirections.top < 0) {\n            fittedDirections.top = -(coordinates.height - sizeRestrictions.minHeight);\n        }\n        else if (fittedDirections.bottom < 0) {\n            fittedDirections.bottom = -(coordinates.height - sizeRestrictions.minHeight);\n        }\n    }\n    // Prevent breaking limits\n    var breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\n    var canBeCompensated = ALL_DIRECTIONS.every(function (direction) {\n        return !isGreater(breaks[getOppositeSide(direction)], 0) || allowedDirections[direction];\n    });\n    if (compensate && canBeCompensated) {\n        if (breaks.left && breaks.left > 0 && breaks.right === 0) {\n            fittedDirections.right += breaks.left;\n            fittedDirections.left -= breaks.left;\n        }\n        else if (breaks.right && breaks.right > 0 && breaks.left === 0) {\n            fittedDirections.left += breaks.right;\n            fittedDirections.right -= breaks.right;\n        }\n        if (breaks.top && breaks.top > 0 && breaks.bottom === 0) {\n            fittedDirections.bottom += breaks.top;\n            fittedDirections.top -= breaks.top;\n        }\n        else if (breaks.bottom && breaks.bottom > 0 && breaks.top === 0) {\n            fittedDirections.top += breaks.bottom;\n            fittedDirections.bottom -= breaks.bottom;\n        }\n        breaks = getIntersections(applyDirections(coordinates, fittedDirections), positionRestrictions);\n    }\n    var maxResize = {\n        width: Infinity,\n        height: Infinity,\n        left: Infinity,\n        right: Infinity,\n        top: Infinity,\n        bottom: Infinity,\n    };\n    ALL_DIRECTIONS.forEach(function (direction) {\n        var intersection = breaks[direction];\n        if (intersection && fittedDirections[direction]) {\n            maxResize[direction] = Math.max(0, 1 - intersection / fittedDirections[direction]);\n        }\n    });\n    if (preserveRatio) {\n        var multiplier_1 = Math.min.apply(Math, ALL_DIRECTIONS.map(function (direction) { return maxResize[direction]; }));\n        if (multiplier_1 !== Infinity) {\n            ALL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= multiplier_1;\n            });\n        }\n    }\n    else {\n        ALL_DIRECTIONS.forEach(function (direction) {\n            if (maxResize[direction] !== Infinity) {\n                fittedDirections[direction] *= maxResize[direction];\n            }\n        });\n    }\n    currentWidth = applyDirections(coordinates, fittedDirections).width;\n    currentHeight = applyDirections(coordinates, fittedDirections).height;\n    if (fittedDirections.right + fittedDirections.left) {\n        if (currentWidth > sizeRestrictions.maxWidth) {\n            maxResize.width =\n                (sizeRestrictions.maxWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\n        }\n        else if (currentWidth < sizeRestrictions.minWidth) {\n            maxResize.width =\n                (sizeRestrictions.minWidth - coordinates.width) / (fittedDirections.right + fittedDirections.left);\n        }\n    }\n    if (fittedDirections.bottom + fittedDirections.top) {\n        if (currentHeight > sizeRestrictions.maxHeight) {\n            maxResize.height =\n                (sizeRestrictions.maxHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\n        }\n        else if (currentHeight < sizeRestrictions.minHeight) {\n            maxResize.height =\n                (sizeRestrictions.minHeight - coordinates.height) / (fittedDirections.bottom + fittedDirections.top);\n        }\n    }\n    if (preserveRatio) {\n        var multiplier_2 = Math.min(maxResize.width, maxResize.height);\n        if (multiplier_2 !== Infinity) {\n            ALL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= multiplier_2;\n            });\n        }\n    }\n    else {\n        if (maxResize.width !== Infinity) {\n            HORIZONTAL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= maxResize.width;\n            });\n        }\n        if (maxResize.height !== Infinity) {\n            VERTICAL_DIRECTIONS.forEach(function (direction) {\n                fittedDirections[direction] *= maxResize.height;\n            });\n        }\n    }\n    return fittedDirections;\n}\nfunction distributeOverlap(overlap, first, second) {\n    if (isRoughlyEqual(first + second, 0)) {\n        return overlap / 2;\n    }\n    else if (isRoughlyEqual(first, 0)) {\n        return 0;\n    }\n    else if (isRoughlyEqual(second, 0)) {\n        return overlap;\n    }\n    else {\n        return overlap * Math.abs(first / (first + second));\n    }\n}\nfunction resizeCoordinatesAlgorithm(coordinates, directions, options, limitations) {\n    var aspectRatio = limitations.aspectRatio, positionRestrictions = limitations.positionRestrictions, sizeRestrictions = limitations.sizeRestrictions;\n    var actualCoordinates = __assign({}, coordinates);\n    directions = __assign({}, directions);\n    var allowedDirections = options.allowedDirections || {\n        left: true,\n        right: true,\n        bottom: true,\n        top: true,\n    };\n    // It's possible that coordinates can be smaller than minimum width or minimum height. In this case\n    // corresponding resize should be blocked\n    if (coordinates.width < sizeRestrictions.minWidth) {\n        directions.left = 0;\n        directions.right = 0;\n    }\n    if (coordinates.height < sizeRestrictions.minHeight) {\n        directions.top = 0;\n        directions.bottom = 0;\n    }\n    ALL_DIRECTIONS.forEach(function (direction) {\n        if (!allowedDirections[direction]) {\n            directions[direction] = 0;\n        }\n    });\n    // 1. First step: determine the safe and desired area\n    directions = fitDirections({\n        coordinates: actualCoordinates,\n        directions: directions,\n        sizeRestrictions: sizeRestrictions,\n        positionRestrictions: positionRestrictions,\n        allowedDirections: allowedDirections,\n    });\n    // 2. Second step: fix desired box to correspondent to aspect ratio\n    var currentWidth = applyDirections(actualCoordinates, directions).width;\n    var currentHeight = applyDirections(actualCoordinates, directions).height;\n    // Checks ratio:\n    var ratioBroken = options.preserveAspectRatio\n        ? ratio(actualCoordinates)\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\n    if (ratioBroken) {\n        var respectDirection = options.respectDirection;\n        if (respectDirection !== 'width' && respectDirection !== 'height') {\n            if (actualCoordinates.width >= actualCoordinates.height || ratioBroken === 1) {\n                respectDirection = 'width';\n            }\n            else {\n                respectDirection = 'height';\n            }\n        }\n        if (respectDirection === 'width') {\n            var overlapHeight = currentWidth / ratioBroken - actualCoordinates.height;\n            if (allowedDirections.top && allowedDirections.bottom) {\n                var top_1 = directions.top, bottom = directions.bottom;\n                directions.bottom = distributeOverlap(overlapHeight, bottom, top_1);\n                directions.top = distributeOverlap(overlapHeight, top_1, bottom);\n            }\n            else if (allowedDirections.bottom) {\n                directions.bottom = overlapHeight;\n            }\n            else if (allowedDirections.top) {\n                directions.top = overlapHeight;\n            }\n            else if (allowedDirections.right) {\n                directions.right = 0;\n            }\n            else if (allowedDirections.left) {\n                directions.left = 0;\n            }\n        }\n        else if (respectDirection === 'height') {\n            var overlapWidth = actualCoordinates.width - currentHeight * ratioBroken;\n            if (allowedDirections.left && allowedDirections.right) {\n                var left = directions.left, right = directions.right;\n                directions.left = -distributeOverlap(overlapWidth, left, right);\n                directions.right = -distributeOverlap(overlapWidth, right, left);\n            }\n            else if (allowedDirections.left) {\n                directions.left = -overlapWidth;\n            }\n            else if (allowedDirections.right) {\n                directions.right = -overlapWidth;\n            }\n            else if (allowedDirections.top) {\n                directions.top = 0;\n            }\n            else if (allowedDirections.bottom) {\n                directions.bottom = 0;\n            }\n        }\n        // 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\n        directions = fitDirections({\n            directions: directions,\n            coordinates: actualCoordinates,\n            sizeRestrictions: sizeRestrictions,\n            positionRestrictions: positionRestrictions,\n            preserveRatio: true,\n            compensate: options.compensate,\n            allowedDirections: allowedDirections,\n        });\n    }\n    // 4. Check if ratio broken (temporary):\n    currentWidth = applyDirections(actualCoordinates, directions).width;\n    currentHeight = applyDirections(actualCoordinates, directions).height;\n    ratioBroken = options.preserveAspectRatio\n        ? ratio(actualCoordinates)\n        : getBrokenRatio(currentWidth / currentHeight, aspectRatio);\n    if (ratioBroken && isGreater(Math.abs(ratioBroken - currentWidth / currentHeight), 0)) {\n        ALL_DIRECTIONS.forEach(function (direction) {\n            directions[direction] = 0;\n        });\n    }\n    return moveCoordinatesAlgorithm({\n        width: coordinates.width + directions.right + directions.left,\n        height: coordinates.height + directions.top + directions.bottom,\n        left: coordinates.left,\n        top: coordinates.top,\n    }, {\n        left: -directions.left,\n        top: -directions.top,\n    }, positionRestrictions);\n}\nfunction anchorToMassPoint(coordinates, anchor) {\n    var plainAnchor = anchor.toLowerCase();\n    return {\n        left: coordinates.left +\n            coordinates.width * (plainAnchor.indexOf('west') !== -1 ? 1 : plainAnchor.indexOf('east') !== -1 ? 0 : 0.5),\n        top: coordinates.top +\n            coordinates.height *\n                (plainAnchor.indexOf('north') !== -1 ? 1 : plainAnchor.indexOf('south') !== -1 ? 0 : 0.5),\n    };\n}\nfunction anchorToAllowedDirections(anchor) {\n    var plainAnchor = anchor.toLowerCase();\n    return {\n        left: plainAnchor.indexOf('east') === -1,\n        top: plainAnchor.indexOf('south') === -1,\n        right: plainAnchor.indexOf('west') === -1,\n        bottom: plainAnchor.indexOf('north') === -1,\n    };\n}\nfunction anchorMoveToResizeDirections(anchor, directions) {\n    var plainAnchor = anchor.toLowerCase();\n    var normalizedDirections = {\n        left: plainAnchor.indexOf('west') === -1 ? directions.left : -directions.left,\n        top:  -directions.top,\n        right: directions.left,\n        bottom: directions.top,\n    };\n    if (['north', 'south', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\n        normalizedDirections.top = 0;\n        normalizedDirections.bottom = 0;\n    }\n    if (['west', 'east', 'center'].every(function (el) { return plainAnchor.indexOf(el) === -1; })) {\n        normalizedDirections.left = 0;\n        normalizedDirections.right = 0;\n    }\n    var allowedDirections = anchorToAllowedDirections(anchor);\n    ALL_DIRECTIONS.forEach(function (direction) {\n        if (!allowedDirections[direction]) {\n            normalizedDirections[direction] = 0;\n        }\n    });\n    return normalizedDirections;\n}\nfunction anchoredResizeCoordinatesAlgorithm(coordinates, anchor, directions, options, limitations) {\n    var reference = options.reference;\n    var resizeDirections = anchorMoveToResizeDirections(anchor, directions);\n    var allowedDirections = anchorToAllowedDirections(anchor);\n    var result = resizeCoordinatesAlgorithm(coordinates, resizeDirections, __assign(__assign({}, options), { allowedDirections: allowedDirections }), limitations);\n    if (reference) {\n        // Move the result to anchor\n        result = applyMove(result, diff(anchorToMassPoint(reference, anchor), anchorToMassPoint(result, anchor)));\n    }\n    return moveToPositionRestrictions(result, limitations.positionRestrictions);\n}\n\nexport { anchorMoveToResizeDirections, anchorToAllowedDirections, anchoredResizeCoordinatesAlgorithm, fitDirections, resizeCoordinatesAlgorithm };\n", "import { __assign } from 'tslib';\nimport { mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { getMinimumSize, getSizeRestrictions, isInitializedState, getPositionRestrictions, getAspectRatio } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { anchoredResizeCoordinatesAlgorithm } from '../algorithms/resizeCoordinatesAlgorithm.js';\n\nfunction resizeCoordinates(state, settings, anchor, directions, options) {\n    var minimumSize = getMinimumSize(state);\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    return isInitializedState(state)\n        ? __assign(__assign({}, copyState(state)), { coordinates: anchoredResizeCoordinatesAlgorithm(state.coordinates, anchor, directions, options, {\n                positionRestrictions: mergePositionRestrictions(getPositionRestrictions(state, settings), coordinatesToPositionRestrictions(state.visibleArea)),\n                sizeRestrictions: {\n                    maxWidth: Math.min(sizeRestrictions.maxWidth, state.visibleArea.width),\n                    maxHeight: Math.min(sizeRestrictions.maxHeight, state.visibleArea.height),\n                    minWidth: Math.max(Math.min(sizeRestrictions.minWidth, state.visibleArea.width), minimumSize),\n                    minHeight: Math.max(Math.min(sizeRestrictions.minHeight, state.visibleArea.height), minimumSize),\n                },\n                aspectRatio: getAspectRatio(state, settings),\n            }) }) : state;\n}\n\nexport { resizeCoordinates };\n", "import { __assign } from 'tslib';\nimport { ratio, applyScale, resizeToSizeRestrictions, inverseMove, fitToPositionRestrictions, coordinatesToPositionRestrictions, applyMove, moveToPositionRestrictions } from '../service/utils.js';\nimport { getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { fitCoordinates } from '../service/fitCoordinates.js';\n\nfunction setBoundary(state, settings, boundary) {\n    var result = __assign(__assign({}, copyState(state)), { boundary: boundary });\n    if (result.visibleArea && result.coordinates && state.visibleArea) {\n        // Scale visible area size to fit new boundary:\n        result.visibleArea.height = result.visibleArea.width / ratio(boundary);\n        result.visibleArea.top += (state.visibleArea.height - result.visibleArea.height) / 2;\n        // Scale visible area to prevent overlap coordinates (and its minimum size)\n        var sizeRestrictions = getSizeRestrictions(result, settings);\n        if (Math.max(sizeRestrictions.minHeight, result.coordinates.height) - result.visibleArea.height > 0 ||\n            Math.max(sizeRestrictions.minWidth, result.coordinates.width) - result.visibleArea.width > 0) {\n            result.visibleArea = applyScale(result.visibleArea, Math.max(Math.max(sizeRestrictions.minHeight, result.coordinates.height) / result.visibleArea.height, Math.max(sizeRestrictions.minWidth, result.coordinates.width) / result.visibleArea.width));\n        }\n        // Scale visible area to prevent overlap area restrictions\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n        // Move visible are to prevent moving of the coordinates:\n        var move = inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea)));\n        if (result.visibleArea.width < result.coordinates.width) {\n            move.left = 0;\n        }\n        if (result.visibleArea.height < result.coordinates.height) {\n            move.top = 0;\n        }\n        result.visibleArea = applyMove(result.visibleArea, move);\n        // Move visible area to prevent overlap the area restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        result = fitCoordinates(result, settings);\n    }\n    return result;\n}\n\nexport { setBoundary };\n", "import { __assign } from 'tslib';\nimport { isNumber } from '../utils/index.js';\nimport { rotatePoint, getCenter, diff, resizeToSizeRestrictions, moveToPositionRestrictions, applyMove } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport { isInitializedState, getTransformedImageSize, getSizeRestrictions, getAspectRatio, getAreaSizeRestrictions, getPositionRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction rotateImageAlgorithm(state, settings, rotate) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var angle = isNumber(rotate) ? rotate : rotate.angle;\n        var imageCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, getTransformedImageSize(state))), angle);\n        result.transforms.rotate += angle;\n        result.coordinates = __assign(__assign({}, approximateSize({\n            sizeRestrictions: getSizeRestrictions(result, settings),\n            aspectRatio: getAspectRatio(result, settings),\n            width: result.coordinates.width,\n            height: result.coordinates.height,\n        })), rotatePoint(getCenter(result.coordinates), angle));\n        var center = !isNumber(rotate) && rotate.center ? rotate.center : getCenter(state.coordinates);\n        var shift = diff(getCenter(state.coordinates), rotatePoint(getCenter(state.coordinates), angle, center));\n        var imageSize = getTransformedImageSize(result);\n        result.coordinates.left -= imageCenter.left - imageSize.width / 2 + result.coordinates.width / 2 - shift.left;\n        result.coordinates.top -= imageCenter.top - imageSize.height / 2 + result.coordinates.height / 2 - shift.top;\n        // Check that visible area doesn't break the area restrictions:\n        result.visibleArea = resizeToSizeRestrictions(result.visibleArea, mergeSizeRestrictions(getAreaSizeRestrictions(result, settings), {\n            minWidth: result.coordinates.width,\n            minHeight: result.coordinates.height,\n        }));\n        result.coordinates = moveToPositionRestrictions(result.coordinates, getPositionRestrictions(result, settings));\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(state.coordinates)));\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        return result;\n    }\n    return state;\n}\n\nexport { rotateImageAlgorithm };\n", "import 'tslib';\nimport { rotatePoint, getCenter, applyMove, diff, moveToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getTransformedImageSize, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction flipImageAlgorithm(state, settings, horizontal, vertical) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var rotate = state.transforms.rotate;\n        var imageSize = getTransformedImageSize(state);\n        var changed = {\n            horizontal: horizontal,\n            vertical: vertical,\n        };\n        if (changed.horizontal || changed.vertical) {\n            var imageCenter = rotatePoint({\n                left: imageSize.width / 2,\n                top: imageSize.height / 2,\n            }, -rotate);\n            var oldCenter = rotatePoint(getCenter(result.coordinates), -rotate);\n            var newCenter = rotatePoint({\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\n            }, rotate);\n            result.coordinates = applyMove(result.coordinates, diff(newCenter, getCenter(result.coordinates)));\n            oldCenter = rotatePoint(getCenter(result.visibleArea), -rotate);\n            newCenter = rotatePoint({\n                left: changed.horizontal ? imageCenter.left - (oldCenter.left - imageCenter.left) : oldCenter.left,\n                top: changed.vertical ? imageCenter.top - (oldCenter.top - imageCenter.top) : oldCenter.top,\n            }, rotate);\n            result.visibleArea = applyMove(result.visibleArea, diff(newCenter, getCenter(result.visibleArea)));\n            result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        }\n        if (changed.horizontal) {\n            result.transforms.flip.horizontal = !state.transforms.flip.horizontal;\n        }\n        if (changed.vertical) {\n            result.transforms.flip.vertical = !state.transforms.flip.vertical;\n        }\n        return result;\n    }\n    return state;\n}\n\nexport { flipImageAlgorithm };\n", "import 'tslib';\nimport { isNumber, isRoughlyEqual } from '../utils/index.js';\nimport { applyMove, maxScale, positionToSizeRestrictions, minScale, applyScale, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions, getCenter, inverseMove, fitToPositionRestrictions } from '../service/utils.js';\nimport { isInitializedState, getSizeRestrictions, getPositionRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction transformImageAlgorithm(state, settings, transform) {\n    var _a;\n    var _b = transform.scale, scale = _b === void 0 ? 1 : _b, _c = transform.move, move = _c === void 0 ? {} : _c;\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        // It's reversed because zooming in the image is actually zooming out visible area\n        var scaleFactor = 1 / (isNumber(scale) ? scale : scale.factor);\n        var scaleCenter = !isNumber(scale) ? scale.center : undefined;\n        var isAllowedScale = !isRoughlyEqual(scaleFactor, 1);\n        var areaScale = 1;\n        var stencilScale = 1;\n        result.visibleArea = applyMove(result.visibleArea, {\n            left: move.left || 0,\n            top: move.top || 0,\n        });\n        var sizeRestrictions = getSizeRestrictions(result, settings);\n        var positionRestrictions = getPositionRestrictions(result, settings);\n        var areaSizeRestrictions = getAreaSizeRestrictions(result, settings);\n        var scaleRestrictions = {\n            stencil: {\n                minimum: Math.max(sizeRestrictions.minWidth ? sizeRestrictions.minWidth / result.coordinates.width : 0, sizeRestrictions.minHeight ? sizeRestrictions.minHeight / result.coordinates.height : 0),\n                maximum: Math.min(sizeRestrictions.maxWidth ? sizeRestrictions.maxWidth / result.coordinates.width : Infinity, sizeRestrictions.maxHeight ? sizeRestrictions.maxHeight / result.coordinates.height : Infinity, maxScale(result.coordinates, positionToSizeRestrictions(positionRestrictions))),\n            },\n            area: {\n                maximum: maxScale(result.visibleArea, areaSizeRestrictions),\n                minimum: minScale(result.visibleArea, areaSizeRestrictions),\n            },\n        };\n        // If there is scaling then begin scale\n        if (scaleFactor && isAllowedScale) {\n            // Determine scale factor\n            if (scaleFactor < 1) {\n                stencilScale = Math.max(scaleFactor, Math.max(scaleRestrictions.area.minimum, scaleRestrictions.stencil.minimum));\n                if (stencilScale > 1) {\n                    stencilScale = 1;\n                }\n            }\n            else if (scaleFactor > 1) {\n                stencilScale = Math.min(scaleFactor, Math.min(scaleRestrictions.area.maximum, scaleRestrictions.stencil.maximum));\n                if (stencilScale < 1) {\n                    stencilScale = 1;\n                }\n            }\n        }\n        if (stencilScale) {\n            // Resize stencil with area as much as possible\n            result.visibleArea = applyScale(result.visibleArea, stencilScale, scaleCenter);\n        }\n        var relativeCoordinates = {\n            left: state.coordinates.left - state.visibleArea.left,\n            right: state.visibleArea.width + state.visibleArea.left - (state.coordinates.width + state.coordinates.left),\n            top: state.coordinates.top - state.visibleArea.top,\n            bottom: state.visibleArea.height + state.visibleArea.top - (state.coordinates.height + state.coordinates.top),\n        };\n        // Move the area to fit to the coordinates limits:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, {\n            left: positionRestrictions.left !== undefined\n                ? positionRestrictions.left - relativeCoordinates.left * stencilScale\n                : undefined,\n            top: positionRestrictions.top !== undefined\n                ? positionRestrictions.top - relativeCoordinates.top * stencilScale\n                : undefined,\n            bottom: positionRestrictions.bottom !== undefined\n                ? positionRestrictions.bottom + relativeCoordinates.bottom * stencilScale\n                : undefined,\n            right: positionRestrictions.right !== undefined\n                ? positionRestrictions.right + relativeCoordinates.right * stencilScale\n                : undefined,\n        });\n        // But the more important to fit are to the area restrictions, so we should fit it to that restrictions:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        // Set the same coordinates of stencil inside visible area\n        result.coordinates.width = result.coordinates.width * stencilScale;\n        result.coordinates.height = result.coordinates.height * stencilScale;\n        result.coordinates.left = result.visibleArea.left + relativeCoordinates.left * stencilScale;\n        result.coordinates.top = result.visibleArea.top + relativeCoordinates.top * stencilScale;\n        // Move the coordinates to prevent the intersection with visible area and position restrictions\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), positionRestrictions));\n        // Resize only area if stencil can't be resized and stencil resize is disabled\n        if (isAllowedScale && scaleFactor && ((_a = settings.transformImage) === null || _a === void 0 ? void 0 : _a.adjustStencil)) {\n            if (scaleFactor > 1) {\n                areaScale = Math.min(scaleRestrictions.area.maximum, scaleFactor) / stencilScale;\n            }\n            else if (scaleFactor < 1) {\n                areaScale = Math.max(result.coordinates.height / result.visibleArea.height, result.coordinates.width / result.visibleArea.width, scaleFactor / stencilScale);\n            }\n            if (areaScale !== 1) {\n                result.visibleArea = applyScale(result.visibleArea, areaScale, scaleFactor > 1 ? scaleCenter : getCenter(result.coordinates));\n                // Move to prevent the breaking of the area restrictions:\n                result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n                // Move to prevent the intersection with coordinates:\n                result.visibleArea = applyMove(result.visibleArea, inverseMove(fitToPositionRestrictions(result.coordinates, coordinatesToPositionRestrictions(result.visibleArea))));\n            }\n        }\n        return result;\n    }\n    return state;\n}\n\nexport { transformImageAlgorithm };\n", "import 'tslib';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { rotateImageAlgorithm } from '../algorithms/rotateImageAlgorithm.js';\nimport { flipImageAlgorithm } from '../algorithms/flipImageAlgorithm.js';\nimport { transformImageAlgorithm } from '../algorithms/transformImageAlgorithm.js';\n\nfunction transformImage(state, settings, transform) {\n    if (transform.rotate) {\n        state = rotateImageAlgorithm(state, settings, transform.rotate);\n    }\n    if (transform.flip) {\n        state = flipImageAlgorithm(state, settings, transform.flip.horizontal, transform.flip.vertical);\n    }\n    if (transform.move || transform.scale) {\n        state = transformImageAlgorithm(state, settings, transform);\n    }\n    return state;\n}\n\nexport { transformImage };\n", "import { __assign } from 'tslib';\nimport { getBrokenRatio, ratio, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport { isInitializedState, getAspectRatio, getSizeRestrictions, getAreaSizeRestrictions, getAreaPositionRestrictions, getPositionRestrictions } from '../service/helpers.js';\nimport { copyState } from './copyState.js';\nimport '../types/index.js';\nimport './setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction reconcileState(state, settings) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var aspectRatio = getAspectRatio(state, settings);\n        var sizeRestrictions = getSizeRestrictions(state, settings);\n        var areaSizeRestrictions = getAreaSizeRestrictions(state, settings);\n        // Fit the size of coordinates to existing size restrictions and visible area\n        var brokenRatio = getBrokenRatio(ratio(state.coordinates), aspectRatio);\n        var desiredSize = brokenRatio\n            ? {\n                height: state.coordinates.height,\n                width: state.coordinates.height * brokenRatio,\n            }\n            : state.coordinates;\n        result.coordinates = __assign(__assign({}, result.coordinates), approximateSize({\n            width: desiredSize.width,\n            height: desiredSize.height,\n            aspectRatio: aspectRatio,\n            sizeRestrictions: mergeSizeRestrictions(areaSizeRestrictions, sizeRestrictions),\n        }));\n        // Return the coordinates to the previous center\n        result.coordinates = applyMove(result.coordinates, diff(getCenter(state.coordinates), getCenter(result.coordinates)));\n        var scaleModifier = Math.max(result.coordinates.width / result.visibleArea.width, result.coordinates.height / result.visibleArea.height, 1);\n        // Fit the visible area to its size restrictions and boundary aspect ratio:\n        result.visibleArea = __assign(__assign({}, state.visibleArea), approximateSize({\n            width: state.visibleArea.width * scaleModifier,\n            height: state.visibleArea.height * scaleModifier,\n            aspectRatio: {\n                minimum: ratio(result.boundary),\n                maximum: ratio(result.boundary),\n            },\n            sizeRestrictions: areaSizeRestrictions,\n        }));\n        // Return the visible area to previous center\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(state.visibleArea), getCenter(result.visibleArea)));\n        // Fit the visible area to positions restrictions\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        // Fit the coordinates to position restrictions and visible area\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\n\nexport { reconcileState };\n", "import { isNumber } from '../utils/index.js';\nimport { getCoefficient } from './helpers.js';\n\nfunction normalizeResizeDirections(state, directions) {\n    var coefficient = getCoefficient(state);\n    return {\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\n        right: isNumber(directions.right) ? directions.right * coefficient : 0,\n        bottom: isNumber(directions.bottom) ? directions.bottom * coefficient : 0,\n    };\n}\nfunction normalizeCenter(state, center) {\n    var coefficient = getCoefficient(state);\n    if (state.visibleArea) {\n        return {\n            left: center.left * coefficient + state.visibleArea.left,\n            top: center.top * coefficient + state.visibleArea.top,\n        };\n    }\n    return center;\n}\nfunction normalizeFlip(state, flip) {\n    if (state) {\n        var normalizedAngle = Math.abs(state.transforms.rotate % 180);\n        if (normalizedAngle <= 45 || normalizedAngle >= 135) {\n            return flip;\n        }\n        else {\n            return {\n                horizontal: flip.vertical,\n                vertical: flip.horizontal,\n            };\n        }\n    }\n    return flip;\n}\nfunction fillMoveDirections(directions) {\n    return {\n        left: isNumber(directions.left) ? directions.left : 0,\n        top: isNumber(directions.top) ? directions.top : 0,\n    };\n}\nfunction fillResizeDirections(directions) {\n    return {\n        left: isNumber(directions.left) ? directions.left : 0,\n        top: isNumber(directions.top) ? directions.top : 0,\n        right: isNumber(directions.right) ? directions.right : 0,\n        bottom: isNumber(directions.bottom) ? directions.bottom : 0,\n    };\n}\nfunction normalizeMoveDirections(state, directions) {\n    var coefficient = getCoefficient(state);\n    return {\n        left: isNumber(directions.left) ? directions.left * coefficient : 0,\n        top: isNumber(directions.top) ? directions.top * coefficient : 0,\n    };\n}\nfunction normalizeImageTransform(state, transform) {\n    if (transform.scale) {\n        transform.scale = {\n            factor: isNumber(transform.scale) ? transform.scale : transform.scale.factor,\n            center: !isNumber(transform.scale) && transform.scale.center\n                ? normalizeCenter(state, transform.scale.center)\n                : undefined,\n        };\n    }\n    if (transform.rotate) {\n        transform.rotate = {\n            angle: isNumber(transform.rotate) ? transform.rotate : transform.rotate.angle,\n            center: !isNumber(transform.rotate) && transform.rotate.center\n                ? normalizeCenter(state, transform.rotate.center)\n                : undefined,\n        };\n    }\n    if (transform.move) {\n        transform.move = normalizeMoveDirections(state, transform.move);\n    }\n    return transform;\n}\n\nexport { fillMoveDirections, fillResizeDirections, normalizeCenter, normalizeFlip, normalizeImageTransform, normalizeMoveDirections, normalizeResizeDirections };\n", "import { isRoughlyEqual, sign, distance } from '../utils/index.js';\n\nfunction calculateGeometricProperties(touches, container) {\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\n    var centerMass = { left: 0, top: 0 };\n    var spread = 0;\n    touches.forEach(function (touch) {\n        centerMass.left += (touch.clientX - left) / touches.length;\n        centerMass.top += (touch.clientY - top) / touches.length;\n    });\n    touches.forEach(function (touch) {\n        spread += distance({ left: centerMass.left, top: centerMass.top }, { left: touch.clientX - left, top: touch.clientY - top });\n    });\n    return { centerMass: centerMass, spread: spread, count: touches.length };\n}\nfunction touchesToImageTransform(touches, previousTouches, container, options) {\n    if (options === void 0) { options = {}; }\n    var move, scale, rotate;\n    if (previousTouches.length === 1 && touches.length === 1) {\n        if (options.move) {\n            move = {\n                left: previousTouches[0].clientX - touches[0].clientX,\n                top: previousTouches[0].clientY - touches[0].clientY,\n            };\n        }\n    }\n    else if (touches.length > 1) {\n        var previousProperties = calculateGeometricProperties(previousTouches, container);\n        var properties = calculateGeometricProperties(touches, container);\n        if (options.rotate && previousTouches.length === 2 && touches.length === 2) {\n            var diffs = {\n                left: [\n                    touches[0].clientX - touches[1].clientX,\n                    previousTouches[0].clientX - previousTouches[1].clientX,\n                ],\n                top: [touches[0].clientY - touches[1].clientY, previousTouches[0].clientY - previousTouches[1].clientY],\n            };\n            var y = diffs.left[0] * diffs.top[1] - diffs.left[1] * diffs.top[0];\n            var x = diffs.left[0] * diffs.left[1] + diffs.top[0] * diffs.top[1];\n            if (!isRoughlyEqual(x, 0) && !isRoughlyEqual(y, 0)) {\n                var radians = Math.atan2(y, x);\n                var angle = -(radians * 180) / Math.PI;\n                rotate = {\n                    center: properties.centerMass,\n                    angle: angle,\n                };\n            }\n        }\n        if (options.move) {\n            move = {\n                left: previousProperties.centerMass.left - properties.centerMass.left,\n                top: previousProperties.centerMass.top - properties.centerMass.top,\n            };\n        }\n        if (options.scale) {\n            scale = {\n                factor: properties.spread / previousProperties.spread,\n                center: properties.centerMass,\n            };\n        }\n    }\n    return {\n        move: move,\n        scale: scale,\n        rotate: rotate,\n    };\n}\nfunction wheelEventToImageTransform(event, container, ratio) {\n    if (ratio === void 0) { ratio = 0.1; }\n    var _a = container.getBoundingClientRect(), left = _a.left, top = _a.top;\n    var factor = 1 - ratio * sign((event.deltaY || event.detail || event.wheelDelta));\n    var center = {\n        left: event.clientX - left,\n        top: event.clientY - top,\n    };\n    return { scale: { factor: factor, center: center } };\n}\n\nexport { touchesToImageTransform, wheelEventToImageTransform };\n", "function hasInteractions(interactions) {\n    return (interactions.moveCoordinates ||\n        interactions.resizeCoordinates ||\n        interactions.transformImage.move ||\n        interactions.transformImage.rotate ||\n        interactions.transformImage.flip ||\n        interactions.transformImage.scale);\n}\nfunction getEmptyInteractions() {\n    return {\n        moveCoordinates: false,\n        resizeCoordinates: false,\n        transformImage: {\n            rotate: false,\n            move: false,\n            scale: false,\n            flip: false,\n        },\n    };\n}\n\nexport { getEmptyInteractions, hasInteractions };\n", "import { deepCompare } from '../utils/index.js';\n\nfunction isEqualState(a, b) {\n    return deepCompare(a, b);\n}\n\nexport { isEqualState };\n", "import 'tslib';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultPositionRestrictions(state, settings) {\n    var imageSize = getTransformedImageSize(state);\n    var limits = {};\n    if (settings.imageRestriction && settings.imageRestriction !== 'none') {\n        limits = {\n            left: 0,\n            top: 0,\n            right: imageSize.width,\n            bottom: imageSize.height,\n        };\n    }\n    return limits;\n}\n\nexport { defaultPositionRestrictions };\n", "import { __assign } from 'tslib';\nimport { ratio, resizeToSizeRestrictions, getIntersections, coordinatesToPositionRestrictions, moveToPositionRestrictions } from '../service/utils.js';\nimport { getTransformedImageSize, getAreaSizeRestrictions } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultVisibleArea(state, settings) {\n    var coordinates = state.coordinates, boundary = state.boundary;\n    var imageSize = getTransformedImageSize(state);\n    var boundaryRatio = ratio(boundary);\n    if (coordinates) {\n        // Visible area will try to fit reference:\n        var reference = {\n            height: Math.max(coordinates.height, imageSize.height),\n            width: Math.max(coordinates.width, imageSize.width),\n        };\n        var visibleArea = {\n            left: 0,\n            top: 0,\n            width: ratio(reference) > boundaryRatio ? reference.width : reference.height * boundaryRatio,\n            height: ratio(reference) > boundaryRatio ? reference.width / boundaryRatio : reference.height,\n        };\n        // Visible area should correspond its restrictions:\n        visibleArea = resizeToSizeRestrictions(visibleArea, getAreaSizeRestrictions(state, settings));\n        // Visible area will try to center stencil:\n        visibleArea.left = coordinates.left + coordinates.width / 2 - visibleArea.width / 2;\n        visibleArea.top = coordinates.top + coordinates.height / 2 - visibleArea.height / 2;\n        // TODO: Controversial behavior:\n        // If the coordinates are beyond image visible area will be allowed to be beyond image alike:\n        var coordinatesIntersection = getIntersections(coordinates, coordinatesToPositionRestrictions(__assign({ left: 0, top: 0 }, imageSize)));\n        var restrictions = {};\n        if (!coordinatesIntersection.left && !coordinatesIntersection.right && visibleArea.width <= imageSize.width) {\n            restrictions.left = 0;\n            restrictions.right = imageSize.width;\n        }\n        if (!coordinatesIntersection.top && !coordinatesIntersection.bottom && visibleArea.height <= imageSize.height) {\n            restrictions.top = 0;\n            restrictions.bottom = imageSize.height;\n        }\n        return moveToPositionRestrictions(visibleArea, restrictions);\n    }\n    else {\n        var imageRatio = ratio(imageSize);\n        var areaProperties = {\n            height: imageRatio < boundaryRatio ? imageSize.height : imageSize.width / boundaryRatio,\n            width: imageRatio < boundaryRatio ? imageSize.height * boundaryRatio : imageSize.width,\n        };\n        return {\n            left: imageSize.width / 2 - areaProperties.width / 2,\n            top: imageSize.height / 2 - areaProperties.height / 2,\n            width: areaProperties.width,\n            height: areaProperties.height,\n        };\n    }\n}\n\nexport { defaultVisibleArea };\n", "import { __assign } from 'tslib';\nimport { positionToSizeRestrictions, ratio } from '../service/utils.js';\nimport { getSizeRestrictions, getAspectRatio, getPositionRestrictions } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction defaultSize(state, settings) {\n    var imageSize = state.imageSize, visibleArea = state.visibleArea;\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    var aspectRatio = getAspectRatio(state, settings);\n    var area;\n    if (visibleArea) {\n        area = visibleArea;\n    }\n    else {\n        var sizeRestrictions_1 = positionToSizeRestrictions(getPositionRestrictions(state, settings));\n        area = {\n            width: Math.max(sizeRestrictions_1.minWidth, Math.min(sizeRestrictions_1.maxWidth, imageSize.width)),\n            height: Math.max(sizeRestrictions_1.minHeight, Math.min(sizeRestrictions_1.maxHeight, imageSize.height)),\n        };\n    }\n    var optimalRatio = Math.min(aspectRatio.maximum || Infinity, Math.max(aspectRatio.minimum || 0, ratio(area)));\n    var size = area.width < area.height\n        ? {\n            width: area.width * 0.8,\n            height: (area.width * 0.8) / optimalRatio,\n        }\n        : {\n            height: area.height * 0.8,\n            width: area.height * 0.8 * optimalRatio,\n        };\n    return approximateSize(__assign(__assign({}, size), { aspectRatio: aspectRatio, sizeRestrictions: sizeRestrictions }));\n}\n\nexport { defaultSize };\n", "import { isNumeric, parseNumber } from '../utils/index.js';\n\nfunction retrieveSizeRestrictions(settings) {\n    return {\n        minWidth: isNumeric(settings.minWidth) ? parseNumber(settings.minWidth) : 0,\n        minHeight: isNumeric(settings.minHeight) ? parseNumber(settings.minHeight) : 0,\n        maxWidth: isNumeric(settings.maxWidth) ? parseNumber(settings.maxWidth) : Infinity,\n        maxHeight: isNumeric(settings.maxHeight) ? parseNumber(settings.maxHeight) : Infinity,\n    };\n}\nfunction pixelsRestrictions(state, settings) {\n    return retrieveSizeRestrictions(settings);\n}\n\nexport { pixelsRestrictions, retrieveSizeRestrictions };\n", "import 'tslib';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultPosition(state) {\n    var visibleArea = state.visibleArea, coordinates = state.coordinates;\n    var area = visibleArea || getTransformedImageSize(state);\n    return {\n        left: (visibleArea ? visibleArea.left : 0) + area.width / 2 - (coordinates ? coordinates.width / 2 : 0),\n        top: (visibleArea ? visibleArea.top : 0) + area.height / 2 - (coordinates ? coordinates.height / 2 : 0),\n    };\n}\n\nexport { defaultPosition };\n", "import 'tslib';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport { ImageRestriction } from '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultAreaPositionRestrictions(state, settings) {\n    var visibleArea = state.visibleArea, boundary = state.boundary;\n    var imageRestriction = settings.imageRestriction;\n    var imageSize = getTransformedImageSize(state);\n    var restrictions = {};\n    if (imageRestriction === ImageRestriction.fillArea) {\n        restrictions = {\n            left: 0,\n            top: 0,\n            right: imageSize.width,\n            bottom: imageSize.height,\n        };\n    }\n    else if (imageRestriction === ImageRestriction.fitArea) {\n        if (ratio(boundary) > ratio(imageSize)) {\n            restrictions = {\n                top: 0,\n                bottom: imageSize.height,\n            };\n            if (visibleArea) {\n                if (visibleArea.width > imageSize.width) {\n                    restrictions.left = -(visibleArea.width - imageSize.width) / 2;\n                    restrictions.right = imageSize.width - restrictions.left;\n                }\n                else {\n                    restrictions.left = 0;\n                    restrictions.right = imageSize.width;\n                }\n            }\n        }\n        else {\n            restrictions = {\n                left: 0,\n                right: imageSize.width,\n            };\n            if (visibleArea) {\n                if (visibleArea.height > imageSize.height) {\n                    restrictions.top = -(visibleArea.height - imageSize.height) / 2;\n                    restrictions.bottom = imageSize.height - restrictions.top;\n                }\n                else {\n                    restrictions.top = 0;\n                    restrictions.bottom = imageSize.height;\n                }\n            }\n        }\n    }\n    return restrictions;\n}\n\nexport { defaultAreaPositionRestrictions };\n", "import 'tslib';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize } from '../service/helpers.js';\nimport { ImageRestriction } from '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultAreaSizeRestrictions(state, settings) {\n    var boundary = state.boundary;\n    var imageRestriction = settings.imageRestriction;\n    var imageSize = getTransformedImageSize(state);\n    var restrictions = {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n    };\n    if (imageRestriction === ImageRestriction.fillArea) {\n        restrictions.maxWidth = imageSize.width;\n        restrictions.maxHeight = imageSize.height;\n    }\n    else if (imageRestriction === ImageRestriction.fitArea) {\n        if (ratio(boundary) > ratio(imageSize)) {\n            restrictions.maxHeight = imageSize.height;\n            restrictions.maxWidth = imageSize.height * ratio(boundary);\n        }\n        else {\n            restrictions.maxWidth = imageSize.width;\n            restrictions.maxHeight = imageSize.width / ratio(boundary);\n        }\n    }\n    return restrictions;\n}\n\nexport { defaultAreaSizeRestrictions };\n", "function fitBoundary(boundary, size) {\n    var areaHeight = boundary.clientHeight;\n    var areaWidth = boundary.clientWidth;\n    var currentHeight = areaHeight;\n    var currentWidth = (size.width * areaHeight) / size.height;\n    if (currentWidth > areaWidth) {\n        currentWidth = areaWidth;\n        currentHeight = (size.height * areaWidth) / size.width;\n    }\n    return {\n        width: currentWidth,\n        height: currentHeight,\n    };\n}\nfunction fillBoundary(boundary) {\n    var _a = boundary.getBoundingClientRect(), width = _a.width, height = _a.height;\n    return {\n        width: width,\n        height: height,\n    };\n}\n\nexport { fillBoundary, fitBoundary };\n", "import 'tslib';\nimport { isFunction } from '../utils/index.js';\nimport { createAspectRatio } from '../service/utils.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nfunction defaultStencilConstraints(rawSettings, stencilProps) {\n    if (!rawSettings.aspectRatio) {\n        return {\n            aspectRatio: createAspectRatio(isFunction(stencilProps.aspectRatio) ? stencilProps.aspectRatio() : stencilProps.aspectRatio),\n        };\n    }\n    return {};\n}\n\nexport { defaultStencilConstraints };\n", "import { __assign } from 'tslib';\nimport { isFunction } from '../utils/index.js';\nimport { mergePositionRestrictions, createAspectRatio } from '../service/utils.js';\nimport { mergeSizeRestrictions } from '../service/sizeRestrictions.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\nexport { defaultPositionRestrictions } from './defaultPositionRestrictions.js';\nimport { defaultVisibleArea } from './defaultVisibleArea.js';\nexport { defaultVisibleArea } from './defaultVisibleArea.js';\nimport { defaultSize } from './defaultSize.js';\nexport { defaultSize } from './defaultSize.js';\nimport { pixelsRestrictions } from './defaultSizeRestrictions.js';\nexport { pixelsRestrictions, retrieveSizeRestrictions } from './defaultSizeRestrictions.js';\nimport { defaultPosition } from './defaultPosition.js';\nexport { defaultPosition } from './defaultPosition.js';\nimport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\nexport { defaultAreaPositionRestrictions } from './defaultAreaPositionRestrictions.js';\nimport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\nexport { defaultAreaSizeRestrictions } from './defaultAreaSizeRestrictions.js';\nexport { fillBoundary, fitBoundary } from './defaultBoundary.js';\nexport { defaultStencilConstraints } from './defaultStencilConstraints.js';\n\nfunction withDefaultSizeRestrictions(sizeRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(sizeRestrictions) ? sizeRestrictions(state, basicSettings) : sizeRestrictions;\n        return mergeSizeRestrictions(pixelsRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultPositionRestrictions(positionRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(positionRestrictions)\n            ? positionRestrictions(state, basicSettings)\n            : positionRestrictions;\n        return mergePositionRestrictions(defaultPositionRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultAreaPositionRestrictions(areaPositionRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(areaPositionRestrictions)\n            ? areaPositionRestrictions(state, basicSettings)\n            : areaPositionRestrictions;\n        return mergePositionRestrictions(defaultAreaPositionRestrictions(state, basicSettings), value);\n    };\n}\nfunction withDefaultAreaSizeRestrictions(areaSizeRestrictions) {\n    return function (state, basicSettings) {\n        var value = isFunction(areaSizeRestrictions)\n            ? areaSizeRestrictions(state, basicSettings)\n            : areaSizeRestrictions;\n        return mergeSizeRestrictions(defaultAreaSizeRestrictions(state, basicSettings), value);\n    };\n}\nfunction createDefaultSettings(params) {\n    return __assign(__assign({}, params), { sizeRestrictions: function (state, basicSettings) {\n            var restrictions;\n            if (params.sizeRestrictions) {\n                restrictions = isFunction(params.sizeRestrictions)\n                    ? params.sizeRestrictions(state, basicSettings)\n                    : params.sizeRestrictions;\n            }\n            else {\n                restrictions = pixelsRestrictions(state, basicSettings);\n            }\n            return restrictions;\n        }, areaPositionRestrictions: function (state, basicSettings) {\n            if (params.areaPositionRestrictions) {\n                return isFunction(params.areaPositionRestrictions)\n                    ? params.areaPositionRestrictions(state, basicSettings)\n                    : params.areaPositionRestrictions;\n            }\n            else {\n                return defaultAreaPositionRestrictions(state, basicSettings);\n            }\n        }, areaSizeRestrictions: function (state, basicSettings) {\n            if (params.areaSizeRestrictions) {\n                return isFunction(params.areaSizeRestrictions)\n                    ? params.areaSizeRestrictions(state, basicSettings)\n                    : params.areaSizeRestrictions;\n            }\n            else {\n                return defaultAreaSizeRestrictions(state, basicSettings);\n            }\n        }, positionRestrictions: function (state, basicSettings) {\n            if (params.positionRestrictions) {\n                return isFunction(params.positionRestrictions)\n                    ? params.positionRestrictions(state, basicSettings)\n                    : params.positionRestrictions;\n            }\n            else {\n                return defaultPositionRestrictions(state, basicSettings);\n            }\n        }, defaultCoordinates: function (state, basicSettings) {\n            if (params.defaultCoordinates) {\n                return isFunction(params.defaultCoordinates)\n                    ? params.defaultCoordinates(state, basicSettings)\n                    : params.defaultCoordinates;\n            }\n            else {\n                var defaultSizeAlgorithm = params.defaultSize;\n                if (!defaultSizeAlgorithm) {\n                    defaultSizeAlgorithm = defaultSize;\n                }\n                var size = isFunction(defaultSizeAlgorithm)\n                    ? defaultSizeAlgorithm(state, basicSettings)\n                    : defaultSizeAlgorithm;\n                var defaultPositionAlgorithm_1 = params.defaultPosition || defaultPosition;\n                return [\n                    size,\n                    function (state) { return (__assign({}, (isFunction(defaultPositionAlgorithm_1)\n                        ? defaultPositionAlgorithm_1(state, basicSettings)\n                        : defaultPositionAlgorithm_1))); },\n                ];\n            }\n        }, defaultVisibleArea: function (state, basicSettings) {\n            if (params.defaultVisibleArea) {\n                return isFunction(params.defaultVisibleArea)\n                    ? params.defaultVisibleArea(state, basicSettings)\n                    : params.defaultVisibleArea;\n            }\n            else {\n                return defaultVisibleArea(state, basicSettings);\n            }\n        }, aspectRatio: function (state, basicSettings) {\n            return createAspectRatio(isFunction(params.aspectRatio) ? params.aspectRatio(state, basicSettings) : params.aspectRatio);\n        } });\n}\n\nexport { createDefaultSettings, withDefaultAreaPositionRestrictions, withDefaultAreaSizeRestrictions, withDefaultPositionRestrictions, withDefaultSizeRestrictions };\n", "import { __assign, __rest, __spreadArrays } from 'tslib';\nimport { getOptions, deepClone, debounce, isArray, isFunction, deepCompare, isUndefined, isObject } from '../utils/index.js';\nimport { getCoefficient, isConsistentState, getStencilCoordinates, getRoundedCoordinates } from '../service/helpers.js';\nimport { copyState } from '../state/copyState.js';\nimport { setCoordinates, SetCoordinatesMode } from '../state/setCoordinates.js';\nimport { setVisibleArea } from '../state/setVisibleArea.js';\nimport { createState } from '../state/createState.js';\nimport { moveCoordinates } from '../state/moveCoordinates.js';\nimport { resizeCoordinates } from '../state/resizeCoordinates.js';\nimport { setBoundary } from '../state/setBoundary.js';\nimport { transformImage } from '../state/transformImage.js';\nimport { reconcileState } from '../state/reconcileState.js';\nimport { normalizeImageTransform, normalizeFlip, normalizeMoveDirections, fillMoveDirections, normalizeResizeDirections, fillResizeDirections } from '../service/normalize.js';\nimport { hasInteractions } from '../service/interactions.js';\n\nfunction runCallback(callback, getInstance) {\n    if (callback && getInstance) {\n        var instance = getInstance();\n        if (instance) {\n            callback(instance);\n        }\n    }\n}\nfunction runCallbacks(callbacks, getInstance) {\n    callbacks.forEach(function (callback) {\n        runCallback(callback, getInstance);\n    });\n}\nvar AbstractCropperInstance = /** @class */ (function () {\n    function AbstractCropperInstance() {\n        var _this = this;\n        this.getTransitions = function () {\n            var data = _this.getData();\n            var transitions = _this.getProps().transitions;\n            return __assign(__assign({}, getOptions(transitions, {\n                timingFunction: 'ease-in-out',\n                duration: 350,\n            })), { active: data.transitions });\n        };\n        this.getInteractions = function () {\n            var interactions = _this.getData().interactions;\n            return deepClone(interactions);\n        };\n        this.hasInteractions = function () {\n            var interactions = _this.getData().interactions;\n            return hasInteractions(interactions);\n        };\n        this.startTransitions = function () {\n            var _a = _this.getProps(), onTransitionsStart = _a.onTransitionsStart, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\n            var _b = _this.getData(), transitions = _b.transitions, data = __rest(_b, [\"transitions\"]);\n            _this.setData(__assign(__assign({}, data), { transitions: true }));\n            if (!transitions) {\n                runCallbacks([onTransitionsStart, onUpdate], getInstance);\n            }\n            _this.endTransitions();\n        };\n        this.endTransitions = debounce(function () {\n            var _a = _this.getProps(), onTransitionsEnd = _a.onTransitionsEnd, onUpdate = _a.onUpdate, getInstance = _a.getInstance;\n            _this.setData(__assign(__assign({}, _this.getData()), { transitions: false }));\n            runCallbacks([onTransitionsEnd, onUpdate], getInstance);\n        }, function () {\n            return _this.getTransitions().duration;\n        });\n        this.applyPostProcess = function (action, state) {\n            var _a = _this.getProps(), settings = _a.settings, postProcess = _a.postProcess;\n            var name = action.name, _b = action.interaction, interaction = _b === void 0 ? false : _b, _c = action.transitions, transitions = _c === void 0 ? false : _c, _d = action.immediately, immediately = _d === void 0 ? false : _d;\n            var preparedAction = {\n                name: name,\n                interaction: interaction,\n                transitions: transitions,\n                immediately: immediately,\n            };\n            if (isArray(postProcess)) {\n                return postProcess.reduce(function (processedState, p) { return p(processedState, settings, preparedAction); }, state);\n            }\n            else if (isFunction(postProcess)) {\n                return postProcess(state, settings, preparedAction);\n            }\n            else {\n                return state;\n            }\n        };\n        this.updateState = function (modifier, options, callbacks) {\n            if (options === void 0) { options = {}; }\n            if (callbacks === void 0) { callbacks = []; }\n            var _a = options.transitions, transitions = _a === void 0 ? false : _a;\n            var _b = _this.getProps(), onTransitionsStart = _b.onTransitionsStart, getInstance = _b.getInstance, onChange = _b.onChange, onUpdate = _b.onUpdate, settings = _b.settings;\n            var previousData = _this.getData();\n            var state = isFunction(modifier) ? modifier(previousData.state, settings) : modifier;\n            var tolerance = state ? 1e-3 * getCoefficient(state) : 1e-3;\n            var somethingChanged = !deepCompare(previousData.state, state, tolerance);\n            var affectTransitionProperties = [\n                'coordinates',\n                'boundary',\n                'visibleArea',\n                'imageSize',\n                'transforms',\n            ].some(function (property) { var _a; return !deepCompare((_a = previousData.state) === null || _a === void 0 ? void 0 : _a[property], state === null || state === void 0 ? void 0 : state[property], tolerance); });\n            var currentData = previousData;\n            if (somethingChanged) {\n                if (transitions && affectTransitionProperties) {\n                    _this.endTransitions();\n                }\n                currentData = __assign(__assign({}, currentData), { state: copyState(state), transitions: transitions && affectTransitionProperties });\n                _this.setData(currentData);\n                runCallback(onChange, getInstance);\n            }\n            if (currentData.transitions && !previousData.transitions) {\n                runCallback(onTransitionsStart, getInstance);\n            }\n            runCallbacks(__spreadArrays(callbacks, [onUpdate]), getInstance);\n        };\n        this.setInteractions = function (interactions) {\n            var _a = _this.getProps(), onInteractionStart = _a.onInteractionStart, onInteractionEnd = _a.onInteractionEnd, getInstance = _a.getInstance;\n            var previousInteractions = _this.getInteractions();\n            var currentInteractions = __assign(__assign({}, previousInteractions), interactions);\n            if (!deepCompare(previousInteractions, currentInteractions)) {\n                _this.setData(__assign(__assign({}, _this.getData()), { interactions: currentInteractions }));\n            }\n            if (hasInteractions(previousInteractions) !== hasInteractions(currentInteractions)) {\n                if (!hasInteractions(previousInteractions)) {\n                    runCallback(onInteractionStart, getInstance);\n                }\n                else {\n                    var state_1 = _this.getData().state;\n                    _this.updateState(function () {\n                        return state_1 &&\n                            _this.applyPostProcess({\n                                name: 'interactionEnd',\n                                immediately: true,\n                                transitions: true,\n                            }, state_1);\n                    }, {\n                        transitions: true,\n                    }, [onInteractionEnd]);\n                }\n            }\n        };\n        this.resetState = function (boundary, image) {\n            _this.updateState(_this.createDefaultState(boundary, image));\n        };\n        this.clear = function () {\n            _this.updateState(null);\n        };\n        this.reconcileState = function (options) {\n            if (options === void 0) { options = {}; }\n            var _a = _this.getProps(), reconcileStateAlgorithm = _a.reconcileStateAlgorithm, settings = _a.settings;\n            var state = _this.getData().state;\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b;\n            if (state && !isConsistentState(state, settings)) {\n                var reconciledState = (reconcileStateAlgorithm || reconcileState)(state, settings);\n                reconciledState = _this.applyPostProcess({\n                    name: 'reconcileState',\n                    immediately: true,\n                    transitions: transitions,\n                }, reconciledState);\n                _this.updateState(reconciledState, {\n                    transitions: transitions,\n                });\n            }\n        };\n        this.transformImage = function (transform, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? false : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\n            var _e = _this.getProps(), transformImageAlgorithm = _e.transformImageAlgorithm, onTransformImage = _e.onTransformImage, onTransformImageEnd = _e.onTransformImageEnd, settings = _e.settings;\n            var state = _this.getData().state;\n            var callbacks = [];\n            if (state) {\n                if (normalize) {\n                    transform = normalizeImageTransform(state, transform);\n                }\n                var result = _this.applyPostProcess({\n                    name: 'transformImage',\n                    transitions: transitions,\n                    immediately: immediately,\n                }, (transformImageAlgorithm || transformImage)(state, settings, transform));\n                callbacks.push(onTransformImage);\n                if (interaction) {\n                    _this.setInteractions({\n                        transformImage: {\n                            rotate: !isUndefined(transform.rotate),\n                            flip: !isUndefined(transform.flip),\n                            scale: !isUndefined(transform.scale),\n                            move: !isUndefined(transform.move),\n                        },\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({\n                        name: 'transformImageEnd',\n                        transitions: transitions,\n                        immediately: true,\n                    }, result);\n                    callbacks.push(onTransformImageEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.transformImageEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.immediately, immediately = _a === void 0 ? true : _a, _b = options.transitions, transitions = _b === void 0 ? true : _b;\n            var state = _this.getData().state;\n            var onTransformImageEnd = _this.getProps().onTransformImageEnd;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'transformImageEnd', immediately: immediately, transitions: transitions }, state); }, {\n                transitions: transitions,\n            }, [onTransformImageEnd]);\n            _this.setInteractions({\n                transformImage: {\n                    rotate: false,\n                    flip: false,\n                    scale: false,\n                    move: false,\n                },\n            });\n        };\n        this.zoomImage = function (scale, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                scale: scale,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.moveImage = function (left, top, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                move: {\n                    left: left,\n                    top: top,\n                },\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.flipImage = function (horizontal, vertical, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? true : _d;\n            var state = _this.getState();\n            var flip = {\n                horizontal: horizontal,\n                vertical: vertical,\n            };\n            _this.transformImage({\n                flip: state && normalize ? normalizeFlip(state, flip) : flip,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions });\n        };\n        this.rotateImage = function (rotate, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.interaction, interaction = _a === void 0 ? false : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? true : _c, _d = options.normalize, normalize = _d === void 0 ? false : _d;\n            _this.transformImage({\n                rotate: rotate,\n            }, { interaction: interaction, immediately: immediately, transitions: transitions, normalize: normalize });\n        };\n        this.reset = function (boundary, image) {\n            _this.resetState(boundary, image);\n        };\n        this.setState = function (modifier, options) {\n            if (options === void 0) { options = {}; }\n            var settings = _this.getSettings();\n            var state = _this.getData().state;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b, _c = options.interaction, interaction = _c === void 0 ? false : _c, _d = options.postprocess, postprocess = _d === void 0 ? false : _d;\n            var newState = modifier && (isFunction(modifier) ? modifier(state, settings) : __assign(__assign({}, state), modifier));\n            _this.updateState(function () {\n                return postprocess\n                    ? newState &&\n                        _this.applyPostProcess({\n                            name: 'setState',\n                            immediately: immediately,\n                            transitions: transitions,\n                            interaction: interaction,\n                        }, newState)\n                    : newState;\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setCoordinates = function (transforms, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), setCoordinatesAlgorithm = _a.setCoordinatesAlgorithm, settings = _a.settings;\n            var _b = options.transitions, transitions = _b === void 0 ? true : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\n            _this.updateState(function () {\n                return state &&\n                    _this.applyPostProcess({\n                        name: 'setCoordinates',\n                        immediately: immediately,\n                        transitions: transitions,\n                    }, (setCoordinatesAlgorithm || setCoordinates)(state, settings, transforms, SetCoordinatesMode.zoom));\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setVisibleArea = function (visibleArea, options) {\n            if (options === void 0) { options = {}; }\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? true : _b;\n            var state = _this.getData().state;\n            var _c = _this.getProps(), setVisibleAreaAlgorithm = _c.setVisibleAreaAlgorithm, settings = _c.settings;\n            _this.updateState(function () {\n                return state &&\n                    _this.applyPostProcess({ name: 'setVisibleArea', immediately: immediately, transitions: transitions }, (setVisibleAreaAlgorithm || setVisibleArea)(state, settings, visibleArea));\n            }, {\n                transitions: transitions,\n            });\n        };\n        this.setBoundary = function (boundary, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), setBoundaryAlgorithm = _a.setBoundaryAlgorithm, settings = _a.settings;\n            var _b = options.transitions, transitions = _b === void 0 ? false : _b, _c = options.immediately, immediately = _c === void 0 ? true : _c;\n            if (boundary) {\n                _this.updateState(function () {\n                    return state &&\n                        _this.applyPostProcess({ name: 'setBoundary', immediately: immediately, transitions: transitions }, (setBoundaryAlgorithm || setBoundary)(state, settings, boundary));\n                });\n            }\n            else {\n                _this.updateState(null);\n            }\n        };\n        this.moveCoordinates = function (directions, options) {\n            if (options === void 0) { options = {}; }\n            var data = _this.getData();\n            var _a = _this.getProps(), moveCoordinatesAlgorithm = _a.moveCoordinatesAlgorithm, onMove = _a.onMove, onMoveEnd = _a.onMoveEnd, settings = _a.settings;\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\n            var callbacks = [];\n            if (!data.transitions && data.state) {\n                var normalizedDirections = normalize\n                    ? normalizeMoveDirections(data.state, directions)\n                    : fillMoveDirections(directions);\n                var result = _this.applyPostProcess({ name: 'moveCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (moveCoordinatesAlgorithm || moveCoordinates)(data.state, settings, normalizedDirections));\n                callbacks.push(onMove);\n                if (interaction) {\n                    _this.setInteractions({\n                        moveCoordinates: true,\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({ name: 'moveCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\n                    callbacks.push(onMoveEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.moveCoordinatesEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var onMoveEnd = _this.getProps().onMoveEnd;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'moveCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\n                transitions: transitions,\n            }, [onMoveEnd]);\n            _this.setInteractions({\n                moveCoordinates: false,\n            });\n        };\n        this.resizeCoordinates = function (anchor, directions, parameters, options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var _a = _this.getProps(), resizeCoordinatesAlgorithm = _a.resizeCoordinatesAlgorithm, onResize = _a.onResize, onResizeEnd = _a.onResizeEnd, settings = _a.settings;\n            var _b = options.interaction, interaction = _b === void 0 ? true : _b, _c = options.transitions, transitions = _c === void 0 ? false : _c, _d = options.immediately, immediately = _d === void 0 ? false : _d, _e = options.normalize, normalize = _e === void 0 ? true : _e;\n            var transitionsOptions = _this.getTransitions();\n            if (!transitionsOptions.active && state) {\n                var callbacks = [];\n                var normalizedDirections = normalize\n                    ? normalizeResizeDirections(state, directions)\n                    : fillResizeDirections(directions);\n                var result = _this.applyPostProcess({ name: 'resizeCoordinates', interaction: interaction, immediately: immediately, transitions: transitions }, (resizeCoordinatesAlgorithm || resizeCoordinates)(state, settings, anchor, normalizedDirections, isObject(parameters) ? parameters : {}));\n                callbacks.push(onResize);\n                if (interaction) {\n                    _this.setInteractions({\n                        resizeCoordinates: true,\n                    });\n                }\n                else {\n                    result = _this.applyPostProcess({ name: 'resizeCoordinatesEnd', interaction: interaction, immediately: immediately, transitions: transitions }, result);\n                    callbacks.push(onResizeEnd);\n                }\n                _this.updateState(result, {\n                    transitions: immediately && transitions,\n                }, callbacks);\n            }\n        };\n        this.resizeCoordinatesEnd = function (options) {\n            if (options === void 0) { options = {}; }\n            var onResizeEnd = _this.getProps().onResizeEnd;\n            var state = _this.getData().state;\n            var _a = options.transitions, transitions = _a === void 0 ? true : _a, _b = options.immediately, immediately = _b === void 0 ? false : _b;\n            _this.updateState(function () { return state && _this.applyPostProcess({ name: 'resizeCoordinatesEnd', transitions: transitions, immediately: immediately }, state); }, {\n                transitions: transitions,\n            }, [onResizeEnd]);\n            _this.setInteractions({\n                resizeCoordinates: false,\n            });\n        };\n        this.getStencilCoordinates = function () {\n            var state = _this.getData().state;\n            return getStencilCoordinates(state);\n        };\n        this.getCoordinates = function (options) {\n            if (options === void 0) { options = {}; }\n            var state = _this.getData().state;\n            var settings = _this.getProps().settings;\n            if (state && state.coordinates) {\n                var _a = options.round, round = _a === void 0 ? true : _a;\n                if (round) {\n                    return getRoundedCoordinates(state, settings);\n                }\n                else {\n                    return __assign({}, state.coordinates);\n                }\n            }\n            else {\n                return null;\n            }\n        };\n        this.getVisibleArea = function () {\n            var state = _this.getData().state;\n            if (state === null || state === void 0 ? void 0 : state.visibleArea) {\n                return __assign({}, state.visibleArea);\n            }\n            else {\n                return null;\n            }\n        };\n        this.getSettings = function () {\n            var settings = _this.getProps().settings;\n            return __assign({}, settings);\n        };\n        this.getState = function () {\n            var state = _this.getData().state;\n            return copyState(state);\n        };\n        this.getTransforms = function () {\n            var state = _this.getData().state;\n            return state\n                ? deepClone(state.transforms)\n                : {\n                    rotate: 0,\n                    flip: {\n                        horizontal: false,\n                        vertical: false,\n                    },\n                };\n        };\n        this.createDefaultState = function (boundary, image) {\n            var _a = _this.getProps(), createStateAlgorithm = _a.createStateAlgorithm, settings = _a.settings;\n            return _this.applyPostProcess({\n                name: 'createState',\n                immediately: true,\n                transitions: false,\n            }, (createStateAlgorithm || createState)({\n                image: image,\n                boundary: boundary,\n            }, settings));\n        };\n        this.isConsistent = function () {\n            var state = _this.getData().state;\n            var settings = _this.getProps().settings;\n            return state ? isConsistentState(state, settings) : true;\n        };\n    }\n    return AbstractCropperInstance;\n}());\n\nexport { AbstractCropperInstance };\n", "var timingFunctions = {\n    linear: function (t) {\n        return t;\n    },\n    'ease-in': function (t) {\n        return Math.pow(t, 1.675);\n    },\n    'ease-out': function (t) {\n        return 1 - Math.pow(1 - t, 1.675);\n    },\n    'ease-in-out': function (t) {\n        return 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1);\n    },\n};\nvar Animation = /** @class */ (function () {\n    function Animation() {\n        this.active = false;\n    }\n    Animation.prototype.start = function (animation) {\n        var _a;\n        this.onStart = animation.onStart;\n        this.onProgress = animation.onProgress;\n        this.onStop = animation.onStop;\n        if (!this.active) {\n            (_a = this.onStart) === null || _a === void 0 ? void 0 : _a.call(this);\n        }\n        if (this.id) {\n            window.cancelAnimationFrame(this.id);\n        }\n        this.startTime = performance.now();\n        this.timingFunction = animation.timingFunction;\n        this.endTime = this.startTime + animation.duration;\n        this.active = true;\n        this.animate();\n    };\n    Animation.prototype.animate = function () {\n        var _this = this;\n        if (this.startTime && this.endTime) {\n            var timingFunction = timingFunctions[this.timingFunction];\n            if (!timingFunction) {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.warn(\"[Animation] The timing function '\" + timingFunction + \"' is not supported. Available timing function: 'linear', 'ease-in', 'ease-in-out', 'ease-out'. Reset to 'ease-out'.\");\n                }\n                timingFunction = timingFunctions['ease-out'];\n            }\n            var percent = 1 - (this.endTime - performance.now()) / (this.endTime - this.startTime);\n            var progress = Math.min(1, timingFunction(percent));\n            if (this.onProgress) {\n                this.onProgress(progress);\n            }\n            if (percent < 1) {\n                this.id = window.requestAnimationFrame(function () { return _this.animate(); });\n            }\n            else {\n                this.stop();\n            }\n        }\n        else {\n            this.stop();\n        }\n    };\n    Animation.prototype.stop = function () {\n        this.active = false;\n        if (this.id) {\n            window.cancelAnimationFrame(this.id);\n        }\n        if (this.onStop) {\n            this.onStop();\n        }\n    };\n    return Animation;\n}());\n\nexport { Animation };\n", "import { __assign } from 'tslib';\nimport { isNumeric } from '../utils/index.js';\nimport { rotateSize, rotatePoint, getCenter } from '../service/utils.js';\nimport { isInitializedState } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\nimport { approximateSize } from '../service/approximateSize.js';\n\nfunction prepareSource(canvas, image, _a) {\n    var rotate = _a.rotate, flip = _a.flip;\n    var originalSize = {\n        width: 'naturalWidth' in image ? image.naturalWidth : image.width,\n        height: 'naturalHeight' in image ? image.naturalHeight : image.height,\n    };\n    var transformedSize = rotateSize(originalSize, rotate);\n    var ctx = canvas.getContext('2d');\n    canvas.height = transformedSize.height;\n    canvas.width = transformedSize.width;\n    if (ctx) {\n        ctx.save();\n        // Rotation:\n        var canvasCenter = rotatePoint(getCenter(__assign({ left: 0, top: 0 }, originalSize)), rotate);\n        ctx.translate(-(canvasCenter.left - transformedSize.width / 2), -(canvasCenter.top - transformedSize.height / 2));\n        ctx.rotate((rotate * Math.PI) / 180);\n        // Reflection;\n        ctx.translate(flip.horizontal ? originalSize.width : 0, flip.vertical ? originalSize.height : 0);\n        ctx.scale(flip.horizontal ? -1 : 1, flip.vertical ? -1 : 1);\n        ctx.drawImage(image, 0, 0, originalSize.width, originalSize.height);\n        ctx.restore();\n    }\n    return canvas;\n}\nfunction updateCanvas(canvas, source, coordinates, resultSize, options) {\n    canvas.width = resultSize ? resultSize.width : coordinates.width;\n    canvas.height = resultSize ? resultSize.height : coordinates.height;\n    var ctx = canvas.getContext('2d');\n    if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (options) {\n            if (options.imageSmoothingEnabled) {\n                ctx.imageSmoothingEnabled = options.imageSmoothingEnabled;\n            }\n            if (options.imageSmoothingQuality) {\n                ctx.imageSmoothingQuality = options.imageSmoothingQuality;\n            }\n            if (options.fillColor) {\n                ctx.fillStyle = options.fillColor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n                ctx.save();\n            }\n        }\n        var offsetX = coordinates.left < 0 ? -coordinates.left : 0;\n        var offsetY = coordinates.top < 0 ? -coordinates.top : 0;\n        ctx.drawImage(source, coordinates.left + offsetX, coordinates.top + offsetY, coordinates.width, coordinates.height, offsetX * (canvas.width / coordinates.width), offsetY * (canvas.height / coordinates.height), canvas.width, canvas.height);\n    }\n    return canvas;\n}\nfunction drawCroppedArea(state, image, resultCanvas, spareCanvas, options) {\n    if (isInitializedState(state)) {\n        var transforms = state.transforms, coordinates = state.coordinates;\n        var imageTransformed = transforms.rotate !== 0 || transforms.flip.horizontal || transforms.flip.vertical;\n        var source = imageTransformed ? prepareSource(spareCanvas, image, transforms) : image;\n        var params = __assign({ minWidth: 0, minHeight: 0, maxWidth: Infinity, maxHeight: Infinity, maxArea: Infinity, imageSmoothingEnabled: true, imageSmoothingQuality: 'high', fillColor: 'transparent' }, options);\n        var firstNumeric = function (array) { return array.find(function (el) { return isNumeric(el); }); };\n        var size = approximateSize({\n            sizeRestrictions: {\n                minWidth: firstNumeric([params.width, params.minWidth]) || 0,\n                minHeight: firstNumeric([params.height, params.minHeight]) || 0,\n                maxWidth: firstNumeric([params.width, params.maxWidth]) || Infinity,\n                maxHeight: firstNumeric([params.height, params.maxHeight]) || Infinity,\n            },\n            width: coordinates.width,\n            height: coordinates.height,\n            aspectRatio: {\n                minimum: coordinates.width / coordinates.height,\n                maximum: coordinates.width / coordinates.height,\n            },\n        });\n        if (params.maxArea && size.width * size.height > params.maxArea) {\n            var scale = Math.sqrt(params.maxArea / (size.width * size.height));\n            size = {\n                width: Math.round(scale * size.width),\n                height: Math.round(scale * size.height),\n            };\n        }\n        return updateCanvas(resultCanvas, source, coordinates, size, params);\n    }\n    else {\n        return null;\n    }\n}\n\nexport { drawCroppedArea, prepareSource, updateCanvas };\n", "function stretchCropperBoundary(boundary, stretcher, size) {\n    // Reset stretcher\n    stretcher.style.width = \"0px\";\n    stretcher.style.height = \"0px\";\n    // Try to fit the size by width:\n    stretcher.style.width = Math.max(boundary.clientWidth, size.width) + \"px\";\n    // After that try to fit the size by height and resulted width:\n    var ratio = size.width / size.height;\n    stretcher.style.height = Math.max(boundary.clientHeight, stretcher.clientWidth / ratio) + \"px\";\n    stretcher.style.width = stretcher.clientHeight * ratio + \"px\";\n}\nfunction stretchPreviewBoundary(boundary, stretcher, size) {\n    // Reset stretcher\n    stretcher.style.width = \"0px\";\n    stretcher.style.height = \"0px\";\n    // Try to fit the size by width:\n    stretcher.style.width = Math.max(boundary.getBoundingClientRect().width, size.width) + \"px\";\n    // After that try to fit the size by height and resulted width:\n    var ratio = size.width / size.height;\n    stretcher.style.height = Math.max(boundary.getBoundingClientRect().height, stretcher.getBoundingClientRect().width / ratio) + \"px\";\n    stretcher.style.width = stretcher.getBoundingClientRect().height * ratio + \"px\";\n    if (stretcher.clientWidth / stretcher.clientHeight > boundary.clientWidth / boundary.clientHeight) {\n        if (stretcher.clientWidth > boundary.clientWidth) {\n            stretcher.style.width = boundary.clientWidth + \"px\";\n            stretcher.style.height = boundary.clientWidth / ratio + \"px\";\n        }\n    }\n    else {\n        if (stretcher.clientHeight > boundary.clientHeight) {\n            stretcher.style.height = boundary.clientHeight + \"px\";\n            stretcher.style.width = boundary.clientHeight * ratio + \"px\";\n        }\n    }\n}\n\nexport { stretchCropperBoundary, stretchPreviewBoundary };\n", "import { __assign } from 'tslib';\nimport { isCrossOriginURL, isBlob, isLocal } from '../utils/index.js';\nimport { ratio } from '../service/utils.js';\nimport { getTransformedImageSize, getCoefficient } from '../service/helpers.js';\nimport '../types/index.js';\nimport '../state/setCoordinates.js';\n\nvar XHR_DONE = 4;\nfunction base64ToArrayBuffer(base64) {\n    base64 = base64.replace(/^data:([^;]+);base64,/gim, '');\n    var binary = atob(base64);\n    var len = binary.length;\n    var buffer = new ArrayBuffer(len);\n    var view = new Uint8Array(buffer);\n    for (var i = 0; i < len; i++) {\n        view[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\nfunction objectURLToBlob(url, callback) {\n    var http = new XMLHttpRequest();\n    http.open('GET', url, true);\n    http.responseType = 'blob';\n    http.onload = function () {\n        if (this.status == 200 || this.status === 0) {\n            callback(this.response);\n        }\n    };\n    http.send();\n}\nfunction getTransforms(orientation) {\n    var result = {\n        flip: {\n            horizontal: false,\n            vertical: false,\n        },\n        rotate: 0,\n    };\n    if (orientation) {\n        switch (orientation) {\n            case 2:\n                result.flip.horizontal = true;\n                break;\n            case 3:\n                result.rotate = -180;\n                break;\n            case 4:\n                result.flip.vertical = true;\n                break;\n            case 5:\n                result.rotate = 90;\n                result.flip.vertical = true;\n                break;\n            case 6:\n                result.rotate = 90;\n                break;\n            case 7:\n                result.rotate = 90;\n                result.flip.horizontal = true;\n                break;\n            case 8:\n                result.rotate = -90;\n                break;\n        }\n    }\n    return result;\n}\nfunction getImageData(img) {\n    return new Promise(function (resolve, reject) {\n        try {\n            if (img) {\n                if (/^data:/i.test(img)) {\n                    // Data URL\n                    resolve(base64ToArrayBuffer(img));\n                }\n                else if (/^blob:/i.test(img)) {\n                    // Blob\n                    var fileReader_1 = new FileReader();\n                    fileReader_1.onload = function (e) {\n                        var _a;\n                        resolve((_a = e.target) === null || _a === void 0 ? void 0 : _a.result);\n                    };\n                    objectURLToBlob(img, function (blob) {\n                        fileReader_1.readAsArrayBuffer(blob);\n                    });\n                }\n                else {\n                    // Simple URL\n                    var http_1 = new XMLHttpRequest();\n                    http_1.onreadystatechange = function () {\n                        if (http_1.readyState !== XHR_DONE)\n                            return;\n                        if (http_1.status === 200 || http_1.status === 0) {\n                            resolve(http_1.response);\n                        }\n                        else {\n                            reject('Warning: could not load an image to parse its orientation');\n                        }\n                    };\n                    http_1.onprogress = function () {\n                        // Abort the request directly if it not a JPEG image for better performance\n                        if (http_1.getResponseHeader('content-type') !== 'image/jpeg') {\n                            http_1.abort();\n                        }\n                    };\n                    http_1.withCredentials = false;\n                    http_1.open('GET', img, true);\n                    http_1.responseType = 'arraybuffer';\n                    http_1.send(null);\n                }\n            }\n            else {\n                reject('Error: the image is empty');\n            }\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n}\nfunction getStyleTransforms(transforms) {\n    var _a = transforms.rotate, rotate = _a === void 0 ? 0 : _a, _b = transforms.flip, flip = _b === void 0 ? { horizontal: false, vertical: false } : _b, _c = transforms.scale, scale = _c === void 0 ? 1 : _c;\n    return \" rotate(\" + rotate + \"deg) scaleX(\" + scale * (flip.horizontal ? -1 : 1) + \") scaleY(\" + scale * (flip.vertical ? -1 : 1) + \")\";\n}\nfunction getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    var i;\n    for (i = start, length += start; i < length; i++) {\n        str += String.fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n}\nfunction resetAndGetOrientation(arrayBuffer) {\n    try {\n        var dataView = new DataView(arrayBuffer);\n        var orientation_1;\n        var exifIDCode = void 0;\n        var tiffOffset = void 0;\n        var littleEndian = void 0;\n        var app1Start = void 0;\n        var ifdStart = void 0;\n        // Only handle JPEG image (start by 0xFFD8)\n        if (dataView.getUint8(0) === 0xff && dataView.getUint8(1) === 0xd8) {\n            var length_1 = dataView.byteLength;\n            var offset = 2;\n            while (offset + 1 < length_1) {\n                if (dataView.getUint8(offset) === 0xff && dataView.getUint8(offset + 1) === 0xe1) {\n                    app1Start = offset;\n                    break;\n                }\n                offset++;\n            }\n        }\n        if (app1Start) {\n            exifIDCode = app1Start + 4;\n            tiffOffset = app1Start + 10;\n            if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n                var endianness = dataView.getUint16(tiffOffset);\n                littleEndian = endianness === 0x4949;\n                if (littleEndian || endianness === 0x4d4d /* bigEndian */) {\n                    if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002a) {\n                        var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n                        if (firstIFDOffset >= 0x00000008) {\n                            ifdStart = tiffOffset + firstIFDOffset;\n                        }\n                    }\n                }\n            }\n        }\n        if (ifdStart) {\n            var length_2 = dataView.getUint16(ifdStart, littleEndian);\n            for (var i = 0; i < length_2; i++) {\n                var offset = ifdStart + i * 12 + 2;\n                if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n                    // 8 is the offset of the current tag's value\n                    offset += 8;\n                    // Get the original orientation value\n                    orientation_1 = dataView.getUint16(offset, littleEndian);\n                    // Override the orientation with its default value\n                    dataView.setUint16(offset, 1, littleEndian);\n                    break;\n                }\n            }\n        }\n        return orientation_1;\n    }\n    catch (error) {\n        return null;\n    }\n}\nfunction arrayBufferToDataURL(arrayBuffer) {\n    var chunks = [];\n    // Chunk Typed Array for better performance\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n        var value = uint8.subarray(0, chunkSize);\n        chunks.push(String.fromCharCode.apply(null, (Array.from ? Array.from(value) : value.slice())));\n        uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:image/jpeg;base64,\" + btoa(chunks.join(''));\n}\nfunction getImage(_a) {\n    var src = _a.src, _b = _a.arrayBuffer, arrayBuffer = _b === void 0 ? null : _b, _c = _a.orientation, orientation = _c === void 0 ? null : _c;\n    var options = {\n        src: src,\n        arrayBuffer: arrayBuffer,\n        revoke: false,\n        transforms: {\n            flip: {\n                horizontal: false,\n                vertical: false,\n            },\n            rotate: 0,\n        },\n    };\n    if (arrayBuffer && orientation && orientation > 1) {\n        if (isBlob(src) || !isLocal(src)) {\n            options.src = URL.createObjectURL(new Blob([arrayBuffer]));\n            options.revoke = true;\n        }\n        else {\n            options.src = arrayBufferToDataURL(arrayBuffer);\n        }\n    }\n    else {\n        options.src = src;\n    }\n    if (orientation) {\n        options.transforms = getTransforms(orientation);\n    }\n    return options;\n}\nfunction parseImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    var checkOrientation = settings.checkOrientation, parse = settings.parse;\n    return new Promise(function (resolve) {\n        if (checkOrientation || parse) {\n            getImageData(src)\n                .then(function (data) {\n                var orientation = resetAndGetOrientation(data);\n                resolve(getImage(data\n                    ? { src: src, arrayBuffer: data, orientation: orientation }\n                    : { src: src, arrayBuffer: null, orientation: null }));\n            })\n                .catch(function (error) {\n                console.warn(error);\n                resolve(getImage({ src: src }));\n            });\n        }\n        else {\n            resolve(getImage({ src: src }));\n        }\n    });\n}\nfunction createImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    return new Promise(function (resolve, reject) {\n        var image = document.createElement('img');\n        if (settings.crossOrigin) {\n            image.crossOrigin = settings.crossOrigin !== true ? settings.crossOrigin : 'anonymous';\n        }\n        image.src = src;\n        image.style.visibility = 'hidden';\n        image.style.position = 'fixed';\n        document.body.appendChild(image);\n        if (image.complete) {\n            resolve(image);\n            document.body.removeChild(image);\n        }\n        else {\n            image.addEventListener('load', function () {\n                resolve(image);\n                document.body.removeChild(image);\n            });\n            image.addEventListener('error', function () {\n                reject(null);\n                document.body.removeChild(image);\n            });\n        }\n    });\n}\nfunction loadImage(src, settings) {\n    if (settings === void 0) { settings = {}; }\n    return parseImage(src, __assign(__assign({}, settings), { crossOrigin: isCrossOriginURL(src) && settings.crossOrigin })).then(function (options) {\n        return new Promise(function (resolve, reject) {\n            createImage(options.src, settings)\n                .then(function (image) {\n                resolve(__assign(__assign({}, options), { width: image.naturalWidth, height: image.naturalHeight }));\n            })\n                .catch(function () {\n                reject(null);\n            });\n        });\n    });\n}\nfunction getImageStyle(image, state, area, coefficient, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    var optimalImageSize = image.width > image.height\n        ? {\n            width: Math.min(512, image.width),\n            height: Math.min(512, image.width) / (image.width / image.height),\n        }\n        : {\n            height: Math.min(512, image.height),\n            width: Math.min(512, image.height) * (image.width / image.height),\n        };\n    var actualImageSize = getTransformedImageSize(state);\n    var imageTransforms = {\n        rotate: state.transforms.rotate,\n        flip: {\n            horizontal: state.transforms.flip.horizontal,\n            vertical: state.transforms.flip.vertical,\n        },\n        translateX: area.left / coefficient,\n        translateY: area.top / coefficient,\n        scale: 1 / coefficient,\n    };\n    var compensations = {\n        rotate: {\n            left: (optimalImageSize.width - actualImageSize.width) / (2 * coefficient),\n            top: (optimalImageSize.height - actualImageSize.height) / (2 * coefficient),\n        },\n        scale: {\n            left: ((1 - 1 / coefficient) * optimalImageSize.width) / 2,\n            top: ((1 - 1 / coefficient) * optimalImageSize.height) / 2,\n        },\n    };\n    var transforms = __assign(__assign({}, imageTransforms), { scale: imageTransforms.scale * (image.width / optimalImageSize.width) });\n    var result = {\n        width: optimalImageSize.width + \"px\",\n        height: optimalImageSize.height + \"px\",\n        left: '0px',\n        top: '0px',\n        transition: 'none',\n        transform: \"translate3d(\" + (-compensations.rotate.left - compensations.scale.left - imageTransforms.translateX) + \"px, \" + (-compensations.rotate.top - compensations.scale.top - imageTransforms.translateY) + \"px, 0px)\" + getStyleTransforms(transforms),\n        willChange: 'none',\n    };\n    if (transitions && transitions.active) {\n        result.willChange = 'transform';\n        result.transition = transitions.duration + \"ms \" + transitions.timingFunction;\n    }\n    return result;\n}\nfunction getBackgroundStyle(image, state, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    if (image && state && state.visibleArea) {\n        return getImageStyle(image, state, state.visibleArea, getCoefficient(state), transitions);\n    }\n    else {\n        return {};\n    }\n}\nfunction getPreviewStyle(image, state, size, transitions) {\n    if (transitions === void 0) { transitions = null; }\n    if (image && state && state.visibleArea && state.coordinates) {\n        return getImageStyle(image, state, state.coordinates, ratio(state.coordinates) > ratio(size)\n            ? state.coordinates.width / size.width\n            : state.coordinates.height / size.height, transitions);\n    }\n    else {\n        return {};\n    }\n}\n\nexport { createImage, getBackgroundStyle, getImageStyle, getPreviewStyle, getStyleTransforms, loadImage };\n", "import {\n\tapplyMove,\n\tapplyScale,\n\tdiff,\n\tfitToSizeRestrictions,\n\tgetAreaPositionRestrictions,\n\tgetAreaSizeRestrictions,\n\tgetCenter,\n\tgetPositionRestrictions,\n\tisInitializedState,\n\tmergePositionRestrictions,\n\tmoveToPositionRestrictions,\n\tratio,\n\tcoordinatesToPositionRestrictions,\n} from 'advanced-cropper/service';\nimport { CoreSettings, CropperState, PostprocessAction, Size } from 'advanced-cropper';\nimport { copyState } from 'advanced-cropper/state';\n\nexport function hybridStencilAutoZoomAlgorithm(state: CropperState, settings: CoreSettings): CropperState {\n\tif (isInitializedState(state)) {\n\t\tconst result = copyState(state);\n\n\t\t// Checks that coordinates has the same ratio that coordinates:\n\t\tconst stencil: Size = {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tif (ratio(result.boundary) > ratio(result.coordinates)) {\n\t\t\tstencil.height = result.boundary.height * 0.8;\n\t\t\tstencil.width = stencil.height * ratio(result.coordinates);\n\t\t} else {\n\t\t\tstencil.width = result.boundary.width * 0.8;\n\t\t\tstencil.height = stencil.width * ratio(result.coordinates);\n\t\t}\n\n\t\t// First of all try to resize visible area as much as possible:\n\t\tresult.visibleArea = applyScale(\n\t\t\tresult.visibleArea,\n\t\t\t(result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width),\n\t\t);\n\n\t\t// Check that visible area doesn't break the area restrictions:\n\t\tconst scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n\n\t\tresult.visibleArea = applyScale(result.visibleArea, scale);\n\n\t\tif (scale !== 1) {\n\t\t\tstencil.height /= scale;\n\t\t\tstencil.width /= scale;\n\t\t}\n\n\t\tresult.visibleArea = applyMove(\n\t\t\tresult.visibleArea,\n\t\t\tdiff(getCenter(result.coordinates), getCenter(result.visibleArea)),\n\t\t);\n\n\t\t// Center stencil in visible area:\n\t\tresult.visibleArea = moveToPositionRestrictions(\n\t\t\tresult.visibleArea,\n\t\t\tgetAreaPositionRestrictions(result, settings),\n\t\t);\n\n\t\tresult.coordinates = moveToPositionRestrictions(\n\t\t\tresult.coordinates,\n\t\t\tmergePositionRestrictions(\n\t\t\t\tcoordinatesToPositionRestrictions(result.visibleArea),\n\t\t\t\tgetPositionRestrictions(result, settings),\n\t\t\t),\n\t\t);\n\n\t\treturn result;\n\t}\n\treturn state;\n}\n\nexport function hybridStencilAutoZoom(\n\tstate: CropperState,\n\tsettings: CoreSettings,\n\taction: PostprocessAction,\n): CropperState {\n\tif (action.immediately) {\n\t\treturn hybridStencilAutoZoomAlgorithm(state, settings);\n\t}\n\treturn state;\n}\n", "export function deprecationWarning(text: string) {\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconsole.warn(`Deprecation warning: ${text}`);\n\t}\n}\n", "import { useRef } from 'react';\nimport { deprecationWarning } from '../service/utils';\n\nexport function useDeprecationWarning() {\n\tconst fired = useRef<string[]>([]);\n\n\treturn (message: string) => {\n\t\tif (fired.current.indexOf(message) === -1) {\n\t\t\tdeprecationWarning(message);\n\t\t\tfired.current.push(message);\n\t\t}\n\t};\n}\n", "import React, { forwardRef, PropsWithoutRef } from 'react';\n\nexport function createCropper<T, P = {}>(\n\trender: (props: P, ref: React.Ref<T>) => React.ReactElement | null,\n): (props: PropsWithoutRef<P> & React.RefAttributes<T>) => React.ReactElement | null {\n\treturn forwardRef<T, P>(render);\n}\n", "import { useRef } from 'react';\n\nexport function useFirstMountState(): boolean {\n\tconst isFirst = useRef(true);\n\n\tif (isFirst.current) {\n\t\tisFirst.current = false;\n\n\t\treturn true;\n\t}\n\n\treturn isFirst.current;\n}\n", "import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\n\nexport const useUpdateEffect: typeof useEffect = (effect, deps) => {\n\tconst isFirstMount = useFirstMountState();\n\n\tuseEffect(() => {\n\t\tif (!isFirstMount) {\n\t\t\treturn effect();\n\t\t}\n\t}, deps);\n};\n", "import { SetStateAction, useRef, useState } from \"react\";\nimport { useUpdateEffect } from \"./useUpdateEffect\";\n\ntype DispatchWithCallback<S> = (value: SetStateAction<S>, callback?: Function) => void;\n\nexport function useStateWithCallback<S>(initialState?: S | (() => S)): [S, DispatchWithCallback<S>];\nexport function useStateWithCallback<S = undefined>(): [S | undefined, DispatchWithCallback<S  | undefined>];\nexport function useStateWithCallback<S = undefined>(initialState?: S | (() => S)): [S | undefined, DispatchWithCallback<S | undefined>]  {\n\tconst [state, setState] = useState(initialState);\n\tconst [callback, setCallback] = useState<Function | null | undefined>(null);\n\tconst previousState = useRef(initialState);\n\n\tuseUpdateEffect(() => {\n\t\tif (callback) {\n\t\t\tcallback(state, previousState.current);\n\t\t}\n\t}, [callback])\n\n\treturn [\n\t\tstate,\n\t\t(value: SetStateAction<S | undefined>, callback?: Function) => {\n\t\t\tpreviousState.current = state;\n\t\t\tsetState(value);\n\t\t\tsetCallback(() => callback);\n\t\t}\n\t]\n}\n", "import {\n\tAbstractCropperInstance,\n\tAbstractCropperInstanceData,\n\tAbstractCropperInstanceProps,\n\tAbstractCropperInstanceSettings,\n\tgetEmptyInteractions,\n} from 'advanced-cropper';\n\nexport interface CropperInstanceProps<Settings extends AbstractCropperInstanceSettings, Instance> {\n\tgetProps: () => AbstractCropperInstanceProps<Settings, Instance>;\n\tsetData?: (data: AbstractCropperInstanceData) => void;\n}\n\nexport class CropperInstance<\n\tSettings extends AbstractCropperInstanceSettings,\n\tInstance = unknown,\n> extends AbstractCropperInstance<Settings, Instance> {\n\tdata: AbstractCropperInstanceData;\n\tnotify: () => void;\n\tprops: () => AbstractCropperInstanceProps<Settings, Instance>;\n\n\tconstructor(props: () => AbstractCropperInstanceProps<Settings, Instance>, onChange: () => void) {\n\t\tsuper();\n\t\tthis.props = props;\n\t\tthis.notify = onChange;\n\t\tthis.data = {\n\t\t\tstate: null,\n\t\t\ttransitions: false,\n\t\t\tinteractions: getEmptyInteractions(),\n\t\t};\n\t}\n\n\tprotected getProps() {\n\t\treturn this.props();\n\t}\n\n\tprotected setData(data: AbstractCropperInstanceData) {\n\t\tthis.data = data;\n\t\tthis.notify();\n\t}\n\n\tprotected getData(): AbstractCropperInstanceData {\n\t\treturn this.data;\n\t}\n}\n", "import { useState } from 'react';\n\nexport function useForceRerender() {\n\tconst [tick, setTick] = useState({});\n\n\treturn () => {\n\t\tsetTick({});\n\t};\n}\n", "import { useRef } from 'react';\n\nexport function usePersistentFunction<Props, Arguments extends any[]>(props: (...args: Arguments) => Props) {\n\tconst propsRef = useRef(props);\n\n\tpropsRef.current = props;\n\n\treturn (...args: Arguments) => propsRef.current(...args);\n}\n", "import { useRef } from 'react';\nimport {\n\tImageRestriction,\n\tcreateDefaultSettings,\n\tAbstractCropperInstanceParameters,\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceSettings,\n\tDefaultSettings,\n} from 'advanced-cropper';\nimport { CropperInstance } from '../instance/CropperInstance';\nimport { useForceRerender } from './useForceRerender';\nimport { usePersistentFunction } from './usePersistentFunction';\n\nexport type CropperInstanceSettings = DefaultSettings & AbstractCropperInstanceSettings;\n\nexport type CropperInstanceSettingsProp<Settings extends CropperInstanceSettings> = Partial<\n\tPick<Settings, keyof CropperInstanceSettings>\n> &\n\tOmit<Settings, keyof CropperInstanceSettings>;\n\nexport function useCropperInstance<Settings extends CropperInstanceSettings, Instance = unknown>(\n\tprops: () => AbstractCropperInstanceParameters<Settings> &\n\t\tAbstractCropperInstanceCallbacks<Instance> & {\n\t\t\tsettings?: CropperInstanceSettingsProp<Settings>;\n\t\t},\n) {\n\tconst rerender = useForceRerender();\n\n\tconst getProps = usePersistentFunction(() => {\n\t\tconst { settings, ...parameters } = props();\n\n\t\tconst extendedSettings = {\n\t\t\timageRestriction: ImageRestriction.fitArea,\n\t\t\ttransformImage: {\n\t\t\t\tadjustStencil: true,\n\t\t\t},\n\t\t\t...settings,\n\t\t};\n\n\t\tconst extendedParameters = {\n\t\t\ttransitions: true,\n\t\t\t...parameters,\n\t\t};\n\n\t\treturn {\n\t\t\tsettings: {\n\t\t\t\t...extendedSettings,\n\t\t\t\t...createDefaultSettings<Settings>(extendedSettings),\n\t\t\t\t// It's needed because of the nature of the settings field\n\t\t\t} as Settings,\n\t\t\t...extendedParameters,\n\t\t};\n\t});\n\n\tconst cropper = useRef(new CropperInstance<Settings, Instance>(getProps, rerender));\n\n\treturn cropper.current;\n}\nexport type CropperStateHook = ReturnType<typeof useCropperInstance>;\n", "import { useEffect, useRef, useState } from 'react';\nimport { CropperImage, isUndefined, promiseTimeout, loadImage } from 'advanced-cropper';\nimport { useStateWithCallback } from \"./useStateWithCallback\";\n\nexport interface CropperImageHookSettings {\n\tsrc?: string | null;\n\tonLoadingStart?: () => void;\n\tonLoadingEnd?: () => void;\n\tonError?: () => void;\n\tonLoad?: (image?: CropperImage) => void;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tcheckOrientation?: boolean;\n\tcanvas?: string | boolean;\n\tunloadTime?: number;\n}\n\nexport function useCropperImage(options: CropperImageHookSettings) {\n\tconst { src, onLoadingStart, onLoadingEnd, onError, onLoad, crossOrigin, checkOrientation, canvas, unloadTime } = options;\n\tconst [image, setImage] = useState<CropperImage | null>(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst [loaded, setLoaded] = useStateWithCallback(false);\n\n\tconst currentSrc = useRef<string | null>(null);\n\n\tuseEffect(() => {\n\t\tif (currentSrc.current !== src) {\n\t\t\tcurrentSrc.current = src || null;\n\t\t\tsetLoaded(false);\n\t\t\tif (src) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tonLoadingStart?.();\n\t\t\t\tconst promises: Promise<unknown>[] = [\n\t\t\t\t\tloadImage(src, {\n\t\t\t\t\t\tcrossOrigin: isUndefined(crossOrigin) ? canvas : crossOrigin,\n\t\t\t\t\t\tcheckOrientation,\n\t\t\t\t\t}),\n\t\t\t\t];\n\n\t\t\t\tif (loaded && unloadTime) {\n\t\t\t\t\tpromises.push(promiseTimeout(unloadTime));\n\t\t\t\t}\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then((responses) => {\n\t\t\t\t\t\tconst [image] = responses as [CropperImage];\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tsetImage(image);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonError?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\tonLoadingEnd?.();\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (unloadTime) {\n\t\t\t\t\t\tpromiseTimeout(unloadTime).then(() => {\n\t\t\t\t\t\t\tif (currentSrc.current === src) {\n\t\t\t\t\t\t\t\tsetImage(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t\tsetImage(null)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [src, image]);\n\n\tuseEffect(() => {\n\t\tif (image) {\n\t\t\tsetLoaded(true, () => {\n\t\t\t\tonLoad?.(image);\n\t\t\t})\n\t\t}\n\t}, [image])\n\n\treturn {\n\t\tisLoading() {\n\t\t\treturn loading;\n\t\t},\n\t\tisLoaded() {\n\t\t\treturn loaded\n\t\t},\n\t\tgetImage() {\n\t\t\treturn image;\n\t\t},\n\t\tsetImage,\n\t};\n}\n", "import { useEffect, useRef } from 'react';\n\nexport const useWindowResize = (callback: (...args: unknown[]) => void) => {\n\tconst callbackRef = useRef<Function>(callback);\n\n\tconst internalCallback = () => {\n\t\tif (callbackRef.current) {\n\t\t\tcallbackRef.current();\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tcallbackRef.current = callback;\n\t}, [callback]);\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', internalCallback);\n\t\twindow.addEventListener('orientationchange', internalCallback);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', internalCallback);\n\t\t\twindow.removeEventListener('orientationchange', internalCallback);\n\t\t};\n\t}, []);\n};\n", "import { useLayoutEffect, useState } from 'react';\n\ninterface CropperInstance {\n\thasInteractions: () => boolean;\n\treconcileState: () => void;\n}\n\nexport function useCropperAutoReconcile(cropper: CropperInstance, enabled = true) {\n\tconst [active, setActive] = useState(enabled);\n\n\tuseLayoutEffect(() => {\n\t\tif (active && !cropper.hasInteractions()) {\n\t\t\tcropper.reconcileState();\n\t\t}\n\t});\n\n\treturn {\n\t\tpause() {\n\t\t\tsetActive(false);\n\t\t},\n\t\tresume() {\n\t\t\tsetActive(true);\n\t\t},\n\t};\n}\n", "import { useImperativeHandle, useRef } from 'react';\nimport {\n\tAbstractCropperInstanceCallbacks,\n\tAbstractCropperInstanceParameters,\n\tCropperImage,\n\tDrawOptions,\n} from 'advanced-cropper';\nimport { StretchableBoundaryMethods } from '../components/service/StretchableBoundary';\nimport { CropperCanvasMethods } from '../components/service/CropperCanvas';\nimport { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperRef, AbstractCropperSettings } from '../components/AbstractCropper';\nimport { useStateWithCallback } from './useStateWithCallback';\nimport { CropperInstanceSettingsProp, useCropperInstance } from './useCropperInstance';\nimport { useCropperImage } from './useCropperImage';\nimport { useWindowResize } from './useWindowResize';\nimport { useUpdateEffect } from './useUpdateEffect';\nimport { useCropperAutoReconcile } from './useCropperAutoReconcile';\n\nexport interface AbstractCropperHookProps<Settings extends AbstractCropperSettings>\n\textends AbstractCropperInstanceParameters<Settings>,\n\t\tAbstractCropperInstanceCallbacks<AbstractCropperRef<Settings>> {\n\tsrc?: string | null;\n\tcheckOrientation?: boolean;\n\tcanvas?: boolean;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tonReady?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonError?: (cropper: AbstractCropperRef<Settings>) => void;\n\tonUpdate?: (cropper: AbstractCropperRef<Settings>) => void;\n\tunloadTime?: number;\n\tautoReconcileState?: boolean;\n\tsettings?: CropperInstanceSettingsProp<Settings>;\n}\n\nexport function useAbstractCropper<Extension extends SettingsExtension = {}>(\n\tprops: () => AbstractCropperHookProps<ExtendedSettings<Extension>>,\n) {\n\tconst {\n\t\tsrc,\n\t\tonReady,\n\t\tonError,\n\t\tonUpdate,\n\t\tcanvas = true,\n\t\tunloadTime = 500,\n\t\tcrossOrigin = true,\n\t\tcheckOrientation = true,\n\t\tautoReconcileState = true,\n\t} = props();\n\n\tconst imageRef = useRef<HTMLElement>(null);\n\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\tconst canvasRef = useRef<CropperCanvasMethods>(null);\n\tconst cropperRef = useRef<AbstractCropperRef<ExtendedSettings<Extension>>>(null);\n\n\tconst [currentImage, setCurrentImage] = useStateWithCallback<CropperImage | null>(null);\n\n\tconst cropper = useCropperInstance(() => ({\n\t\t...props(),\n\t\tgetInstance() {\n\t\t\treturn cropperRef.current;\n\t\t},\n\t}));\n\n\tconst cropperImage = useCropperImage({\n\t\tsrc,\n\t\tcrossOrigin,\n\t\tcheckOrientation,\n\t\tunloadTime,\n\t\tcanvas,\n\t\tonError() {\n\t\t\tif (cropperRef.current) {\n\t\t\t\tonError?.(cropperRef.current);\n\t\t\t}\n\t\t},\n\t});\n\n\tconst autoReconcile = useCropperAutoReconcile(cropper, autoReconcileState);\n\n\tconst resetCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tsetCurrentImage(image, () => {\n\t\t\t\tif (boundary && image) {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t} else {\n\t\t\t\t\tcropper.clear();\n\t\t\t\t}\n\t\t\t});\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\n\tconst refreshCropper = async () => {\n\t\tif (boundaryRef.current) {\n\t\t\tautoReconcile.pause();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tconst boundary = await boundaryRef.current?.stretchTo(image);\n\t\t\tif (boundary && image) {\n\t\t\t\tconst state = cropper.getState();\n\t\t\t\tif (state) {\n\t\t\t\t\tif (boundary.width !== state.boundary.width || boundary.height !== state.boundary.height) {\n\t\t\t\t\t\tcropper.setBoundary(boundary);\n\t\t\t\t\t\t// It's important because, probably, after the boundary reset\n\t\t\t\t\t\t// the cropper can meet some restrictions that were broken before\n\t\t\t\t\t\tcropper.reconcileState();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcropper.reset(boundary, image);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcropper.clear();\n\t\t\t}\n\t\t\tautoReconcile.resume();\n\t\t}\n\t};\n\tconst cropperInterface = {\n\t\treset: () => resetCropper(),\n\t\trefresh: () => refreshCropper(),\n\t\tsetImage: (image: CropperImage) => setCurrentImage(image),\n\t\treconcileState: cropper.reconcileState,\n\t\tmoveCoordinates: cropper.moveCoordinates,\n\t\tmoveCoordinatesEnd: cropper.moveCoordinatesEnd,\n\t\tresizeCoordinates: cropper.resizeCoordinates,\n\t\tclear: cropper.clear,\n\t\tresizeCoordinatesEnd: cropper.resizeCoordinatesEnd,\n\t\tmoveImage: cropper.moveImage,\n\t\tflipImage: cropper.flipImage,\n\t\tzoomImage: cropper.zoomImage,\n\t\trotateImage: cropper.rotateImage,\n\t\ttransformImage: cropper.transformImage,\n\t\ttransformImageEnd: cropper.transformImageEnd,\n\t\tsetCoordinates: cropper.setCoordinates,\n\t\tsetVisibleArea: cropper.setVisibleArea,\n\t\tstartTransitions: cropper.startTransitions,\n\t\tsetState: cropper.setState,\n\t\thasInteractions: cropper.hasInteractions,\n\t\tgetStencilCoordinates: cropper.getStencilCoordinates,\n\t\tgetCoordinates: cropper.getCoordinates,\n\t\tgetVisibleArea: cropper.getVisibleArea,\n\t\tgetTransforms: cropper.getTransforms,\n\t\tgetTransitions: cropper.getTransitions,\n\t\tgetInteractions: cropper.getInteractions,\n\t\tgetSettings: cropper.getSettings,\n\t\tgetState: cropper.getState,\n\t\tgetDefaultState() {\n\t\t\tconst state = cropper.getState();\n\t\t\tconst image = cropperImage.getImage();\n\t\t\tif (state && image) {\n\t\t\t\treturn cropper.createDefaultState(state.boundary, image);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetCanvas: (options?: DrawOptions) => {\n\t\t\tconst state = cropper.getState();\n\t\t\tif (imageRef.current && canvasRef.current && state) {\n\t\t\t\treturn canvasRef.current.draw(state, imageRef.current, options);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tgetImage: () => {\n\t\t\treturn currentImage ? { ...currentImage } : null;\n\t\t},\n\t\tisLoading: cropperImage.isLoading,\n\t\tisLoaded: cropperImage.isLoaded,\n\t};\n\n\tuseWindowResize(() => {\n\t\trefreshCropper();\n\t});\n\n\tuseUpdateEffect(() => {\n\t\tresetCropper();\n\t}, [cropperImage.getImage()]);\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current && currentImage) {\n\t\t\tonReady?.(cropperRef.current);\n\t\t}\n\t}, [currentImage])\n\n\tuseUpdateEffect(() => {\n\t\tif (cropperRef.current) {\n\t\t\tonUpdate?.(cropperRef.current);\n\t\t}\n\t}, [cropperImage.isLoaded(), cropperImage.isLoading()]);\n\n\tuseImperativeHandle(cropperRef, () => cropperInterface);\n\n\treturn {\n\t\tcropper: cropperInterface,\n\t\trefs: {\n\t\t\timage: imageRef,\n\t\t\tboundary: boundaryRef,\n\t\t\tcanvas: canvasRef,\n\t\t},\n\t\timage: currentImage,\n\t};\n}\n", "import React, { ReactNode, forwardRef, useImperativeHandle, useRef, CSSProperties } from 'react';\nimport cn from 'classnames';\nimport {\n\tBoundarySizeAlgorithm,\n\tSize,\n\tstretchCropperBoundary,\n\tBoundaryStretchAlgorithm,\n\tfillBoundary,\n} from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tstretcherClassName?: string;\n\tcontentClassName?: string;\n\tstretchAlgorithm?: BoundaryStretchAlgorithm;\n\tsizeAlgorithm?: BoundarySizeAlgorithm;\n\tchildren?: ReactNode;\n}\n\nexport interface StretchableBoundaryMethods {\n\tstretchTo: (size: Size | null) => Promise<Size | null>;\n\treset: () => void;\n}\n\nexport const StretchableBoundary = forwardRef(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tstyle,\n\t\t\tstretcherClassName,\n\t\t\tcontentClassName,\n\t\t\tstretchAlgorithm = stretchCropperBoundary,\n\t\t\tsizeAlgorithm = fillBoundary,\n\t\t\tchildren,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst stretcherRef = useRef<HTMLDivElement>(null);\n\t\tconst boundaryRef = useRef<HTMLDivElement>(null);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\treset: () => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tif (stretcher) {\n\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t}\n\t\t\t},\n\t\t\tstretchTo: (size: Size | null) => {\n\t\t\t\tconst stretcher = stretcherRef.current;\n\t\t\t\tconst boundary = boundaryRef.current;\n\n\t\t\t\tif (size?.width && size?.height && stretcher && boundary) {\n\t\t\t\t\tstretchAlgorithm(boundary, stretcher, size);\n\t\t\t\t\tconst result = sizeAlgorithm(boundary, size);\n\t\t\t\t\treturn Promise.resolve(result.width && result.height ? result : null);\n\t\t\t\t} else {\n\t\t\t\t\tif (stretcher) {\n\t\t\t\t\t\tstretcher.style.height = '';\n\t\t\t\t\t\tstretcher.style.width = '';\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t},\n\t\t}));\n\n\t\treturn (\n\t\t\t<div ref={boundaryRef} style={style} className={cn('advanced-cropper-boundary', className)}>\n\t\t\t\t<div ref={stretcherRef} className={cn(['advanced-cropper-boundary__stretcher', stretcherClassName])} />\n\t\t\t\t<div className={cn(['advanced-cropper-boundary__content', contentClassName])}>{children}</div>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\nStretchableBoundary.displayName = 'StretchableBoundary';\n", "import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\n\ninterface Props {\n\tvisible?: unknown;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperFade: FC<Props> = ({ visible, className, style, children }) => {\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={cn(className, 'advanced-cropper-fade', Boolean(visible) && 'advanced-cropper-fade--visible')}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n", "import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperState } from 'advanced-cropper';\nimport { CropperFade } from './CropperFade';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n}\n\nexport const CropperWrapper: FC<CropperWrapperProps> = ({ cropper, children, className, style }) => {\n\tconst state = cropper ? cropper.getState() : null;\n\tconst loaded = cropper ? cropper.isLoaded() : false;\n\treturn (\n\t\t<div className={cn(className, 'advanced-cropper-wrapper')} style={style}>\n\t\t\t<CropperFade visible={state && loaded} className={'advanced-cropper-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n", "import { MouseEvent } from 'react';\n\nexport function preventDefault(e: MouseEvent) {\n\te.preventDefault();\n}\n", "import React, { CSSProperties, forwardRef } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, getBackgroundStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperBackgroundImageProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperBackgroundImage = forwardRef<HTMLImageElement, CropperBackgroundImageProps>(\n\t({ className, style, cropper, crossOrigin = true }: CropperBackgroundImageProps, ref) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst image = cropper.getImage();\n\n\t\tconst transformStyles = image && state ? getBackgroundStyle(image, state, transitions) : {};\n\n\t\tconst src = image ? image.src : undefined;\n\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\t\tsrc={src}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\tstyle={{\n\t\t\t\t\t...transformStyles,\n\t\t\t\t\t...style,\n\t\t\t\t}}\n\t\t\t\tonMouseDown={preventDefault}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperBackgroundImage.displayName = 'CropperBackgroundImage';\n", "import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { CropperState, DrawOptions, drawCroppedArea } from 'advanced-cropper';\n\nexport interface CropperCanvasMethods {\n\tdraw: (state: CropperState, image: HTMLElement, options?: DrawOptions) => HTMLCanvasElement | null;\n}\n\nexport const CropperCanvas = forwardRef((_, ref) => {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\tconst spareCanvasRef = useRef<HTMLCanvasElement>(null);\n\n\tuseImperativeHandle(ref, () => ({\n\t\tdraw: (state: CropperState, image: HTMLElement, options: DrawOptions = {}) => {\n\t\t\tif (image && canvasRef.current && spareCanvasRef.current) {\n\t\t\t\treturn drawCroppedArea(\n\t\t\t\t\tstate,\n\t\t\t\t\timage as HTMLImageElement | HTMLCanvasElement,\n\t\t\t\t\tcanvasRef.current,\n\t\t\t\t\tspareCanvasRef.current,\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t}));\n\n\treturn (\n\t\t<>\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={canvasRef} />\n\t\t\t<canvas className=\"advanced-cropper-canvas\" ref={spareCanvasRef} />\n\t\t</>\n\t);\n});\n\nCropperCanvas.displayName = 'CropperCanvas';\n", "import React, { ReactNode, Component, RefObject, createRef } from 'react';\nimport cn from 'classnames';\nimport { MoveDirections, Point, SimpleTouch, distance } from 'advanced-cropper';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => void;\n\tonMoveEnd?: () => void;\n\tonMoveStart?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tuseAnchor?: boolean;\n\tactivationDistance?: number;\n}\n\nexport class DraggableElement extends Component<Props> {\n\ttouches: SimpleTouch[];\n\tstarted: boolean;\n\thovered: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\n\tstatic defaultProps = {\n\t\tdisabled: false,\n\t\tactivationDistance: 30,\n\t\tuseAnchor: true,\n\t\trerender: true,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\n\t\tthis.touches = [];\n\t\tthis.hovered = false;\n\t\tthis.started = false;\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t}\n\n\tprocessMove = (e: MouseEvent | TouchEvent, newTouches: SimpleTouch[]) => {\n\t\tconst container = this.container.current;\n\n\t\tif (container && this.touches.length) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\n\t\t\t\tif (this.props.onMove) {\n\t\t\t\t\tconst movingToAnchor = {\n\t\t\t\t\t\tleft:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientX - this.anchor.left - left) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientX - this.anchor.left - left),\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tMath.abs(newTouches[0].clientY - this.anchor.top - top) <\n\t\t\t\t\t\t\tMath.abs(this.touches[0].clientY - this.anchor.top - top),\n\t\t\t\t\t};\n\n\t\t\t\t\tconst direction = {\n\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.left) {\n\t\t\t\t\t\tdirection.left = newTouches[0].clientX - this.touches[0].clientX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.props.useAnchor || !movingToAnchor.top) {\n\t\t\t\t\t\tdirection.top = newTouches[0].clientY - this.touches[0].clientY;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.props?.onMove(direction, e);\n\n\t\t\t\t\tthis.touches = [...newTouches];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onMoveEnd, onLeave } = this.props;\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tonMoveEnd?.();\n\t\t}\n\t\tif (this.hovered) {\n\t\t\tonLeave?.();\n\t\t\tthis.hovered = false;\n\t\t}\n\t\tthis.touches = [];\n\t};\n\n\tinitAnchor = (touch: SimpleTouch) => {\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tconst { left, top } = container.getBoundingClientRect();\n\t\t\tthis.anchor = {\n\t\t\t\tleft: touch.clientX - left,\n\t\t\t\ttop: touch.clientY - top,\n\t\t\t};\n\t\t}\n\t};\n\n\tonMouseOver = () => {\n\t\tconst { onEnter, disabled } = this.props;\n\t\tif (!this.hovered && !disabled) {\n\t\t\tthis.hovered = true;\n\t\t\tonEnter?.();\n\t\t}\n\t};\n\n\tonMouseLeave = () => {\n\t\tconst { onLeave } = this.props;\n\t\tif (this.hovered && !this.touches.length) {\n\t\t\tthis.hovered = false;\n\t\t\tonLeave?.();\n\t\t}\n\t};\n\n\tonTouchStart = (e: TouchEvent) => {\n\t\tconst { onEnter, onMoveStart, disabled } = this.props;\n\t\tif (e.cancelable) {\n\t\t\tthis.touches = Array.from(e.touches);\n\n\t\t\tconst shouldStartMove = !disabled && e.touches.length === 1;\n\t\t\tif (shouldStartMove) {\n\t\t\t\tthis.touches = Array.from(e.touches);\n\t\t\t\tonMoveStart?.();\n\t\t\t}\n\n\t\t\tif (!this.hovered && !disabled) {\n\t\t\t\tthis.hovered = true;\n\t\t\t\tonEnter?.();\n\t\t\t}\n\n\t\t\tif (this.started || shouldStartMove) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t}\n\t};\n\n\tonTouchEnd = () => {\n\t\tthis.started = false;\n\t\tthis.processEnd();\n\t};\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.touches.length >= 1) {\n\t\t\tif (this.started) {\n\t\t\t\tthis.processMove(e, Array.from(e.touches));\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t} else if (\n\t\t\t\tdistance(\n\t\t\t\t\t{ left: this.touches[0].clientX, top: this.touches[0].clientY },\n\t\t\t\t\t{ left: e.touches[0].clientX, top: e.touches[0].clientY },\n\t\t\t\t) > (this.props.activationDistance || 0)\n\t\t\t) {\n\t\t\t\tthis.initAnchor({\n\t\t\t\t\tclientX: e.touches[0].clientX,\n\t\t\t\t\tclientY: e.touches[0].clientY,\n\t\t\t\t});\n\t\t\t\tthis.started = true;\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (e: MouseEvent) => {\n\t\tconst { onMoveStart, disabled } = this.props;\n\t\tif (!disabled && e.button === 0) {\n\t\t\tconst touch = {\n\t\t\t\tclientX: e.clientX,\n\t\t\t\tclientY: e.clientY,\n\t\t\t};\n\t\t\tthis.touches = [touch];\n\t\t\tthis.initAnchor(touch);\n\t\t\te.stopPropagation();\n\t\t\tonMoveStart?.();\n\t\t}\n\t};\n\n\tonMouseMove = (e: MouseEvent) => {\n\t\tif (!this.props.disabled && this.touches.length) {\n\t\t\tthis.processMove(e, [\n\t\t\t\t{\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t},\n\t\t\t]);\n\t\t\tif (e.preventDefault && e.cancelable) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.processEnd();\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: Readonly<Props>) {\n\t\tif (this.props.disabled && !prevProps.disabled) {\n\t\t\tthis.touches = [];\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn('advanced-cropper-draggable-element', className)}\n\t\t\t\tref={this.container}\n\t\t\t\tonMouseOver={this.onMouseOver}\n\t\t\t\tonMouseLeave={this.onMouseLeave}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n", "import React, { ReactNode } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tchildren?: ReactNode;\n\tonDrag?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\tposition?: HorizontalCardinalDirection | VerticalCardinalDirection;\n}\n\nexport const LineWrapper = ({\n\tposition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n}: Props) => {\n\treturn (\n\t\t<DraggableElement\n\t\t\tclassName={cn([\n\t\t\t\t'advanced-cropper-line-wrapper',\n\t\t\t\tposition && `advanced-cropper-line-wrapper--${position}`,\n\t\t\t\tdisabled && `advanced-cropper-line-wrapper--disabled`,\n\t\t\t\tclassName,\n\t\t\t])}\n\t\t\tdisabled={disabled}\n\t\t\tonMove={onDrag}\n\t\t\tonMoveEnd={onDragEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t\tactivationDistance={0}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn([\n\t\t\t\t\t'advanced-cropper-line-wrapper__content',\n\t\t\t\t\tposition && `advanced-cropper-line-wrapper__content--${position}`,\n\t\t\t\t])}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</DraggableElement>\n\t);\n};\n", "import React, { useState } from 'react';\nimport cn from 'classnames';\nimport { CardinalDirection, MoveDirections } from 'advanced-cropper';\nimport { LineWrapper } from '../service/LineWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\tposition?: CardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (directions: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleLine = ({\n\tposition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<LineWrapper\n\t\t\tclassName={cn('advanced-cropper-simple-line-wrapper', wrapperClassName, {\n\t\t\t\t[`advanced-cropper-simple-line-wrapper--${position}`]: !!position,\n\t\t\t})}\n\t\t\tposition={position}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-line',\n\t\t\t\t\thover && 'advanced-cropper-simple-line--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-line--${position}`]: !!position,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</LineWrapper>\n\t);\n};\n", "import React, { CSSProperties, ReactNode } from 'react';\nimport classnames from 'classnames';\nimport {\n\tHorizontalCardinalDirection,\n\tMoveDirections,\n\tVerticalCardinalDirection,\n\tgetDirectionNames,\n} from 'advanced-cropper';\nimport { DraggableElement } from './DraggableElement';\n\ninterface Props {\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n\tonDrag?: (shift: MoveDirections, event: MouseEvent | TouchEvent) => void;\n\tonDragEnd?: () => void;\n\tonLeave?: () => void;\n\tonEnter?: () => void;\n\tdisabled?: boolean;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tverticalPosition?: VerticalCardinalDirection;\n}\n\nexport const HandlerWrapper = ({\n\thorizontalPosition,\n\tverticalPosition,\n\tclassName,\n\tdisabled,\n\tonDrag,\n\tonDragEnd,\n\tonLeave,\n\tonEnter,\n\tchildren,\n\tstyle,\n}: Props) => {\n\tconst position =\n\t\thorizontalPosition || verticalPosition\n\t\t\t? getDirectionNames(horizontalPosition, verticalPosition).snakeCase\n\t\t\t: null;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tclassName={classnames(\n\t\t\t\tclassName,\n\t\t\t\t'advanced-cropper-handler-wrapper',\n\t\t\t\tposition && `advanced-cropper-handler-wrapper--${position}`,\n\t\t\t\tdisabled && 'advanced-cropper-handler-wrapper--disabled',\n\t\t\t)}\n\t\t>\n\t\t\t<DraggableElement\n\t\t\t\tclassName={'advanced-cropper-handler-wrapper__draggable'}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonMove={onDrag}\n\t\t\t\tonMoveEnd={onDragEnd}\n\t\t\t\tonLeave={onLeave}\n\t\t\t\tonEnter={onEnter}\n\t\t\t\tactivationDistance={0}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DraggableElement>\n\t\t</div>\n\t);\n};\n", "import React, { CSSProperties, useState } from 'react';\nimport cn from 'classnames';\nimport { HorizontalCardinalDirection, MoveDirections, VerticalCardinalDirection } from 'advanced-cropper';\nimport { HandlerWrapper } from '../service/HandlerWrapper';\n\ninterface Props {\n\tdefaultClassName?: string;\n\thoverClassName?: string;\n\twrapperClassName?: string;\n\twrapperStyle?: CSSProperties;\n\tverticalPosition?: VerticalCardinalDirection;\n\thorizontalPosition?: HorizontalCardinalDirection;\n\tdisabled?: boolean;\n\tonMove?: (shift: MoveDirections, event: TouchEvent | MouseEvent) => void;\n\tonMoveEnd?: () => void;\n}\n\nexport const SimpleHandler = ({\n\tverticalPosition,\n\thorizontalPosition,\n\thoverClassName,\n\twrapperClassName,\n\tdefaultClassName,\n\twrapperStyle,\n\tdisabled,\n\tonMove,\n\tonMoveEnd,\n}: Props) => {\n\tconst [hover, setHover] = useState(false);\n\n\tconst onEnter = () => {\n\t\tsetHover(true);\n\t};\n\n\tconst onLeave = () => {\n\t\tsetHover(false);\n\t};\n\n\treturn (\n\t\t<HandlerWrapper\n\t\t\tstyle={wrapperStyle}\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-simple-handler-wrapper',\n\t\t\t\twrapperClassName,\n\t\t\t\tverticalPosition && `advanced-cropper-simple-handler-wrapper--${verticalPosition}`,\n\t\t\t\thorizontalPosition && `advanced-cropper-simple-handler-wrapper--${horizontalPosition}`,\n\t\t\t\thorizontalPosition &&\n\t\t\t\t\tverticalPosition &&\n\t\t\t\t\t`advanced-cropper-simple-handler-wrapper--${horizontalPosition}-${verticalPosition}`,\n\t\t\t\thover && 'advanced-cropper-simple-handler-wrapper--hover',\n\t\t\t)}\n\t\t\tverticalPosition={verticalPosition}\n\t\t\thorizontalPosition={horizontalPosition}\n\t\t\tdisabled={disabled}\n\t\t\tonDrag={onMove}\n\t\t\tonDragEnd={onMoveEnd}\n\t\t\tonLeave={onLeave}\n\t\t\tonEnter={onEnter}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'advanced-cropper-simple-handler',\n\t\t\t\t\thover && 'advanced-cropper-simple-handler--hover',\n\t\t\t\t\tdefaultClassName,\n\t\t\t\t\thover && hoverClassName,\n\t\t\t\t\t{\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${verticalPosition}`]: !!verticalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}`]: !!horizontalPosition,\n\t\t\t\t\t\t[`advanced-cropper-simple-handler--${horizontalPosition}-${verticalPosition}`]:\n\t\t\t\t\t\t\thorizontalPosition && verticalPosition,\n\t\t\t\t\t},\n\t\t\t\t)}\n\t\t\t/>\n\t\t</HandlerWrapper>\n\t);\n};\n", "import React, { useMemo, ReactNode, CSSProperties, useState, FC } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tHorizontalCardinalDirection,\n\tVerticalCardinalDirection,\n\tMoveDirections,\n\tResizeOptions,\n\tgetDirectionNames,\n\tisCardinalDirection,\n\tisObject,\n\tCoordinates,\n\tResizeAnchor,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\n\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null] as const;\nconst VERTICAL_DIRECTIONS = ['south', 'north', null] as const;\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface Props {\n\tstyle?: CSSProperties;\n\tclassName?: string;\n\thandlerComponent?: HandlerComponent;\n\thandlers?: boolean | Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: boolean | Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tdisabled?: boolean;\n\tonResize?: (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => void;\n\tonResizeEnd?: () => void;\n\tchildren?: ReactNode;\n\treference?: Coordinates | null;\n}\n\ninterface HandlerNode {\n\tname: OrdinalDirection;\n\tcomponent: HandlerComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\tcontainerClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface LineNode {\n\tname: CardinalDirection;\n\tcomponent: LineComponent;\n\tclassName: string;\n\twrapperClassName?: string;\n\thoverClassName?: string;\n\tstyle?: CSSProperties;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n\tdisabled: boolean;\n}\n\ninterface PointNode {\n\tname: OrdinalDirection;\n\tclassName: string;\n\tverticalPosition: VerticalCardinalDirection | null;\n\thorizontalPosition: HorizontalCardinalDirection | null;\n}\n\nexport const BoundingBox = ({\n\tstyle,\n\tclassName,\n\tchildren,\n\tonResize,\n\tonResizeEnd,\n\thandlerComponent = SimpleHandler,\n\thandlers = {\n\t\teastNorth: true,\n\t\tnorth: true,\n\t\twestNorth: true,\n\t\twest: true,\n\t\twestSouth: true,\n\t\tsouth: true,\n\t\teastSouth: true,\n\t\teast: true,\n\t},\n\thandlerClassNames = {},\n\thandlerWrapperClassNames = {},\n\tlines = {\n\t\twest: true,\n\t\tnorth: true,\n\t\teast: true,\n\t\tsouth: true,\n\t},\n\tlineComponent = SimpleLine,\n\tlineClassNames = {},\n\tlineWrapperClassNames = {},\n\tdisabled = false,\n\treference = null,\n}: Props) => {\n\tconst [lastReference, setLastReference] = useState<Coordinates | null>(null);\n\n\tconst points = useMemo(() => {\n\t\tconst result: PointNode[] = [];\n\t\tHORIZONTAL_DIRECTIONS.forEach((hDirection) => {\n\t\t\tVERTICAL_DIRECTIONS.forEach((vDirection) => {\n\t\t\t\tif (hDirection !== vDirection) {\n\t\t\t\t\tlet { snakeCase, camelCase } = getDirectionNames(hDirection, vDirection);\n\t\t\t\t\tif (snakeCase && camelCase) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\tname: camelCase,\n\t\t\t\t\t\t\tclassName: snakeCase,\n\t\t\t\t\t\t\tverticalPosition: vDirection,\n\t\t\t\t\t\t\thorizontalPosition: hDirection,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn result;\n\t}, []);\n\n\tconst lineNodes = useMemo(() => {\n\t\tconst result: LineNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isCardinalDirection(point.name) && (isObject(lines) ? lines[point.name] : lines)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: lineComponent,\n\t\t\t\t\tclassName: cn(\n\t\t\t\t\t\tlineClassNames.default,\n\t\t\t\t\t\tlineClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__line--${point.name}`,\n\t\t\t\t\t\tlineWrapperClassNames.default,\n\t\t\t\t\t\tlineWrapperClassNames[point.name],\n\t\t\t\t\t\tdisabled && lineWrapperClassNames.disabled,\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: lineClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, lines, lineComponent, lineClassNames, lineWrapperClassNames, disabled]);\n\n\tconst handlerNodes = useMemo(() => {\n\t\tconst result: HandlerNode[] = [];\n\t\tpoints.forEach((point) => {\n\t\t\tif (isObject(handlers) ? handlers[point.name] : handlers) {\n\t\t\t\tresult.push({\n\t\t\t\t\tname: point.name,\n\t\t\t\t\tcomponent: handlerComponent,\n\t\t\t\t\tclassName: cn(handlerClassNames.default, handlerClassNames[point.name]),\n\t\t\t\t\tcontainerClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler-wrapper--${point.className}`,\n\t\t\t\t\t),\n\t\t\t\t\twrapperClassName: cn(\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler`,\n\t\t\t\t\t\t`advanced-cropper-bounding-box__handler--${point.className}`,\n\t\t\t\t\t\thandlerWrapperClassNames.default,\n\t\t\t\t\t\thandlerWrapperClassNames[point.name],\n\t\t\t\t\t),\n\t\t\t\t\thoverClassName: handlerClassNames.hover,\n\t\t\t\t\tverticalPosition: point.verticalPosition,\n\t\t\t\t\thorizontalPosition: point.horizontalPosition,\n\t\t\t\t\tdisabled,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}, [points, handlers, handlerComponent, handlerClassNames, handlerWrapperClassNames, disabled]);\n\n\tconst onHandlerMove =\n\t\t(horizontalPosition: HorizontalCardinalDirection | null, verticalPosition: VerticalCardinalDirection | null) =>\n\t\t({ left, top }: MoveDirections, nativeEvent: MouseEvent | TouchEvent) => {\n\t\t\tconst directions = {\n\t\t\t\tleft,\n\t\t\t\ttop,\n\t\t\t};\n\n\t\t\tlet respectDirection: 'width' | 'height' | undefined;\n\t\t\tif (!verticalPosition && horizontalPosition) {\n\t\t\t\trespectDirection = 'width';\n\t\t\t} else if (verticalPosition && !horizontalPosition) {\n\t\t\t\trespectDirection = 'height';\n\t\t\t}\n\n\t\t\tif (!disabled) {\n\t\t\t\tif (onResize) {\n\t\t\t\t\tconst anchor = getDirectionNames(horizontalPosition, verticalPosition).camelCase;\n\t\t\t\t\tif (anchor) {\n\t\t\t\t\t\tonResize(anchor, directions, {\n\t\t\t\t\t\t\treference: lastReference || reference,\n\t\t\t\t\t\t\tpreserveAspectRatio: nativeEvent && nativeEvent.shiftKey,\n\t\t\t\t\t\t\trespectDirection,\n\t\t\t\t\t\t\tcompensate: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!lastReference) {\n\t\t\t\t\tsetLastReference(reference);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\tconst onHandlerMoveEnd = () => {\n\t\tonResizeEnd?.();\n\t\tsetLastReference(null);\n\t};\n\n\treturn (\n\t\t<div className={cn('advanced-cropper-bounding-box', className)} style={style}>\n\t\t\t{children}\n\t\t\t<div>\n\t\t\t\t{lineNodes.map((line) => (\n\t\t\t\t\t<line.component\n\t\t\t\t\t\tkey={line.name}\n\t\t\t\t\t\tdefaultClassName={line.className}\n\t\t\t\t\t\thoverClassName={line.hoverClassName}\n\t\t\t\t\t\twrapperClassName={line.wrapperClassName}\n\t\t\t\t\t\tposition={line.name}\n\t\t\t\t\t\tdisabled={line.disabled}\n\t\t\t\t\t\tonMove={onHandlerMove(line.horizontalPosition, line.verticalPosition)}\n\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{handlerNodes.map((handler) => {\n\t\t\t\t\tconst handlerElement = (\n\t\t\t\t\t\t<handler.component\n\t\t\t\t\t\t\tdefaultClassName={handler.className}\n\t\t\t\t\t\t\thoverClassName={handler.hoverClassName}\n\t\t\t\t\t\t\twrapperClassName={handler.wrapperClassName}\n\t\t\t\t\t\t\thorizontalPosition={handler.horizontalPosition}\n\t\t\t\t\t\t\tverticalPosition={handler.verticalPosition}\n\t\t\t\t\t\t\tdisabled={handler.disabled}\n\t\t\t\t\t\t\tonMove={onHandlerMove(handler.horizontalPosition, handler.verticalPosition)}\n\t\t\t\t\t\t\tonMoveEnd={onHandlerMoveEnd}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={handler.name} className={handler.containerClassName}>\n\t\t\t\t\t\t\t{handlerElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n", "import React, { FC } from 'react';\nimport classnames from 'classnames';\n\ninterface Props {\n\tclassName?: string;\n}\n\nexport const StencilOverlay: FC<Props> = ({ className, children }) => {\n\treturn <div className={classnames('advanced-cropper-stencil-overlay', className)}>{children}</div>;\n};\n", "import { CropperTransitions, Animation } from 'advanced-cropper';\nimport { useRef, useState } from 'react';\n\nexport function useTransition<T>(transitions: CropperTransitions | null = null): [(callback: (progress: number) => void) => void, boolean] {\n\tconst animation = useRef(new Animation());\n\tconst [active, setActive] = useState(false);\n\n\treturn [\n\t\t(callback: (progress: number) => void) => {\n\t\t\tif (transitions && transitions.active) {\n\t\t\t\t\tanimation.current.start({\n\t\t\t\t\t\t...transitions,\n\t\t\t\t\t\tonStart() {\n\t\t\t\t\t\t\tsetActive(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonProgress(progress) {\n\t\t\t\t\t\t\tcallback(progress);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonStop() {\n\t\t\t\t\t\t\tsetActive(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n \t\t\t} else if (!animation.current.active) {\n\t\t\t\tcallback(1);\n\t\t\t}\n\t\t},\n\t\tactive,\n\t];\n}\n", "import React, { FC, ReactNode, useLayoutEffect, useRef, useState } from 'react';\nimport { Coordinates, CropperTransitions, deepCompare, isNumber } from 'advanced-cropper';\nimport classnames from 'classnames';\nimport { useTransition } from '../../hooks/useTransition';\n\ninterface Props {\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft?: number;\n\ttop?: number;\n\tchildren?: ReactNode;\n}\n\nexport const ArtificialTransition: FC<Props> = ({ className, transitions, children, ...values }) => {\n\tconst root = useRef<HTMLDivElement>(null);\n\n\tconst transitionValues = useRef<Partial<Coordinates>>(values);\n\n\tconst [rememberedValues, setRememberedValues] = useState(values);\n\n\tconst [runTransitions, transitionsActive] = useTransition(transitions);\n\n\tuseLayoutEffect(() => {\n\t\tif (!deepCompare(rememberedValues, values)) {\n\t\t\tsetRememberedValues(values);\n\n\t\t\tconst startValues = transitionsActive\n\t\t\t\t? {\n\t\t\t\t\t\t...transitionValues.current,\n\t\t\t\t  }\n\t\t\t\t: rememberedValues;\n\n\t\t\trunTransitions((progress) => {\n\t\t\t\tconst properties = ['left', 'top', 'height', 'width'] as const;\n\n\t\t\t\tproperties.forEach((property) => {\n\t\t\t\t\tconst desiredValue = values[property];\n\t\t\t\t\tconst startValue = startValues[property];\n\n\t\t\t\t\ttransitionValues.current[property] =\n\t\t\t\t\t\tisNumber(startValue) && isNumber(desiredValue)\n\t\t\t\t\t\t\t? startValue + (desiredValue - startValue) * progress\n\t\t\t\t\t\t\t: desiredValue;\n\t\t\t\t});\n\n\t\t\t\tif (root.current) {\n\t\t\t\t\troot.current.style.width = `${transitionValues.current.width}px`;\n\t\t\t\t\troot.current.style.height = `${transitionValues.current.height}px`;\n\t\t\t\t\troot.current.style.transform = `translate3d(${transitionValues.current.left}px, ${transitionValues.current.top}px, 0px)`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [rememberedValues, transitionsActive, values.width, values.height, values.top, values.left]);\n\n\tconst currentValues = transitionsActive ? transitionValues.current : values;\n\n\tconst rootStyle = {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: `${currentValues.width}px`,\n\t\theight: `${currentValues.height}px`,\n\t\ttransform: `translate3d(${currentValues.left}px, ${currentValues.top}px, 0px)`,\n\t};\n\n\treturn (\n\t\t<div ref={root} className={classnames('advanced-cropper-artificial-transition', className)} style={rootStyle}>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n", "import React, { FC, ReactNode } from 'react';\nimport { CropperTransitions } from 'advanced-cropper';\nimport classnames from 'classnames';\n\nimport { ArtificialTransition } from './ArtificialTransition';\n\ninterface Props {\n\tchildren?: ReactNode;\n\tclassName?: string;\n\ttransitions?: CropperTransitions;\n\twidth?: number;\n\theight?: number;\n\tleft: number;\n\ttop: number;\n}\n\nexport const StencilWrapper: FC<Props> = ({ className, transitions, width, height, left, top, children }) => {\n\treturn (\n\t\t<ArtificialTransition\n\t\t\tclassName={classnames('advanced-cropper-stencil-wrapper', className)}\n\t\t\ttransitions={transitions}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t\ttop={top}\n\t\t\tleft={left}\n\t\t>\n\t\t\t{children}\n\t\t</ArtificialTransition>\n\t);\n};\n", "import React, { FC, ReactNode, useState } from 'react';\nimport cn from 'classnames';\nimport { useUpdateEffect } from '../../hooks/useUpdateEffect';\n\nexport interface StencilGridProps {\n\tvisible?: boolean;\n\tcolumns?: number;\n\trows?: number;\n\tclassName?: string;\n}\n\nexport const StencilGrid: FC<StencilGridProps> = ({ columns = 3, rows = 3, visible = false, className }) => {\n\tconst nodes: ReactNode[] = [];\n\n\tconst [currentColumns, setCurrentColumns] = useState(columns);\n\tconst [currentRows, setCurrentRows] = useState(rows);\n\n\tuseUpdateEffect(() => {\n\t\tif (visible) {\n\t\t\tsetCurrentRows(rows);\n\t\t\tsetCurrentColumns(columns);\n\t\t}\n\t}, [visible, columns, rows]);\n\n\tfor (let i = 0; i < currentRows; i++) {\n\t\tconst cells: ReactNode[] = [];\n\t\tfor (let j = 0; j < currentColumns; j++) {\n\t\t\tcells.push(\n\t\t\t\t<div\n\t\t\t\t\tkey={j}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-stencil-grid__cell',\n\t\t\t\t\t\ti === 0 && 'advanced-cropper-stencil-grid__cell--top',\n\t\t\t\t\t\ti === currentRows - 1 && 'advanced-cropper-stencil-grid__cell--bottom',\n\t\t\t\t\t\tj === 0 && 'advanced-cropper-stencil-grid__cell--left',\n\t\t\t\t\t\tj === currentColumns - 1 && 'advanced-cropper-stencil-grid__cell--right',\n\t\t\t\t\t)}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\t\tnodes.push(\n\t\t\t<div key={i} className={'advanced-cropper-stencil-grid__row'}>\n\t\t\t\t{cells}\n\t\t\t</div>,\n\t\t);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'advanced-cropper-stencil-grid',\n\t\t\t\tvisible && 'advanced-cropper-stencil-grid--visible',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{nodes}\n\t\t</div>\n\t);\n};\n", "import React, { FC, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n\tcreateAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = FC<any>;\n\ntype LineComponent = FC<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tminAspectRatio?: number;\n\tmaxAspectRatio?: number;\n\taspectRatio?: RawAspectRatio;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tgrid?: boolean;\n\tdisabled?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const RectangleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\taspectRatio,\n\t\t\tminAspectRatio,\n\t\t\tmaxAspectRatio,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\tnorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twest: true,\n\t\t\t\twestSouth: true,\n\t\t\t\tsouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t\teast: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t\tdisabled,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tconst resizeAllowed = resizable && !disabled;\n\t\tconst moveAllowed = movable && !disabled;\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: createAspectRatio(\n\t\t\t\taspectRatio || {\n\t\t\t\t\tminimum: minAspectRatio,\n\t\t\t\t\tmaximum: maxAspectRatio,\n\t\t\t\t},\n\t\t\t),\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && moveAllowed) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizeAllowed) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-rectangle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--movable': moveAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizable': resizeAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-rectangle-stencil--disabled': disabled,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-rectangle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizeAllowed}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!moveAllowed}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-rectangle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-rectangle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nRectangleStencil.displayName = 'RectangleStencil';\n", "import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { RotateImageOptions } from '../types';\n\ninterface DefinedRotateImageOptions {\n\ttouch: boolean;\n}\n\nexport function useRotateImageOptions(rotateImage: RotateImageOptions | boolean): DefinedRotateImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\trotateImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[rotateImage],\n\t);\n}\n", "import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { ScaleImageOptions } from '../types';\n\ninterface DefinedScaleImageOptions {\n\ttouch: boolean;\n\twheel:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n}\n\nexport function useScaleImageOptions(scaleImage: ScaleImageOptions | boolean): DefinedScaleImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tscaleImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\twheel: {\n\t\t\t\t\t\tratio: 0.1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\twheel: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[scaleImage],\n\t);\n}\n", "import { useMemo } from 'react';\nimport { getOptions } from 'advanced-cropper';\nimport { MoveImageOptions } from '../types';\n\ninterface DefinedMoveImageOptions {\n\ttouch: boolean;\n\tmouse: boolean;\n}\n\nexport function useMoveImageOptions(moveImage: MoveImageOptions | boolean): DefinedMoveImageOptions {\n\treturn useMemo(\n\t\t() =>\n\t\t\tgetOptions(\n\t\t\t\tmoveImage,\n\t\t\t\t{\n\t\t\t\t\ttouch: true,\n\t\t\t\t\tmouse: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttouch: false,\n\t\t\t\t\tmouse: false,\n\t\t\t\t},\n\t\t\t),\n\t\t[moveImage],\n\t);\n}\n", "import React, { ReactNode, CSSProperties, Component, RefObject, createRef } from 'react';\nimport {\n\tdebounce,\n\tDebouncedFunction,\n\tImageTransform,\n\tPoint,\n\tSimpleTouch,\n\ttouchesToImageTransform,\n\twheelEventToImageTransform,\n} from 'advanced-cropper';\n\ninterface Props {\n\tonTransform?: (transform: ImageTransform) => void;\n\tonTransformEnd?: () => void;\n\tonEvent?: (transformEvent: TransformableImageEvent, nativeEvent: Event) => unknown;\n\tdisabled?: boolean;\n\ttouchMove?: boolean;\n\tmouseMove?: boolean;\n\ttouchScale?: boolean;\n\ttouchRotate?: boolean;\n\twheelScale?:\n\t\t| boolean\n\t\t| {\n\t\t\t\tratio: number;\n\t\t  };\n\ttimeout?: number;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tpreventDefault?: boolean;\n}\n\nexport class TransformableImageEvent {\n\tconstructor({ active }: { active: boolean }) {\n\t\tthis.active = active;\n\t\tthis.defaultPrevented = false;\n\t}\n\tpreventDefault() {\n\t\tthis.defaultPrevented = true;\n\t}\n\tdefaultPrevented: boolean;\n\tactive: boolean;\n}\n\nexport class TransformableImage extends Component<Props> {\n\ttouches: (SimpleTouch & { identifier?: number })[];\n\ttransforming: boolean;\n\tanchor: Point;\n\tcontainer: RefObject<HTMLDivElement>;\n\tdebouncedProcessEnd: DebouncedFunction<TransformableImage['processEnd']>;\n\n\tstatic defaultProps = {\n\t\ttouchMove: true,\n\t\tmouseMove: true,\n\t\ttouchScale: true,\n\t\ttouchRotate: false,\n\t\twheelScale: true,\n\t\ttimeout: 500,\n\t};\n\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.transforming = false;\n\t\tthis.touches = [];\n\t\tthis.anchor = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t};\n\t\tthis.container = createRef();\n\t\tthis.debouncedProcessEnd = debounce(this.processEnd, props.timeout);\n\t}\n\n\tprocessMove = (newTouches: SimpleTouch[]) => {\n\t\tconst { onTransform, touchScale, touchMove, touchRotate } = this.props;\n\t\tconst container = this.container.current;\n\t\tif (container && onTransform) {\n\t\t\tonTransform(\n\t\t\t\ttouchesToImageTransform(newTouches, this.touches, container, {\n\t\t\t\t\tscale: touchScale,\n\t\t\t\t\trotate: touchRotate,\n\t\t\t\t\tmove: touchMove,\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis.touches = newTouches;\n\t\t}\n\t};\n\n\tprocessEnd = () => {\n\t\tconst { onTransformEnd } = this.props;\n\t\tif (this.transforming) {\n\t\t\tthis.transforming = false;\n\t\t\tif (onTransformEnd) {\n\t\t\t\tonTransformEnd();\n\t\t\t}\n\t\t}\n\t};\n\n\tprocessStart = () => {\n\t\tthis.transforming = true;\n\t\tthis.debouncedProcessEnd.clear();\n\t};\n\n\tprocessEvent = (nativeEvent: Event) => {\n\t\tconst { onEvent, disabled, preventDefault = true } = this.props;\n\t\tconst transformEvent = new TransformableImageEvent({ active: this.transforming });\n\n\t\tif (onEvent) {\n\t\t\tonEvent(transformEvent, nativeEvent);\n\t\t} else if (preventDefault) {\n\t\t\tnativeEvent.preventDefault();\n\t\t\tnativeEvent.stopPropagation();\n\t\t}\n\n\t\treturn !disabled && !transformEvent.defaultPrevented;\n\t};\n\n\tonWheel = (event: WheelEvent) => {\n\t\tconst { onTransform, wheelScale } = this.props;\n\t\tconst container = this.container.current;\n\n\t\tif (wheelScale) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processStart();\n\t\t\t\tif (onTransform && container) {\n\t\t\t\t\tonTransform(\n\t\t\t\t\t\twheelEventToImageTransform(event, container, wheelScale === true ? 0.1 : wheelScale.ratio),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (!this.touches.length) {\n\t\t\t\t\tthis.debouncedProcessEnd();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchStart = (event: TouchEvent) => {\n\t\tconst { touchMove, touchScale, touchRotate } = this.props;\n\t\tif (event.cancelable && (touchMove || ((touchScale || touchRotate) && event.touches.length > 1))) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst container = this.container.current;\n\t\t\t\tif (container) {\n\t\t\t\t\tconst { left, top, bottom, right } = container.getBoundingClientRect();\n\t\t\t\t\tthis.touches = Array.from(event.touches).filter(\n\t\t\t\t\t\t(touch) =>\n\t\t\t\t\t\t\ttouch.clientX > left &&\n\t\t\t\t\t\t\ttouch.clientX < right &&\n\t\t\t\t\t\t\ttouch.clientY > top &&\n\t\t\t\t\t\t\ttouch.clientY < bottom,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tonTouchEnd = (event: TouchEvent) => {\n\t\tif (event.touches.length === 0) {\n\t\t\tthis.touches = [];\n\t\t\tthis.processEnd();\n\t\t}\n\t};\n\n\tonTouchMove = (event: TouchEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tconst touches = [...event.touches].filter(\n\t\t\t\t(touch) =>\n\t\t\t\t\t!touch.identifier ||\n\t\t\t\t\tthis.touches.find((anotherTouch) => anotherTouch.identifier === touch.identifier),\n\t\t\t);\n\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove(touches);\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseDown = (event: MouseEvent) => {\n\t\tconst { mouseMove } = this.props;\n\t\tif (mouseMove && 'buttons' in event && event.buttons === 1) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tconst touch = {\n\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t};\n\t\t\t\tthis.touches = [touch];\n\t\t\t\tthis.processStart();\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseMove = (event: MouseEvent) => {\n\t\tif (this.touches.length) {\n\t\t\tif (this.processEvent(event)) {\n\t\t\t\tthis.processMove([\n\t\t\t\t\t{\n\t\t\t\t\t\tclientX: event.clientX,\n\t\t\t\t\t\tclientY: event.clientY,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t};\n\n\tonMouseUp = () => {\n\t\tthis.touches = [];\n\t\tthis.processEnd();\n\t};\n\n\tshouldComponentUpdate(): boolean {\n\t\treturn true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\tcontainer.removeEventListener('touchstart', this.onTouchStart);\n\t\t\tcontainer.removeEventListener('mousedown', this.onMouseDown);\n\t\t\tcontainer.removeEventListener('wheel', this.onWheel);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\n\n\t\tconst container = this.container.current;\n\t\tif (container) {\n\t\t\t// Add event listeners here due to https://github.com/facebook/react/issues/9809#issuecomment-414072263\n\t\t\tcontainer.addEventListener('touchstart', this.onTouchStart, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('mousedown', this.onMouseDown, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t\tcontainer.addEventListener('wheel', this.onWheel, {\n\t\t\t\tpassive: false,\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, children, style } = this.props;\n\t\treturn (\n\t\t\t<div className={className} style={style} ref={this.container}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n", "import React, { CSSProperties, ReactNode } from 'react';\nimport { CropperTransitions, ImageTransform } from 'advanced-cropper';\nimport { useRotateImageOptions } from '../../hooks/useRotateImageOptions';\nimport { useScaleImageOptions } from '../../hooks/useScaleImageOptions';\nimport { useMoveImageOptions } from '../../hooks/useMoveImageOptions';\nimport { MoveImageOptions, RotateImageOptions, ScaleImageOptions } from '../../types';\nimport { TransformableImage } from './TransformableImage';\n\ninterface DesiredCropperRef {\n\ttransformImage: (transform: ImageTransform) => void;\n\ttransformImageEnd: () => void;\n\tgetTransitions: () => CropperTransitions;\n}\n\nexport interface CropperBackgroundWrapperProps {\n\tcropper: DesiredCropperRef;\n\trotateImage?: boolean | RotateImageOptions;\n\tscaleImage?: boolean | ScaleImageOptions;\n\tmoveImage?: boolean | MoveImageOptions;\n\tchildren?: ReactNode;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\ttimeout?: number;\n\tdisabled?: boolean;\n}\n\nexport const CropperBackgroundWrapper = ({\n\tscaleImage = true,\n\tmoveImage = true,\n\trotateImage = false,\n\tchildren,\n\tclassName,\n\tstyle,\n\tcropper,\n\ttimeout,\n\tdisabled\n}: CropperBackgroundWrapperProps) => {\n\tconst transitions = cropper.getTransitions();\n\n\tconst rotateImageOptions = useRotateImageOptions(rotateImage);\n\tconst scaleImageOptions = useScaleImageOptions(scaleImage);\n\tconst moveImageOptions = useMoveImageOptions(moveImage);\n\n\treturn (\n\t\t<TransformableImage\n\t\t\tclassName={className}\n\t\t\tstyle={style}\n\t\t\tonTransform={cropper.transformImage}\n\t\t\tonTransformEnd={cropper.transformImageEnd}\n\t\t\ttouchMove={moveImageOptions.touch}\n\t\t\tmouseMove={moveImageOptions.mouse}\n\t\t\ttouchScale={scaleImageOptions.touch}\n\t\t\twheelScale={scaleImageOptions.wheel}\n\t\t\ttouchRotate={rotateImageOptions.touch}\n\t\t\tdisabled={transitions.active || disabled}\n\t\t\tpreventDefault={!disabled}\n\t\t\ttimeout={timeout}\n\t\t>\n\t\t\t{children}\n\t\t</TransformableImage>\n\t);\n};\n", "import React, { useImperativeHandle, useRef, CSSProperties, Ref } from 'react';\nimport cn from 'classnames';\nimport {\n\tDrawOptions,\n\tDefaultSettings,\n\tdefaultStencilConstraints,\n\tCoreSettings,\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tModifierSettings,\n\tInitializeSettings,\n} from 'advanced-cropper';\n\nimport {\n\tCropperBackgroundWrapperComponent,\n\tCropperWrapperComponent,\n\tStencilComponent,\n\tCropperBackgroundComponent,\n\tArbitraryProps,\n\tStencilConstraints,\n\tSettingsExtension,\n\tExtendedSettings,\n\tCustomCropperRef,\n\tCropperBoundaryComponent,\n} from '../types';\nimport { CropperStateHook, CropperInstanceSettings, CropperInstanceSettingsProp } from '../hooks/useCropperInstance';\nimport { createCropper } from '../service/cropper';\nimport { AbstractCropperHookProps, useAbstractCropper } from '../hooks/useAbstractCropper';\nimport { StretchableBoundary } from './service/StretchableBoundary';\nimport { CropperWrapper } from './service/CropperWrapper';\nimport { CropperBackgroundImage } from './service/CropperBackgroundImage';\nimport { CropperCanvas } from './service/CropperCanvas';\nimport { RectangleStencil } from './stencils/RectangleStencil';\nimport { CropperBackgroundWrapper } from './service/CropperBackgroundWrapper';\n\nexport type AbstractCropperSettingsProp<Settings extends CropperInstanceSettings> =\n\tCropperInstanceSettingsProp<Settings>;\n\nexport type AbstractCropperSettings = DefaultSettings & CoreSettings & ModifierSettings & InitializeSettings;\n\nexport interface AbstractCropperRef<Settings extends AbstractCropperSettings = AbstractCropperSettings> {\n\treset: () => void;\n\trefresh: () => void;\n\tclear: () => void;\n\tsetCoordinates: CropperStateHook['setCoordinates'];\n\tsetState: CropperStateHook['setState'];\n\tsetImage: (image: CropperImage) => void;\n\tflipImage: CropperStateHook['flipImage'];\n\tzoomImage: CropperStateHook['zoomImage'];\n\trotateImage: CropperStateHook['rotateImage'];\n\treconcileState: CropperStateHook['reconcileState'];\n\tmoveImage: CropperStateHook['moveImage'];\n\tmoveCoordinates: CropperStateHook['moveCoordinates'];\n\tmoveCoordinatesEnd: CropperStateHook['moveCoordinatesEnd'];\n\tresizeCoordinates: CropperStateHook['resizeCoordinates'];\n\tresizeCoordinatesEnd: CropperStateHook['resizeCoordinatesEnd'];\n\ttransformImage: CropperStateHook['transformImage'];\n\ttransformImageEnd: CropperStateHook['transformImageEnd'];\n\tgetCoordinates: CropperStateHook['getCoordinates'];\n\tgetVisibleArea: CropperStateHook['getVisibleArea'];\n\tgetTransforms: CropperStateHook['getTransforms'];\n\tgetStencilCoordinates: CropperStateHook['getStencilCoordinates'];\n\tgetDefaultState: () => CropperState | null;\n\tgetCanvas: (options?: DrawOptions) => HTMLCanvasElement | null;\n\tgetSettings: () => Settings;\n\tgetImage: () => CropperImage | null;\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface AbstractCropperProps<Settings extends AbstractCropperSettings>\n\textends Omit<AbstractCropperHookProps<Settings>, 'settings'> {\n\tbackgroundComponent?: CropperBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tbackgroundClassName?: string;\n\tbackgroundWrapperComponent?: CropperBackgroundWrapperComponent;\n\tbackgroundWrapperProps?: ArbitraryProps;\n\tbackgroundWrapperClassName?: string;\n\twrapperComponent?: CropperWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstencilComponent?: StencilComponent;\n\tstencilProps?: ArbitraryProps;\n\tstencilConstraints?: StencilConstraints<AbstractCropperSettingsProp<Settings>>;\n\tclassName?: string;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\tstyle?: CSSProperties;\n\tsettings: CropperInstanceSettingsProp<Settings>;\n\tdisabled?: boolean;\n}\n\nexport type AbstractCropperIntrinsicProps<Settings extends AbstractCropperSettings> = Omit<\n\tAbstractCropperProps<Settings>,\n\t'settings'\n>;\n\nconst AbstractCropperComponent = <Extension extends SettingsExtension = {}>(\n\tprops: AbstractCropperProps<ExtendedSettings<Extension>>,\n\tref: Ref<CustomCropperRef<Extension>>,\n) => {\n\tconst {\n\t\tstyle,\n\t\tclassName,\n\t\tstencilComponent = RectangleStencil,\n\t\tstencilConstraints = defaultStencilConstraints,\n\t\tstencilProps = {},\n\t\twrapperComponent = CropperWrapper,\n\t\twrapperProps = {},\n\t\tbackgroundComponent = CropperBackgroundImage,\n\t\tbackgroundProps = {},\n\t\tbackgroundClassName,\n\t\tbackgroundWrapperComponent = CropperBackgroundWrapper,\n\t\tbackgroundWrapperProps = {},\n\t\tboundaryComponent = StretchableBoundary,\n\t\tboundaryProps,\n\t\tboundaryClassName,\n\t\tcanvas = true,\n\t\tcrossOrigin = true,\n\t\tdisabled,\n\t\tsettings,\n\t\t...parameters\n\t} = props;\n\n\tconst stencilRef = useRef<StencilComponent>(null);\n\n\tconst { cropper, image, refs } = useAbstractCropper(() => ({\n\t\t...parameters,\n\t\tcrossOrigin,\n\t\tstencilProps,\n\t\tcanvas,\n\t\tsettings: {\n\t\t\t...settings,\n\t\t\t...stencilConstraints(settings, {\n\t\t\t\t...stencilProps,\n\t\t\t\t...stencilRef.current,\n\t\t\t}),\n\t\t},\n\t}));\n\n\tconst StencilComponent = stencilComponent;\n\n\tconst WrapperComponent = wrapperComponent;\n\n\tconst BackgroundWrapperComponent = backgroundWrapperComponent;\n\n\tconst BackgroundComponent = backgroundComponent;\n\n\tconst BoundaryComponent = boundaryComponent;\n\n\tuseImperativeHandle(ref, () => cropper);\n\n\tconst deprecatedWrapperProps = {\n\t\tloading: cropper.isLoading(),\n\t\tloaded: cropper.isLoaded(),\n\t};\n\n\treturn (\n\t\t<WrapperComponent\n\t\t\t{...wrapperProps}\n\t\t\tdisabled={disabled}\n\t\t\tclassName={cn('advanced-cropper', className)}\n\t\t\tcropper={cropper}\n\t\t\tstyle={style}\n\t\t\t{...deprecatedWrapperProps}\n\t\t>\n\t\t\t<BoundaryComponent\n\t\t\t\t{...boundaryProps}\n\t\t\t\tref={refs.boundary}\n\t\t\t\tclassName={cn('advanced-cropper__boundary', boundaryClassName)}\n\t\t\t>\n\t\t\t\t<BackgroundWrapperComponent\n\t\t\t\t\t{...backgroundWrapperProps}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tcropper={cropper}\n\t\t\t\t\tclassName={'advanced-cropper__background-wrapper'}\n\t\t\t\t>\n\t\t\t\t\t{cropper.getState() && (\n\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\tref={refs.image}\n\t\t\t\t\t\t\tcrossOrigin={crossOrigin}\n\t\t\t\t\t\t\tcropper={cropper}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper__background', backgroundClassName)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<StencilComponent {...stencilProps} disabled={disabled} ref={stencilRef} cropper={cropper} image={image} />\n\t\t\t\t</BackgroundWrapperComponent>\n\t\t\t\t{canvas && <CropperCanvas ref={refs.canvas} />}\n\t\t\t</BoundaryComponent>\n\t\t</WrapperComponent>\n\t);\n};\n\nexport const AbstractCropper = createCropper(AbstractCropperComponent);\n", "export const defaultSettings = [\n\t'transformImage',\n\t'moveCoordinates',\n\t'resizeCoordinates',\n\t'defaultCoordinates',\n\t'defaultVisibleArea',\n\t'areaPositionRestrictions',\n\t'areaSizeRestrictions',\n\t'sizeRestrictions',\n\t'positionRestrictions',\n\t'aspectRatio',\n\t'minWidth',\n\t'minHeight',\n\t'maxWidth',\n\t'maxHeight',\n\t'defaultSize',\n\t'defaultPosition',\n\t'defaultTransforms',\n\t'imageRestriction',\n\t'priority',\n];\n", "import { ExtendedSettings, SettingsExtension } from '../types';\nimport { AbstractCropperIntrinsicProps } from '../components/AbstractCropper';\nimport { defaultSettings } from '../service/constants';\nimport { CoreSettings, DefaultSettings, ModifierSettings } from '../../../../Advanced Cropper/advanced-cropper/dist';\n\ntype Props<Extension extends SettingsExtension> = AbstractCropperIntrinsicProps<ExtendedSettings<Extension>>;\n\nexport function useAbstractCropperProps<Extension extends SettingsExtension>(\n\tprops: Props<Extension>,\n\tsettings: string[] = defaultSettings,\n) {\n\tconst result: any = { settings: {}, props: {} };\n\n\t(Object.keys(props) as (keyof typeof props)[]).forEach((key) => {\n\t\tif (settings.some((setting) => setting === key)) {\n\t\t\tresult.settings[key] = props[key];\n\t\t} else {\n\t\t\tresult.props[key] = props[key];\n\t\t}\n\t});\n\n\treturn result as {\n\t\tsettings: Extension & Partial<DefaultSettings & CoreSettings & ModifierSettings>;\n\t\tprops: Props<Extension>;\n\t};\n}\n", "import { __assign } from 'tslib';\nimport { isFunction } from '../../utils/index.js';\nimport { aspectRatioIntersection, createAspectRatio, ratio, applyScale, fitToSizeRestrictions, applyMove, diff, getCenter, moveToPositionRestrictions, mergePositionRestrictions, coordinatesToPositionRestrictions } from '../../service/utils.js';\nimport { getAreaSizeRestrictions, getSizeRestrictions, getAspectRatio, isInitializedState, getAreaPositionRestrictions } from '../../service/helpers.js';\nimport { copyState } from '../../state/copyState.js';\nimport '../../types/index.js';\nimport '../../state/setCoordinates.js';\nimport { approximateSize } from '../../service/approximateSize.js';\nimport { defaultStencilConstraints } from '../../defaults/defaultStencilConstraints.js';\n\nfunction fixedStencilConstraints(rawSettings, stencilOptions) {\n    var defaultConstraints = defaultStencilConstraints({}, stencilOptions);\n    return {\n        stencilSize: function (state, settings) {\n            var previousSize = isFunction(rawSettings.stencilSize)\n                ? rawSettings.stencilSize(state, settings)\n                : rawSettings.stencilSize;\n            return approximateSize(__assign(__assign({}, previousSize), { aspectRatio: aspectRatioIntersection(defaultConstraints.aspectRatio, createAspectRatio(ratio(previousSize))) }));\n        },\n    };\n}\nfunction getStencilSize(state, settings) {\n    var boundary = state.boundary;\n    var size = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\n    if (size.width > boundary.width || size.height > boundary.height) {\n        size = approximateSize({\n            sizeRestrictions: {\n                maxWidth: boundary.width,\n                maxHeight: boundary.height,\n                minWidth: 0,\n                minHeight: 0,\n            },\n            width: size.width,\n            height: size.height,\n            aspectRatio: {\n                minimum: ratio(size),\n                maximum: ratio(size),\n            },\n        });\n    }\n    return size;\n}\nfunction sizeRestrictions(state, settings) {\n    var stencilSize = getStencilSize(state, __assign(__assign({}, settings), { stencilSize: settings.stencilSize }));\n    var areaRestrictions = getAreaSizeRestrictions(state, settings);\n    return {\n        maxWidth: (areaRestrictions.maxWidth * stencilSize.width) / state.boundary.width,\n        maxHeight: (areaRestrictions.maxHeight * stencilSize.height) / state.boundary.height,\n        minWidth: 0,\n        minHeight: 0,\n    };\n}\nfunction defaultSize(state, settings) {\n    var imageSize = state.imageSize, visibleArea = state.visibleArea, boundary = state.boundary;\n    var sizeRestrictions = getSizeRestrictions(state, settings);\n    var aspectRatio = getAspectRatio(state, settings);\n    var stencilSize = isFunction(settings.stencilSize) ? settings.stencilSize(state, settings) : settings.stencilSize;\n    var area = (visibleArea || imageSize);\n    var height, width;\n    if (ratio(area) > ratio(boundary)) {\n        height = (stencilSize.height * area.height) / boundary.height;\n        width = height * ratio(stencilSize);\n    }\n    else {\n        width = (stencilSize.width * area.width) / boundary.width;\n        height = width / ratio(stencilSize);\n    }\n    return approximateSize({\n        width: width,\n        height: height,\n        aspectRatio: aspectRatio,\n        sizeRestrictions: sizeRestrictions,\n    });\n}\nfunction aspectRatio(state, settings) {\n    var value = ratio(getStencilSize(state, settings));\n    return {\n        minimum: value,\n        maximum: value,\n    };\n}\nfunction fixedStencilAlgorithm(state, settings) {\n    if (isInitializedState(state)) {\n        var result = copyState(state);\n        var stencil = getStencilSize(state, settings);\n        // First of all try to resize visible area as much as possible:\n        result.visibleArea = applyScale(result.visibleArea, (result.coordinates.width * result.boundary.width) / (result.visibleArea.width * stencil.width));\n        // Check that visible area doesn't break the area restrictions:\n        var scale = fitToSizeRestrictions(result.visibleArea, getAreaSizeRestrictions(result, settings));\n        if (scale !== 1) {\n            result.visibleArea = applyScale(result.visibleArea, scale);\n            result.coordinates = applyScale(result.coordinates, scale);\n        }\n        result.visibleArea = applyMove(result.visibleArea, diff(getCenter(result.coordinates), getCenter(result.visibleArea)));\n        // Center stencil in visible area:\n        result.visibleArea = moveToPositionRestrictions(result.visibleArea, getAreaPositionRestrictions(result, settings));\n        result.coordinates = moveToPositionRestrictions(result.coordinates, mergePositionRestrictions(coordinatesToPositionRestrictions(result.visibleArea), getAreaPositionRestrictions(result, settings)));\n        return result;\n    }\n    return state;\n}\nfunction fixedStencil(state, settings, action) {\n    if (action && action.immediately) {\n        return fixedStencilAlgorithm(state, settings);\n    }\n    return state;\n}\n\nexport { aspectRatio, defaultSize, fixedStencil, fixedStencilAlgorithm, fixedStencilConstraints, getStencilSize, sizeRestrictions };\n", "import React, { forwardRef, Ref } from 'react';\nimport {\n\tdefaultSize,\n\tsizeRestrictions,\n\taspectRatio,\n\tfixedStencil,\n\tStencilSize,\n\tfixedStencilConstraints,\n} from 'advanced-cropper/extensions/stencil-size';\nimport { withDefaultSizeRestrictions } from 'advanced-cropper/defaults';\nimport { CustomCropperProps, CustomCropperRef } from '../../types';\nimport { AbstractCropper } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { defaultSettings } from '../../service/constants';\n\ntype UnavailableProps = 'sizeRestrictions' | 'aspectRatio';\n\nexport interface FixedCropperSettings {\n\tstencilSize: StencilSize<this>;\n}\n\nexport type FixedCropperProps = Omit<CustomCropperProps<FixedCropperSettings>, UnavailableProps>;\n\nexport type FixedCropperRef = CustomCropperRef<FixedCropperSettings>;\n\nexport const FixedCropper = forwardRef((props: FixedCropperProps, ref?: Ref<FixedCropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props, [...defaultSettings, 'stencilSize']);\n\treturn (\n\t\t<AbstractCropper<FixedCropperSettings>\n\t\t\tpostProcess={fixedStencil}\n\t\t\tstencilConstraints={fixedStencilConstraints}\n\t\t\t{...cropperProps.props}\n\t\t\tsettings={{\n\t\t\t\tdefaultSize,\n\t\t\t\taspectRatio,\n\t\t\t\tsizeRestrictions: withDefaultSizeRestrictions(sizeRestrictions),\n\t\t\t\t...cropperProps.settings,\n\t\t\t\ttransformImage: {\n\t\t\t\t\t...cropperProps.settings.transformImage,\n\t\t\t\t\tadjustStencil: false,\n\t\t\t\t},\n\t\t\t}}\n\t\t\tref={ref}\n\t\t/>\n\t);\n});\n\nFixedCropper.displayName = 'FixedCropper';\n", "import React, { forwardRef, Ref } from 'react';\nimport { isUndefined } from 'advanced-cropper';\nimport { StencilSize } from 'advanced-cropper/extensions/stencil-size';\nimport { CustomCropperProps, CustomCropperRef, ExtendedSettings, SettingsExtension } from '../../types';\nimport { hybridStencilAutoZoom } from '../../deprecated/hybridAutoZoom';\nimport { useDeprecationWarning } from '../../hooks/useDeprecationWarning';\nimport { AbstractCropper, AbstractCropperIntrinsicProps } from '../AbstractCropper';\nimport { useAbstractCropperProps } from '../../hooks/useAbstractCropperProps';\nimport { FixedCropper, FixedCropperRef, FixedCropperSettings } from './FixedCropper';\n\ninterface DeprecatedCropperSettings {\n\tstencilSize?: StencilSize;\n\tautoZoom?: boolean;\n}\n\nexport type CropperProps<Extension extends SettingsExtension = {}> = CustomCropperProps<Extension>;\n\nexport type CropperRef<Extension extends SettingsExtension = {}> = CustomCropperRef<Extension>;\n\nexport const Cropper = forwardRef((props: CropperProps, ref?: Ref<CropperRef>) => {\n\tconst cropperProps = useAbstractCropperProps(props);\n\n\tconst intrinsicProps = cropperProps.props;\n\n\t// Process the deprecated properties\n\tconst { stencilSize, autoZoom, ...actualSettings } = cropperProps.settings as DeprecatedCropperSettings;\n\n\tconst deprecationWarning = useDeprecationWarning();\n\n\tif (!isUndefined(autoZoom)) {\n\t\tif (intrinsicProps.postProcess || stencilSize) {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function.`,\n\t\t\t);\n\t\t} else {\n\t\t\tdeprecationWarning(\n\t\t\t\t`prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'`,\n\t\t\t);\n\t\t\tintrinsicProps.postProcess = hybridStencilAutoZoom;\n\t\t}\n\t}\n\n\tif (!isUndefined(stencilSize)) {\n\t\tdeprecationWarning(\n\t\t\t`prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead.`,\n\t\t);\n\t\treturn (\n\t\t\t<FixedCropper\n\t\t\t\tref={ref as Ref<FixedCropperRef>}\n\t\t\t\tstencilSize={stencilSize}\n\t\t\t\t{...actualSettings}\n\t\t\t\t{...(intrinsicProps as AbstractCropperIntrinsicProps<ExtendedSettings<FixedCropperSettings>>)}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <AbstractCropper {...intrinsicProps} ref={ref} settings={actualSettings} />;\n});\n\nCropper.displayName = 'CropperComponent';\n", "import React, { ComponentType, forwardRef, useImperativeHandle } from 'react';\nimport cn from 'classnames';\nimport {\n\tCardinalDirection,\n\tOrdinalDirection,\n\tCropperTransitions,\n\tCropperState,\n\tMoveDirections,\n\tResizeOptions,\n\tgetStencilCoordinates,\n\tCropperInteractions,\n\tResizeAnchor,\n\tisFunction,\n\tCoordinates,\n\tRawAspectRatio,\n} from 'advanced-cropper';\nimport { SimpleLine } from '../lines/SimpleLine';\nimport { SimpleHandler } from '../handlers/SimpleHandler';\nimport { BoundingBox } from '../service/BoundingBox';\nimport { StencilOverlay } from '../service/StencilOverlay';\nimport { DraggableArea } from '../service/DraggableArea';\nimport { StencilWrapper } from '../service/StencilWrapper';\nimport { StencilGrid } from '../service/StencilGrid';\n\ntype HandlerComponent = ComponentType<any>;\n\ntype LineComponent = ComponentType<any>;\n\ninterface HandlerClassNames extends Partial<Record<OrdinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface LineClassNames extends Partial<Record<CardinalDirection, string>> {\n\tdefault?: string;\n\tdisabled?: string;\n\thover?: string;\n}\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetInteractions: () => CropperInteractions;\n\thasInteractions: () => boolean;\n\tresizeCoordinates: (anchor: ResizeAnchor, directions: Partial<MoveDirections>, parameters: unknown) => void;\n\tresizeCoordinatesEnd: () => void;\n\tmoveCoordinates: (directions: Partial<MoveDirections>) => void;\n\tmoveCoordinatesEnd: () => void;\n}\n\ninterface Props {\n\tcropper: DesiredCropperRef;\n\tcoordinates?: Coordinates | ((state: CropperState | null) => Coordinates);\n\thandlerComponent?: HandlerComponent;\n\thandlers?: Partial<Record<OrdinalDirection, boolean>>;\n\thandlerClassNames?: HandlerClassNames;\n\thandlerWrapperClassNames?: HandlerClassNames;\n\tlines?: Partial<Record<CardinalDirection, boolean>>;\n\tlineComponent?: LineComponent;\n\tlineClassNames?: LineClassNames;\n\tlineWrapperClassNames?: LineClassNames;\n\tclassName?: string;\n\tmovingClassName?: string;\n\tresizingClassName?: string;\n\tgridClassName?: string;\n\tpreviewClassName?: string;\n\tboundingBoxClassName?: string;\n\toverlayClassName?: string;\n\tdraggableAreaClassName?: string;\n\tmovable?: boolean;\n\tresizable?: boolean;\n\tdisabled?: boolean;\n\tgrid?: boolean;\n}\n\ninterface Methods {\n\taspectRatio: RawAspectRatio;\n}\n\nexport const CircleStencil = forwardRef<Methods, Props>(\n\t(\n\t\t{\n\t\t\tcropper,\n\t\t\tcoordinates,\n\t\t\thandlerComponent = SimpleHandler,\n\t\t\thandlers = {\n\t\t\t\teastNorth: true,\n\t\t\t\twestNorth: true,\n\t\t\t\twestSouth: true,\n\t\t\t\teastSouth: true,\n\t\t\t},\n\t\t\thandlerClassNames = {},\n\t\t\thandlerWrapperClassNames = {},\n\t\t\tlines = {\n\t\t\t\twest: true,\n\t\t\t\tnorth: true,\n\t\t\t\teast: true,\n\t\t\t\tsouth: true,\n\t\t\t},\n\t\t\tlineComponent = SimpleLine,\n\t\t\tlineClassNames = {},\n\t\t\tlineWrapperClassNames = {},\n\t\t\tresizable = true,\n\t\t\tmovable = true,\n\t\t\tgrid,\n\t\t\tgridClassName,\n\t\t\tclassName,\n\t\t\tmovingClassName,\n\t\t\tresizingClassName,\n\t\t\tpreviewClassName,\n\t\t\tboundingBoxClassName,\n\t\t\toverlayClassName,\n\t\t\tdraggableAreaClassName,\n\t\t\tdisabled,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst state = cropper.getState();\n\t\tconst transitions = cropper.getTransitions();\n\t\tconst interactions = cropper.getInteractions();\n\n\t\tconst resizeAllowed = resizable && !disabled;\n\t\tconst moveAllowed = movable && !disabled;\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\taspectRatio: 1,\n\t\t\tboundingBox: 'circle',\n\t\t}));\n\n\t\tconst onMove = (directions: MoveDirections) => {\n\t\t\tif (cropper && moveAllowed) {\n\t\t\t\tcropper.moveCoordinates(directions);\n\t\t\t}\n\t\t};\n\n\t\tconst onMoveEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.moveCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst onResize = (anchor: ResizeAnchor, directions: MoveDirections, options: ResizeOptions) => {\n\t\t\tif (cropper && resizeAllowed) {\n\t\t\t\tcropper.resizeCoordinates(anchor, directions, options);\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = () => {\n\t\t\tif (cropper) {\n\t\t\t\tcropper.resizeCoordinatesEnd();\n\t\t\t}\n\t\t};\n\n\t\tconst { width, height, left, top } = coordinates\n\t\t\t? isFunction(coordinates)\n\t\t\t\t? coordinates(state)\n\t\t\t\t: coordinates\n\t\t\t: getStencilCoordinates(state);\n\n\t\treturn (\n\t\t\tstate && (\n\t\t\t\t<StencilWrapper\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t'advanced-cropper-circle-stencil',\n\t\t\t\t\t\tclassName,\n\t\t\t\t\t\tinteractions.moveCoordinates && movingClassName,\n\t\t\t\t\t\tinteractions.resizeCoordinates && resizingClassName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--movable': moveAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--moving': interactions.moveCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizable': resizeAllowed,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--resizing': interactions.resizeCoordinates,\n\t\t\t\t\t\t\t'advanced-cropper-circle-stencil--disabled': disabled,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\n\t\t\t\t\twidth={width}\n\t\t\t\t\theight={height}\n\t\t\t\t\tleft={left}\n\t\t\t\t\ttop={top}\n\t\t\t\t\ttransitions={transitions}\n\t\t\t\t>\n\t\t\t\t\t<BoundingBox\n\t\t\t\t\t\treference={state.coordinates}\n\t\t\t\t\t\tclassName={cn(boundingBoxClassName, 'advanced-cropper-circle-stencil__bounding-box')}\n\t\t\t\t\t\thandlers={handlers}\n\t\t\t\t\t\thandlerComponent={handlerComponent}\n\t\t\t\t\t\thandlerClassNames={handlerClassNames}\n\t\t\t\t\t\thandlerWrapperClassNames={handlerWrapperClassNames}\n\t\t\t\t\t\tlines={lines}\n\t\t\t\t\t\tlineComponent={lineComponent}\n\t\t\t\t\t\tlineClassNames={lineClassNames}\n\t\t\t\t\t\tlineWrapperClassNames={lineWrapperClassNames}\n\t\t\t\t\t\tonResize={onResize}\n\t\t\t\t\t\tonResizeEnd={onResizeEnd}\n\t\t\t\t\t\tdisabled={!resizeAllowed}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DraggableArea\n\t\t\t\t\t\t\tdisabled={!moveAllowed}\n\t\t\t\t\t\t\tonMove={onMove}\n\t\t\t\t\t\t\tonMoveEnd={onMoveEnd}\n\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__draggable-area', draggableAreaClassName)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StencilOverlay\n\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__overlay', overlayClassName)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{grid && (\n\t\t\t\t\t\t\t\t\t<StencilGrid\n\t\t\t\t\t\t\t\t\t\tvisible={cropper.hasInteractions()}\n\t\t\t\t\t\t\t\t\t\tcolumns={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\trows={interactions.transformImage.rotate ? 9 : 3}\n\t\t\t\t\t\t\t\t\t\tclassName={cn('advanced-cropper-circle-stencil__grid', gridClassName)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className={cn('advanced-cropper-circle-stencil__preview', previewClassName)} />\n\t\t\t\t\t\t\t</StencilOverlay>\n\t\t\t\t\t\t</DraggableArea>\n\t\t\t\t\t</BoundingBox>\n\t\t\t\t</StencilWrapper>\n\t\t\t)\n\t\t);\n\t},\n);\n\nCircleStencil.displayName = 'CircleStencil';\n", "import React, { forwardRef, HTMLAttributes, RefObject } from 'react';\nimport cn from 'classnames';\n\ninterface Props extends HTMLAttributes<HTMLImageElement> {\n\tsrc?: string | null;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n}\n\nexport const CropperSource = forwardRef<HTMLImageElement, Props>(\n\t({ src, crossOrigin = true, ...props }: Props, ref) => {\n\t\treturn src ? (\n\t\t\t<img\n\t\t\t\tkey={src}\n\t\t\t\tref={ref as RefObject<HTMLImageElement>}\n\t\t\t\tsrc={src}\n\t\t\t\tclassName={cn('advanced-cropper-source')}\n\t\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t) : null;\n\t},\n);\n\nCropperSource.displayName = 'CropperSource';\n", "import React, { CSSProperties, FC, ReactNode } from 'react';\nimport cn from 'classnames';\nimport { CropperFade } from '../service/CropperFade';\n\ninterface DesiredCropperRef {\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewWrapperProps {\n\tcropper?: DesiredCropperRef;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tchildren?: ReactNode;\n}\n\nexport const CropperPreviewWrapper: FC<CropperPreviewWrapperProps> = ({ children, cropper, className, style }) => {\n\treturn (\n\t\t<div className={cn(className, 'cropper-preview-wrapper')} style={style}>\n\t\t\t<CropperFade visible={cropper?.isLoaded()} className={'cropper-preview-wrapper__fade'}>\n\t\t\t\t{children}\n\t\t\t</CropperFade>\n\t\t</div>\n\t);\n};\n", "import React, { CSSProperties } from 'react';\nimport cn from 'classnames';\nimport { CropperTransitions, CropperImage, CropperState, Size, getPreviewStyle } from 'advanced-cropper';\nimport { preventDefault } from '../../service/events';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetTransitions: () => CropperTransitions;\n\tgetImage: () => CropperImage | null;\n}\n\nexport interface CropperPreviewBackgroundProps {\n\tclassName?: string;\n\tcropper: DesiredCropperRef;\n\tcrossOrigin?: 'anonymous' | 'use-credentials' | boolean;\n\tsize?: Size | null;\n\tstyle?: CSSProperties;\n}\n\nexport const CropperPreviewBackground = ({\n\tclassName,\n\tcropper,\n\tcrossOrigin = true,\n\tsize,\n\tstyle,\n}: CropperPreviewBackgroundProps) => {\n\tconst state = cropper.getState();\n\tconst transitions = cropper.getTransitions();\n\tconst image = cropper.getImage();\n\n\tconst transformStyles = size && image && state?.coordinates ? getPreviewStyle(image, state, size, transitions) : {};\n\n\tconst src = image ? image.src : undefined;\n\n\treturn src ? (\n\t\t<img\n\t\t\tkey={src}\n\t\t\tclassName={cn('advanced-cropper-background-image', className)}\n\t\t\tsrc={src}\n\t\t\tcrossOrigin={crossOrigin === true ? 'anonymous' : crossOrigin || undefined}\n\t\t\tstyle={{\n\t\t\t\t...transformStyles,\n\t\t\t\t...style,\n\t\t\t}}\n\t\t\tonMouseDown={preventDefault}\n\t\t/>\n\t) : null;\n};\n", "import React, {\n\tRefObject,\n\tComponentType,\n\tCSSProperties,\n\tforwardRef,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport cn from 'classnames';\nimport {\n\tCropperImage,\n\tCropperState,\n\tCropperTransitions,\n\tSize,\n\tratio,\n\tisGreater,\n\tstretchPreviewBoundary,\n} from 'advanced-cropper';\nimport { StretchableBoundary, StretchableBoundaryMethods } from '../service/StretchableBoundary';\nimport { useWindowResize } from '../../hooks/useWindowResize';\nimport { ArbitraryProps, CropperBoundaryComponent } from '../../types';\nimport { useForceRerender } from '../../hooks/useForceRerender';\nimport { CropperPreviewWrapper } from './CropperPreviewWrapper';\nimport { CropperPreviewBackground } from './CropperPreviewBackground';\n\ninterface DesiredCropperRef {\n\tgetState: () => CropperState | null;\n\tgetImage: () => CropperImage | null;\n\tgetTransitions: () => CropperTransitions;\n\tisLoading: () => boolean;\n\tisLoaded: () => boolean;\n}\n\nexport interface CropperPreviewRef {\n\trefresh: () => void;\n\tupdate: (cropper?: DesiredCropperRef) => void;\n}\n\ntype PreviewWrapperComponent = ComponentType<{\n\tcropper: any;\n\tclassName?: string;\n\tstyle?: CSSProperties;\n\tloading?: boolean;\n\tloaded?: boolean;\n}>;\n\ntype PreviewBackgroundComponent = ComponentType<{\n\tcropper: any;\n\tsize: Size | null;\n\tclassName?: string;\n}>;\n\ninterface Props {\n\tstate?: CropperState | null;\n\timage?: CropperImage | null;\n\ttransitions?: CropperTransitions | null;\n\tloading?: boolean;\n\tloaded?: boolean;\n\tclassName?: string;\n\tcontentClassName?: string;\n\tbackgroundClassName?: string;\n\tbackgroundComponent?: PreviewBackgroundComponent;\n\tbackgroundProps?: ArbitraryProps;\n\tboundaryComponent?: CropperBoundaryComponent;\n\tboundaryProps?: ArbitraryProps;\n\tboundaryClassName?: string;\n\twrapperComponent?: PreviewWrapperComponent;\n\twrapperProps?: ArbitraryProps;\n\tstyle?: CSSProperties;\n\tcropper?: RefObject<DesiredCropperRef | null>;\n}\n\nexport const CropperPreview = forwardRef<CropperPreviewRef, Props>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\tstate = null,\n\t\t\timage = null,\n\t\t\ttransitions = null,\n\t\t\tbackgroundComponent = CropperPreviewBackground,\n\t\t\tbackgroundProps,\n\t\t\tbackgroundClassName,\n\t\t\tboundaryComponent = StretchableBoundary,\n\t\t\tboundaryProps,\n\t\t\tboundaryClassName,\n\t\t\twrapperComponent = CropperPreviewWrapper,\n\t\t\twrapperProps,\n\t\t\tloaded = true,\n\t\t\tloading = false,\n\t\t\tstyle,\n\t\t\tcropper,\n\t\t}: Props,\n\t\tref,\n\t) => {\n\t\tconst rerender = useForceRerender();\n\n\t\tconst boundaryRef = useRef<StretchableBoundaryMethods>(null);\n\n\t\tconst internalInstance = useRef<DesiredCropperRef | null>(null);\n\n\t\tconst instance = cropper || (internalInstance.current ? internalInstance : {\n\t\t\tcurrent: {\n\t\t\t\tgetState: () => state,\n\t\t\t\tgetTransitions: () => transitions,\n\t\t\t\tgetImage: () => image,\n\t\t\t\tisLoaded: () => loaded,\n\t\t\t\tisLoading: () => loading,\n\t\t\t},\n\t\t});\n\n\t\tconst [size, setSize] = useState<Size | null>(null);\n\n\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\n\t\tconst src = instance.current?.getImage()?.src;\n\n\t\tconst contentStyle = size\n\t\t\t? {\n\t\t\t\t\twidth: `${size.width}px`,\n\t\t\t\t\theight: `${size.height}px`,\n\t\t\t  }\n\t\t\t: {};\n\n\t\tconst refresh = () => {\n\t\t\tconst coordinates = instance.current?.getState()?.coordinates;\n\t\t\tif (boundaryRef.current && coordinates) {\n\t\t\t\tboundaryRef.current.stretchTo(coordinates).then((size) => {\n\t\t\t\t\tif (size && coordinates) {\n\t\t\t\t\t\tif (isGreater(ratio(coordinates), ratio(size))) {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.width,\n\t\t\t\t\t\t\t\theight: size.width / ratio(coordinates),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetSize({\n\t\t\t\t\t\t\t\twidth: size.height * ratio(coordinates),\n\t\t\t\t\t\t\t\theight: size.height,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetSize(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trerender();\n\t\t};\n\n\t\tuseWindowResize(refresh);\n\n\t\tuseLayoutEffect(refresh, [coordinates?.height, coordinates?.width]);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\trefresh,\n\t\t\tupdate(cropper?: DesiredCropperRef) {\n\t\t\t\tif (cropper) {\n\t\t\t\t\tinternalInstance.current = cropper;\n\t\t\t\t} else {\n\t\t\t\t\tinternalInstance.current = null;\n\t\t\t\t}\n\t\t\t\trefresh();\n\t\t\t}\n\t\t}));\n\n\t\tconst WrapperComponent = wrapperComponent;\n\n\t\tconst BackgroundComponent = backgroundComponent;\n\n\t\tconst BoundaryComponent = boundaryComponent;\n\n\t\treturn (\n\t\t\t<WrapperComponent\n\t\t\t\t{...wrapperProps}\n\t\t\t\tclassName={cn(className, 'advanced-cropper-preview')}\n\t\t\t\tcropper={instance.current}\n\t\t\t\tstyle={style}\n\t\t\t>\n\t\t\t\t<BoundaryComponent\n\t\t\t\t\tref={boundaryRef}\n\t\t\t\t\tstretchAlgorithm={stretchPreviewBoundary}\n\t\t\t\t\t{...boundaryProps}\n\t\t\t\t\tclassName={cn('advanced-cropper-preview__boundary', boundaryClassName)}\n\t\t\t\t>\n\t\t\t\t\t<div className={cn(contentClassName, 'advanced-cropper-preview__content')} style={contentStyle}>\n\t\t\t\t\t\t{instance.current && (\n\t\t\t\t\t\t\t<BackgroundComponent\n\t\t\t\t\t\t\t\t{...backgroundProps}\n\t\t\t\t\t\t\t\tcropper={instance.current}\n\t\t\t\t\t\t\t\tsize={size}\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\tbackgroundClassName,\n\t\t\t\t\t\t\t\t\t'advanced-cropper-preview__image',\n\t\t\t\t\t\t\t\t\tsrc && 'advanced-cropper-preview__image--visible',\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</BoundaryComponent>\n\t\t\t</WrapperComponent>\n\t\t);\n\t},\n);\n", "import { MutableRefObject, LegacyRef, RefCallback } from 'react';\n\nexport function mergeRefs<T = any>(refs: (MutableRefObject<T> | LegacyRef<T>)[]): RefCallback<T> {\n\treturn (value) => {\n\t\trefs.forEach((ref) => {\n\t\t\tif (typeof ref === 'function') {\n\t\t\t\tref(value);\n\t\t\t} else if (ref != null) {\n\t\t\t\t(ref as MutableRefObject<T | null>).current = value;\n\t\t\t}\n\t\t});\n\t};\n}\n"],
  "mappings": "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",
  "names": ["HORIZONTAL_DIRECTIONS", "VERTICAL_DIRECTIONS", "aspectRatio", "sizeRestrictions", "ImageRestriction", "Priority", "ratio", "SetCoordinatesMode", "coordinates", "transform", "defaultSize", "state", "AbstractCropperInstance", "_a", "transformImageAlgorithm", "moveCoordinatesAlgorithm", "resizeCoordinatesAlgorithm", "Animation", "callback", "CropperInstance", "image", "_b", "React", "cn", "DraggableElement", "classnames", "DraggableArea", "TransformableImageEvent", "TransformableImage", "preventDefault", "deprecationWarning", "size", "cropper"]
}
